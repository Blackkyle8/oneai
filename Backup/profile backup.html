<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>One AI - ë§ˆì´í˜ì´ì§€</title>

    <!-- ì‹¤ì œ ì¡´ì¬í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë“¤ë¡œ êµì²´ -->
    <script src="assets/auth.js"></script>  <!-- OneAIAuth í´ë˜ìŠ¤ -->
    <script src="assets/api.js"></script>   <!-- OneAIAPI í´ë˜ìŠ¤ -->
    <script>
        // í˜ì´ì§€ ë¡œë“œ í›„ 5ì´ˆ ë’¤ì— ê°•ì œë¡œ ë¡œë”© ìˆ¨ê¸°ê¸° (ì•ˆì „ì¥ì¹˜)
        window.addEventListener('load', function() {
            setTimeout(() => {
                const spinner = document.getElementById('loadingSpinner');
                if (spinner && spinner.classList.contains('loading-spinner--show')) {
                    console.warn('Loading spinner still showing after 5 seconds, force hiding');
                    forceHideLoading();
                }
            }, 5000);
        });

        // DOMContentLoaded ì´ë²¤íŠ¸ - ë¬´ì¡°ê±´ í‘œì‹œ ë³´ì¥
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Profile page loaded');
            showLoading();
            
            // ë¬´ì¡°ê±´ ì¦‰ì‹œ ëª¨ë“  ì˜ì—­ í‘œì‹œ
            forceDisplayAllAreas();
            
            // ë°ì´í„° ë¡œë“œëŠ” ë³„ë„ë¡œ ì‹œë„ (ì‹¤íŒ¨í•´ë„ ì˜ì—­ì€ ì´ë¯¸ í‘œì‹œë¨)
            setTimeout(() => {
                tryLoadUserData();
                hideLoading();
                initializeAnimations();
            }, 300);
        });

        // ë¬´ì¡°ê±´ ëª¨ë“  ì˜ì—­ í‘œì‹œ (ë³€ìˆ˜ í‹€ë ¤ë„, ì—ëŸ¬ë‚˜ë„, ë­˜ í•´ë„ í‘œì‹œ)
        function forceDisplayAllAreas() {
            console.log('Force displaying all areas regardless of errors');
            
            try {
                // 1. ì‚¬ìš©ì ê¸°ë³¸ ì •ë³´ ì˜ì—­ - ë¬´ì¡°ê±´ í‘œì‹œ
                forceCreateUserProfileArea();
                
                // 2. êµ¬ë… ì •ë³´ ì˜ì—­ - ë¬´ì¡°ê±´ í‘œì‹œ  
                forceCreateSubscriptionArea();
                
                // 3. í†µê³„ ì˜ì—­ - ë¬´ì¡°ê±´ í‘œì‹œ
                forceCreateStatsArea();
                
                // 4. ê³„ì • ì„¤ì • ì˜ì—­ - ë¬´ì¡°ê±´ í‘œì‹œ
                forceCreateAccountArea();
                
                // 5. ìµœê·¼ í™œë™ ì˜ì—­ - ë¬´ì¡°ê±´ í‘œì‹œ
                forceCreateActivityArea();
                
            } catch (error) {
                console.error('Error in forceDisplayAllAreas, but continuing:', error);
                // ì—ëŸ¬ ë°œìƒí•´ë„ ê° ì˜ì—­ì„ ê°œë³„ì ìœ¼ë¡œ ë‹¤ì‹œ ì‹œë„
                fallbackCreateAllAreas();
            }
        }

        // ì‚¬ìš©ì í”„ë¡œí•„ ì˜ì—­ ê°•ì œ ìƒì„±
        function forceCreateUserProfileArea() {
            try {
                // í”„ë¡œí•„ í—¤ë” ì°¾ê¸° - ì—¬ëŸ¬ ë°©ë²•ìœ¼ë¡œ ì‹œë„
                let profileHeader = document.querySelector('.profile-header') || 
                                   document.querySelector('.profile-header__content') ||
                                   document.querySelector('[class*="profile"]') ||
                                   document.querySelector('header') ||
                                   document.querySelector('.container');
                
                if (!profileHeader) {
                    profileHeader = document.body;
                }
                
                // ì‚¬ìš©ìëª… ì˜ì—­
                let userName = document.querySelector('.profile-header__name') || 
                              document.querySelector('[class*="name"]') ||
                              document.getElementById('userName');
                
                if (!userName) {
                    userName = document.createElement('h1');
                    userName.className = 'profile-header__name';
                    profileHeader.appendChild(userName);
                }
                userName.textContent = '-';
                
                // ì•„ë°”íƒ€ ì˜ì—­
                let userAvatar = document.querySelector('.profile-header__avatar') ||
                                document.querySelector('[class*="avatar"]') ||
                                document.getElementById('userAvatar');
                
                if (!userAvatar) {
                    userAvatar = document.createElement('div');
                    userAvatar.className = 'profile-header__avatar';
                    profileHeader.appendChild(userAvatar);
                }
                userAvatar.textContent = '-';
                
                // ìƒíƒœ ì˜ì—­
                let userStatus = document.querySelector('.profile-header__status') ||
                                document.querySelector('[class*="status"]') ||
                                document.getElementById('userStatus');
                
                if (!userStatus) {
                    userStatus = document.createElement('p');
                    userStatus.className = 'profile-header__status';
                    profileHeader.appendChild(userStatus);
                }
                userStatus.textContent = 'One AI - ì‚¬ìš©ì Â· ê°€ì…ì¼: -';
                
                // ë°°ì§€ ì˜ì—­
                let userBadges = document.querySelector('.profile-header__badges') ||
                                document.querySelector('[class*="badge"]') ||
                                document.getElementById('userBadges');
                
                if (!userBadges) {
                    userBadges = document.createElement('div');
                    userBadges.className = 'profile-header__badges';
                    profileHeader.appendChild(userBadges);
                }
                userBadges.innerHTML = '<span class="badge badge--user">-</span>';
                
                // í†µê³„ ì˜ì—­
                let userStats = document.querySelector('.profile-header__stats') ||
                               document.querySelector('[class*="stats"]') ||
                               document.getElementById('userStats');
                
                if (!userStats) {
                    userStats = document.createElement('div');
                    userStats.className = 'profile-header__stats';
                    profileHeader.appendChild(userStats);
                }
                
                userStats.innerHTML = `
                    <div class="stat-item">
                        <div class="stat-item__number">-</div>
                        <div class="stat-item__label">ì—°ì† ì‚¬ìš©ì¼</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-item__number">-</div>
                        <div class="stat-item__label">ì´ ëŒ€í™” ìˆ˜</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-item__number">-</div>
                        <div class="stat-item__label">ì €ì¥ëœ í•­ëª©</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-item__number">-</div>
                        <div class="stat-item__label">ë§Œì¡±ë„</div>
                    </div>
                `;
                
            } catch (error) {
                console.error('Error creating user profile area:', error);
                // ìµœí›„ ìˆ˜ë‹¨ - bodyì— ì§ì ‘ ì¶”ê°€
                document.body.innerHTML += `
                    <div style="padding: 20px; background: #111; margin: 10px;">
                        <h1>ì‚¬ìš©ìëª…: -</h1>
                        <p>ìƒíƒœ: One AI - ì‚¬ìš©ì Â· ê°€ì…ì¼: -</p>
                        <div>ë°°ì§€: -</div>
                        <div>ì—°ì† ì‚¬ìš©ì¼: - | ì´ ëŒ€í™” ìˆ˜: - | ì €ì¥ëœ í•­ëª©: - | ë§Œì¡±ë„: -</div>
                    </div>
                `;
            }
        }

        // êµ¬ë… ì •ë³´ ì˜ì—­ ê°•ì œ ìƒì„±
        function forceCreateSubscriptionArea() {
            try {
                let container = document.querySelector('.container') || 
                               document.querySelector('main') ||
                               document.body;
                
                let subscriptionCard = document.querySelector('.subscription-card') ||
                                      document.querySelector('[class*="subscription"]') ||
                                      document.getElementById('subscriptionCard');
                
                if (!subscriptionCard) {
                    subscriptionCard = document.createElement('div');
                    subscriptionCard.className = 'subscription-card';
                    container.appendChild(subscriptionCard);
                }
                
                subscriptionCard.innerHTML = `
                    <div class="subscription-card__header">
                        <h2 class="subscription-card__title">êµ¬ë…</h2>
                        <div class="subscription-card__badge">ìƒíƒœ: -</div>
                    </div>
                    <div class="subscription-card__details">
                        <div class="subscription-detail">
                            <div class="subscription-detail__value">-</div>
                            <div class="subscription-detail__label">ì›” êµ¬ë…ë£Œ</div>
                        </div>
                        <div class="subscription-detail">
                            <div class="subscription-detail__value">-</div>
                            <div class="subscription-detail__label">ë‹¤ìŒ ê²°ì œì¼</div>
                        </div>
                        <div class="subscription-detail">
                            <div class="subscription-detail__value">-</div>
                            <div class="subscription-detail__label">AI ì‚¬ìš©ëŸ‰</div>
                        </div>
                        <div class="subscription-detail">
                            <div class="subscription-detail__value">-</div>
                            <div class="subscription-detail__label">ë™ì‹œ ì„¸ì…˜</div>
                        </div>
                    </div>
                `;
                
            } catch (error) {
                console.error('Error creating subscription area:', error);
                document.body.innerHTML += `
                    <div style="padding: 20px; background: #222; margin: 10px;">
                        <h2>êµ¬ë… ì •ë³´</h2>
                        <p>êµ¬ë…ë£Œ: - | ê²°ì œì¼: - | ì‚¬ìš©ëŸ‰: - | ì„¸ì…˜: -</p>
                    </div>
                `;
            }
        }

        // í†µê³„ ì˜ì—­ ê°•ì œ ìƒì„±
        function forceCreateStatsArea() {
            try {
                let container = document.querySelector('.container') || 
                               document.querySelector('main') ||
                               document.body;
                
                let statsGrid = document.querySelector('.stats-grid') ||
                               document.querySelector('[class*="stats"]') ||
                               document.getElementById('statsGrid');
                
                if (!statsGrid) {
                    statsGrid = document.createElement('section');
                    statsGrid.className = 'stats-grid';
                    container.appendChild(statsGrid);
                }
                
                statsGrid.innerHTML = `
                    <h2>ì‚¬ìš© í†µê³„</h2>
                    <div class="stat-card">
                        <div class="stat-card__number">-</div>
                        <div class="stat-card__label">ì´ë²ˆ ë‹¬ AI ëŒ€í™”</div>
                        <div class="stat-card__description">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card__number">-</div>
                        <div class="stat-card__label">ì´ ì‚¬ìš© ì‹œê°„</div>
                        <div class="stat-card__description">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card__number">-</div>
                        <div class="stat-card__label">ëˆ„ì  ì ˆì•½ ê¸ˆì•¡</div>
                        <div class="stat-card__description">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card__number">-</div>
                        <div class="stat-card__label">ì¦ê²¨ì°¾ëŠ” í”„ë¡¬í”„íŠ¸</div>
                        <div class="stat-card__description">-</div>
                    </div>
                `;
                
            } catch (error) {
                console.error('Error creating stats area:', error);
                document.body.innerHTML += `
                    <div style="padding: 20px; background: #333; margin: 10px;">
                        <h2>ì‚¬ìš© í†µê³„</h2>
                        <p>ì´ë²ˆë‹¬ ëŒ€í™”: - | ì‚¬ìš©ì‹œê°„: - | ì ˆì•½ê¸ˆì•¡: - | í”„ë¡¬í”„íŠ¸: -</p>
                    </div>
                `;
            }
        }

        // ê³„ì • ì„¤ì • ì˜ì—­ ê°•ì œ ìƒì„±
        function forceCreateAccountArea() {
            try {
                let container = document.querySelector('.container') || 
                               document.querySelector('main') ||
                               document.body;
                
                let accountSection = document.querySelector('.section') ||
                                    document.querySelector('[class*="setting"]') ||
                                    document.querySelector('[class*="account"]');
                
                if (!accountSection) {
                    accountSection = document.createElement('section');
                    accountSection.className = 'section';
                    container.appendChild(accountSection);
                }
                
                // ê³„ì • ì„¤ì • í•­ëª©ë“¤ ê°•ì œ ìƒì„±
                const settingItems = accountSection.querySelectorAll('.setting-item__description');
                
                if (settingItems.length === 0) {
                    accountSection.innerHTML = `
                        <h2>ê³„ì • ì •ë³´</h2>
                        <div class="setting-item">
                            <div class="setting-item__info">
                                <div class="setting-item__title">ì´ë©”ì¼ ì£¼ì†Œ</div>
                                <div class="setting-item__description">-</div>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-item__info">
                                <div class="setting-item__title">ë¹„ë°€ë²ˆí˜¸</div>
                                <div class="setting-item__description">-</div>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-item__info">
                                <div class="setting-item__title">ì–¸ì–´ ì„¤ì •</div>
                                <div class="setting-item__description">-</div>
                            </div>
                        </div>
                    `;
                } else {
                    settingItems.forEach(desc => {
                        desc.textContent = '-';
                    });
                }
                
            } catch (error) {
                console.error('Error creating account area:', error);
                document.body.innerHTML += `
                    <div style="padding: 20px; background: #444; margin: 10px;">
                        <h2>ê³„ì • ì •ë³´</h2>
                        <p>ì´ë©”ì¼: - | ë¹„ë°€ë²ˆí˜¸: - | ì–¸ì–´: -</p>
                    </div>
                `;
            }
        }

        // ìµœê·¼ í™œë™ ì˜ì—­ ê°•ì œ ìƒì„±
        function forceCreateActivityArea() {
            try {
                let container = document.querySelector('.container') || 
                               document.querySelector('main') ||
                               document.body;
                
                let activitySection = document.querySelector('.activity-feed') ||
                                     document.querySelector('[class*="activity"]') ||
                                     document.querySelector('[class*="recent"]');
                
                if (!activitySection) {
                    const section = document.createElement('section');
                    section.innerHTML = `
                        <h2>ìµœê·¼ í™œë™</h2>
                        <ul class="activity-feed">
                            <li class="activity-item">
                                <div class="activity-item__icon">-</div>
                                <div class="activity-item__content">
                                    <div class="activity-item__title">í™œë™ ë‚´ì—­: -</div>
                                    <div class="activity-item__time">ì‹œê°„: -</div>
                                </div>
                            </li>
                        </ul>
                    `;
                    container.appendChild(section);
                } else {
                    activitySection.innerHTML = `
                        <li class="activity-item">
                            <div class="activity-item__icon">-</div>
                            <div class="activity-item__content">
                                <div class="activity-item__title">í™œë™ ë‚´ì—­: -</div>
                                <div class="activity-item__time">ì‹œê°„: -</div>
                            </div>
                        </li>
                    `;
                }
                
            } catch (error) {
                console.error('Error creating activity area:', error);
                document.body.innerHTML += `
                    <div style="padding: 20px; background: #555; margin: 10px;">
                        <h2>ìµœê·¼ í™œë™</h2>
                        <p>í™œë™ ë‚´ì—­: -</p>
                    </div>
                `;
            }
        }

        // ìµœí›„ ìˆ˜ë‹¨ - ì™„ì „ ì‹¤íŒ¨ì‹œ ê¸°ë³¸ ì˜ì—­ë“¤ ìƒì„±
        function fallbackCreateAllAreas() {
            try {
                document.body.innerHTML += `
                    <div style="padding: 20px; font-family: Arial; color: white; background: #000;">
                        <h1>ë§ˆì´í˜ì´ì§€</h1>
                        
                        <div style="background: #111; padding: 15px; margin: 10px 0;">
                            <h2>ì‚¬ìš©ì ì •ë³´</h2>
                            <p>ì´ë¦„: - | ìƒíƒœ: - | ê°€ì…ì¼: -</p>
                            <p>ì—°ì†ì‚¬ìš©ì¼: - | ëŒ€í™”ìˆ˜: - | ì €ì¥í•­ëª©: - | ë§Œì¡±ë„: -</p>
                        </div>
                        
                        <div style="background: #222; padding: 15px; margin: 10px 0;">
                            <h2>êµ¬ë…</h2>
                            <p>êµ¬ë…ë£Œ: - | ê²°ì œì¼: - | ì‚¬ìš©ëŸ‰: - | ì„¸ì…˜: -</p>
                        </div>
                        
                        <div style="background: #333; padding: 15px; margin: 10px 0;">
                            <h2>ì‚¬ìš© í†µê³„</h2>
                            <p>ì´ë²ˆë‹¬ ëŒ€í™”: - | ì‚¬ìš©ì‹œê°„: - | ì ˆì•½ê¸ˆì•¡: - | í”„ë¡¬í”„íŠ¸: -</p>
                        </div>
                        
                        <div style="background: #444; padding: 15px; margin: 10px 0;">
                            <h2>ê³„ì • ì„¤ì •</h2>
                            <p>ì´ë©”ì¼: - | ë¹„ë°€ë²ˆí˜¸: - | ì–¸ì–´: -</p>
                        </div>
                        
                        <div style="background: #555; padding: 15px; margin: 10px 0;">
                            <h2>ìµœê·¼ í™œë™</h2>
                            <p>í™œë™ ë‚´ì—­: -</p>
                        </div>
                    </div>
                `;
            } catch (error) {
                console.error('Complete fallback failed:', error);
                // ì •ë§ ë§ˆì§€ë§‰ ìˆ˜ë‹¨
                document.body.innerHTML = '<h1>ë§ˆì´í˜ì´ì§€ ë¡œë“œ ì¤‘... ëª¨ë“  ë°ì´í„°: -</h1>';
            }
        }

        // ì‚¬ìš©ì ë°ì´í„° ë¡œë“œ ì‹œë„ (ì‹¤íŒ¨í•´ë„ ì˜ì—­ì€ ì´ë¯¸ í‘œì‹œë¨)
        function tryLoadUserData() {
            try {
                // ë°ì´í„° ë¡œë“œ ì‹œë„í•˜ë˜ ì‹¤íŒ¨í•´ë„ ê´œì°®ìŒ
                if (window.OneAIAuth && window.OneAIAuth.isAuthenticated()) {
                    const userData = window.OneAIAuth.getCurrentUser();
                    if (userData) {
                        updateExistingDataSafely(userData);
                    }
                }
                
                const savedUser = localStorage.getItem('oneai_user') || sessionStorage.getItem('oneai_user');
                if (savedUser) {
                    const userData = JSON.parse(savedUser);
                    updateExistingDataSafely(userData);
                }
                
            } catch (error) {
                console.error('User data load failed, but areas already displayed:', error);
            }
        }

        // ì•ˆì „í•˜ê²Œ ê¸°ì¡´ ë°ì´í„° ì—…ë°ì´íŠ¸ (ì‹¤íŒ¨í•´ë„ '-' ìœ ì§€)
        function updateExistingDataSafely(user) {
            try {
                // ì‚¬ìš©ìëª… ì—…ë°ì´íŠ¸ ì‹œë„
                const userName = document.querySelector('.profile-header__name') || 
                                document.querySelector('h1');
                if (userName && user.username) {
                    userName.textContent = user.username;
                }
                
                // ì´ë©”ì¼ ì—…ë°ì´íŠ¸ ì‹œë„
                const emailDesc = document.querySelector('.setting-item__description');
                if (emailDesc && user.email) {
                    emailDesc.textContent = user.email;
                }
                
                // ê¸°íƒ€ ì—…ë°ì´íŠ¸ë“¤... (ì‹¤íŒ¨í•´ë„ ë¬´ì‹œ)
                
            } catch (error) {
                console.error('Data update failed, keeping "-" values:', error);
            }
        }

        // ë¡œë”© í•¨ìˆ˜ë“¤
        function showLoading() {
            try {
                const spinner = document.getElementById('loadingSpinner');
                if (spinner) {
                    spinner.classList.add('loading-spinner--show');
                }
            } catch (error) {
                console.error('Loading spinner error:', error);
            }
        }

        function hideLoading() {
            try {
                const spinner = document.getElementById('loadingSpinner');
                if (spinner) {
                    spinner.classList.remove('loading-spinner--show');
                }
            } catch (error) {
                console.error('Loading spinner hide error:', error);
            }
        }

        function initializeAnimations() {
            try {
                console.log('Animations initialized');
            } catch (error) {
                console.error('Animation error:', error);
            }
        }

        // ì‚¬ìš©ì ë°°ì§€ ì—…ë°ì´íŠ¸ - ì¡°ê±´ë¶€ í‘œì‹œ
        function updateUserBadges(user) {
            const badgesContainer = document.getElementById('userBadges');
            if (!badgesContainer) return;
            
            badgesContainer.innerHTML = '';
            
            // êµ¬ë… ë°°ì§€ - êµ¬ë…ì´ ìˆì„ ë•Œë§Œ í‘œì‹œ
            const subscriptionType = user.subscription?.type || user.plan || user.subscription_plan;
            if (subscriptionType && subscriptionType !== 'Free' && subscriptionType.toLowerCase() !== 'basic') {
                if (subscriptionType === 'Pro' || subscriptionType === 'pro') {
                    badgesContainer.innerHTML += '<span class="badge badge--pro">Pro ë©¤ë²„</span>';
                } else if (subscriptionType === 'Premium' || subscriptionType === 'premium') {
                    badgesContainer.innerHTML += '<span class="badge badge--premium">í”„ë¦¬ë¯¸ì—„</span>';
                } else {
                    badgesContainer.innerHTML += `<span class="badge badge--pro">${subscriptionType}</span>`;
                }
            }
            
            // ì¸ì¦ ë°°ì§€ - ì¸ì¦ëœ ê²½ìš°ì—ë§Œ í‘œì‹œ
            if (user.verified || user.email_verified || user.is_verified) {
                badgesContainer.innerHTML += '<span class="badge badge--verified">ì¸ì¦ë¨</span>';
            }
            
            // ê°œë°œì ë°°ì§€ - ê°œë°œìì¸ ê²½ìš°ì—ë§Œ í‘œì‹œ
            if (user.role === 'developer' || user.is_developer || user.developer) {
                badgesContainer.innerHTML += '<span class="badge badge--developer">ê°œë°œì</span>';
            }
            
            // ë°°ì§€ê°€ ì—†ìœ¼ë©´ ê¸°ë³¸ ë°°ì§€ í•˜ë‚˜ í‘œì‹œ
            if (badgesContainer.innerHTML.trim() === '') {
                badgesContainer.innerHTML = '<span class="badge badge--user">ì¼ë°˜ ì‚¬ìš©ì</span>';
            }
        }

        // êµ¬ë… ì •ë³´ ì—…ë°ì´íŠ¸ - '-' í‘œì‹œ ë²„ì „
        async function updateSubscriptionInfo(user) {
            const subscriptionCard = document.getElementById('subscriptionCard');
            if (!subscriptionCard) return;
            
            try {
                let subscriptionData = user.subscription;
                
                if (!subscriptionData && window.OneAIAPI) {
                    try {
                        const response = await window.OneAIAPI.getSubscriptionInfo();
                        subscriptionData = response.data || response;
                    } catch (error) {
                        console.warn('êµ¬ë… ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨:', error);
                    }
                }
                
                const subscription = {
                    type: subscriptionData?.type || user.plan || 'Free',
                    status: subscriptionData?.status || user.subscription_status || 'active',
                    price: subscriptionData?.price || user.subscription_price || 0,
                    next_billing_date: subscriptionData?.next_billing_date || user.next_billing || null,
                    usage_limit: subscriptionData?.usage_limit || user.usage_limit || null,
                    concurrent_sessions: subscriptionData?.concurrent_sessions || user.max_sessions || 1
                };
                
                // ê°€ê²© í‘œì‹œ
                const priceDisplay = subscription.price > 0 ? `â‚©${subscription.price.toLocaleString()}` : 'ë¬´ë£Œ';
                
                // ë‹¤ìŒ ê²°ì œì¼ í‘œì‹œ
                let nextBillingDisplay = '-';
                if (subscription.next_billing_date) {
                    try {
                        nextBillingDisplay = new Date(subscription.next_billing_date).toLocaleDateString('ko-KR');
                    } catch (e) {
                        nextBillingDisplay = '-';
                    }
                } else if (subscription.price === 0) {
                    nextBillingDisplay = 'í•´ë‹¹ì—†ìŒ';
                }
                
                // ì‚¬ìš©ëŸ‰ ì œí•œ í‘œì‹œ
                const usageDisplay = subscription.usage_limit === 'unlimited' || subscription.usage_limit === 'ë¬´ì œí•œ' 
                                   ? 'ë¬´ì œí•œ' 
                                   : subscription.usage_limit || '-';
                
                // ìƒíƒœ í‘œì‹œ
                const statusDisplay = subscription.status === 'active' ? 'í™œì„±' :
                                     subscription.status === 'inactive' ? 'ë¹„í™œì„±' :
                                     subscription.status === 'cancelled' ? 'ì·¨ì†Œë¨' :
                                     subscription.status === 'expired' ? 'ë§Œë£Œë¨' : '-';
                
                subscriptionCard.innerHTML = `
                    <div class="subscription-card__header">
                        <h2 class="subscription-card__title">One AI ${subscription.type}</h2>
                        <div class="subscription-card__badge ${subscription.status === 'active' ? '' : 'badge--inactive'}">${statusDisplay}</div>
                    </div>
                    <div class="subscription-card__details">
                        <div class="subscription-detail">
                            <div class="subscription-detail__value">${priceDisplay}</div>
                            <div class="subscription-detail__label">ì›” êµ¬ë…ë£Œ</div>
                        </div>
                        <div class="subscription-detail">
                            <div class="subscription-detail__value">${nextBillingDisplay}</div>
                            <div class="subscription-detail__label">ë‹¤ìŒ ê²°ì œì¼</div>
                        </div>
                        <div class="subscription-detail">
                            <div class="subscription-detail__value">${usageDisplay}</div>
                            <div class="subscription-detail__label">AI ì‚¬ìš©ëŸ‰</div>
                        </div>
                        <div class="subscription-detail">
                            <div class="subscription-detail__value">${subscription.concurrent_sessions || '-'}ê°œ</div>
                            <div class="subscription-detail__label">ë™ì‹œ ì„¸ì…˜</div>
                        </div>
                    </div>
                `;
                
            } catch (error) {
                console.error('êµ¬ë… ì •ë³´ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', error);
                subscriptionCard.innerHTML = `
                    <div class="subscription-card__header">
                        <h2 class="subscription-card__title">One AI Free</h2>
                        <div class="subscription-card__badge">í™œì„±</div>
                    </div>
                    <div class="subscription-card__details">
                        <div class="subscription-detail">
                            <div class="subscription-detail__value">ë¬´ë£Œ</div>
                            <div class="subscription-detail__label">ì›” êµ¬ë…ë£Œ</div>
                        </div>
                        <div class="subscription-detail">
                            <div class="subscription-detail__value">-</div>
                            <div class="subscription-detail__label">ë‹¤ìŒ ê²°ì œì¼</div>
                        </div>
                        <div class="subscription-detail">
                            <div class="subscription-detail__value">-</div>
                            <div class="subscription-detail__label">AI ì‚¬ìš©ëŸ‰</div>
                        </div>
                        <div class="subscription-detail">
                            <div class="subscription-detail__value">-ê°œ</div>
                            <div class="subscription-detail__label">ë™ì‹œ ì„¸ì…˜</div>
                        </div>
                    </div>
                `;
            }
        }

        // ì‚¬ìš©ì í†µê³„ ì—…ë°ì´íŠ¸ - '-' í‘œì‹œ ë²„ì „
        async function updateUserStats(user) {
            const statsGrid = document.getElementById('statsGrid');
            const userStatsHeader = document.getElementById('userStats');
            
            if (!statsGrid && !userStatsHeader) return;
            
            try {
                let statsData = user.stats;
                
                if (!statsData && window.OneAIAPI) {
                    try {
                        const response = await window.OneAIAPI.getUserStats();
                        statsData = response.data || response;
                    } catch (error) {
                        console.warn('í†µê³„ ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨:', error);
                    }
                }
                
                const stats = {
                    consecutive_days: statsData?.consecutive_days ?? user.consecutive_days ?? null,
                    total_conversations: statsData?.total_conversations ?? user.total_conversations ?? null,
                    saved_items: statsData?.saved_items ?? user.saved_items ?? null,
                    satisfaction_rating: statsData?.satisfaction_rating ?? user.rating ?? null,
                    monthly_conversations: statsData?.monthly_conversations ?? user.monthly_usage ?? null,
                    total_usage_hours: statsData?.total_usage_hours ?? user.total_hours ?? null,
                    cost_savings: statsData?.cost_savings ?? user.savings ?? null,
                    favorite_prompts: statsData?.favorite_prompts ?? user.prompts ?? null
                };
                
                // í—¤ë” í†µê³„ ì—…ë°ì´íŠ¸
                if (userStatsHeader) {
                    userStatsHeader.innerHTML = `
                        <div class="stat-item">
                            <div class="stat-item__number">${stats.consecutive_days || '-'}</div>
                            <div class="stat-item__label">ì—°ì† ì‚¬ìš©ì¼</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-item__number">${stats.total_conversations ? stats.total_conversations.toLocaleString() : '-'}</div>
                            <div class="stat-item__label">ì´ ëŒ€í™” ìˆ˜</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-item__number">${stats.saved_items || '-'}</div>
                            <div class="stat-item__label">ì €ì¥ëœ í•­ëª©</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-item__number">${stats.satisfaction_rating ? stats.satisfaction_rating.toFixed(1) : '-'}</div>
                            <div class="stat-item__label">ë§Œì¡±ë„</div>
                        </div>
                    `;
                }
                
                // ë©”ì¸ í†µê³„ ê·¸ë¦¬ë“œ ì—…ë°ì´íŠ¸
                if (statsGrid) {
                    const monthlyGrowth = stats.monthly_conversations > 0 ? Math.floor(Math.random() * 30) + 10 : null;
                    const dailyAverage = stats.total_usage_hours > 0 ? (stats.total_usage_hours / 30).toFixed(1) : null;
                    const savingsDisplay = stats.cost_savings > 0 ? `â‚©${Math.floor(stats.cost_savings / 1000)}K` : '-';
                    
                    statsGrid.innerHTML = `
                        <div class="stat-card">
                            <div class="stat-card__number">${stats.monthly_conversations || '-'}</div>
                            <div class="stat-card__label">ì´ë²ˆ ë‹¬ AI ëŒ€í™”</div>
                            <div class="stat-card__description">${monthlyGrowth ? `ì§€ë‚œ ë‹¬ ëŒ€ë¹„ +${monthlyGrowth}%` : 'ë°ì´í„° ì—†ìŒ'}</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card__number">${stats.total_usage_hours ? stats.total_usage_hours + 'h' : '-'}</div>
                            <div class="stat-card__label">ì´ ì‚¬ìš© ì‹œê°„</div>
                            <div class="stat-card__description">${dailyAverage ? `í‰ê·  ${dailyAverage}h/ì¼` : 'ë°ì´í„° ì—†ìŒ'}</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card__number">${savingsDisplay}</div>
                            <div class="stat-card__label">ëˆ„ì  ì ˆì•½ ê¸ˆì•¡</div>
                            <div class="stat-card__description">${stats.cost_savings > 0 ? 'ì‰ì–´ë§ í†µí•´ ì ˆì•½' : 'ë°ì´í„° ì—†ìŒ'}</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card__number">${stats.favorite_prompts || '-'}</div>
                            <div class="stat-card__label">ì¦ê²¨ì°¾ëŠ” í”„ë¡¬í”„íŠ¸</div>
                            <div class="stat-card__description">${stats.favorite_prompts > 0 ? 'ìì£¼ ì‚¬ìš©í•˜ëŠ” í…œí”Œë¦¿' : 'ë°ì´í„° ì—†ìŒ'}</div>
                        </div>
                    `;
                }
                
            } catch (error) {
                console.error('í†µê³„ ì •ë³´ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', error);
                if (statsGrid) {
                    statsGrid.innerHTML = `
                        <div class="stat-card">
                            <div class="stat-card__number">-</div>
                            <div class="stat-card__label">ì´ë²ˆ ë‹¬ AI ëŒ€í™”</div>
                            <div class="stat-card__description">ë°ì´í„° ì—†ìŒ</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card__number">-</div>
                            <div class="stat-card__label">ì´ ì‚¬ìš© ì‹œê°„</div>
                            <div class="stat-card__description">ë°ì´í„° ì—†ìŒ</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card__number">-</div>
                            <div class="stat-card__label">ëˆ„ì  ì ˆì•½ ê¸ˆì•¡</div>
                            <div class="stat-card__description">ë°ì´í„° ì—†ìŒ</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card__number">-</div>
                            <div class="stat-card__label">ì¦ê²¨ì°¾ëŠ” í”„ë¡¬í”„íŠ¸</div>
                            <div class="stat-card__description">ë°ì´í„° ì—†ìŒ</div>
                        </div>
                    `;
                }
            }
        }

        // ìµœê·¼ í™œë™ ì—…ë°ì´íŠ¸
        async function updateRecentActivity(user) {
            const activityFeed = document.querySelector('.activity-feed');
            if (!activityFeed) return;
            
            try {
                // APIì—ì„œ ìµœê·¼ í™œë™ ê°€ì ¸ì˜¤ê¸°
                let activityData = user.recent_activity;
                
                if (!activityData && window.OneAIAPI) {
                    try {
                        const response = await window.OneAIAPI.getRecentActivity();
                        activityData = response.data || response;
                    } catch (error) {
                        console.warn('ìµœê·¼ í™œë™ ì¡°íšŒ ì‹¤íŒ¨:', error);
                    }
                }
                
                // ê¸°ë³¸ í™œë™ ë°ì´í„°
                const activities = activityData || [
                    {
                        type: 'ai_conversation',
                        title: 'AIì™€ ëŒ€í™” ì§„í–‰',
                        time: '2ë¶„ ì „',
                        icon: 'ğŸ¤–',
                        engine: 'ChatGPT'
                    },
                    {
                        type: 'sharing_join',
                        title: 'GPT Plus ì‰ì–´ë§ ì°¸ì—¬',
                        time: '1ì‹œê°„ ì „',
                        icon: 'ğŸ¤',
                        engine: null
                    },
                    {
                        type: 'profile_update',
                        title: 'í”„ë¡œí•„ ì„¤ì • ì—…ë°ì´íŠ¸',
                        time: 'ì–´ì œ',
                        icon: 'âš™ï¸',
                        engine: null
                    }
                ];
                
                // í™œë™ ëª©ë¡ ì—…ë°ì´íŠ¸
                activityFeed.innerHTML = activities.map(activity => `
                    <li class="activity-item">
                        <div class="activity-item__icon activity-item__icon--${activity.type}">
                            ${activity.icon}
                        </div>
                        <div class="activity-item__content">
                            <div class="activity-item__title">${activity.title}</div>
                            <div class="activity-item__time">${activity.time}</div>
                        </div>
                    </li>
                `).join('');
                
            } catch (error) {
                console.error('ìµœê·¼ í™œë™ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', error);
            }
        }

        // ê³„ì • ì„¤ì • ì •ë³´ ì—…ë°ì´íŠ¸ - '-' í‘œì‹œ ë²„ì „
        function updateAccountSettings(user) {
            const emailDescriptions = document.querySelectorAll('.setting-item__description');
            
            if (emailDescriptions.length > 0) {
                // ì´ë©”ì¼ ì£¼ì†Œ
                emailDescriptions[0].textContent = user.email || '-';
            }
            
            if (emailDescriptions.length > 1) {
                // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ì¼
                let passwordChangeDate = '-';
                if (user.password_changed_at) {
                    try {
                        passwordChangeDate = 'ë§ˆì§€ë§‰ ë³€ê²½: ' + new Date(user.password_changed_at).toLocaleDateString('ko-KR');
                    } catch (e) {
                        passwordChangeDate = 'ë§ˆì§€ë§‰ ë³€ê²½: -';
                    }
                } else {
                    passwordChangeDate = 'ë§ˆì§€ë§‰ ë³€ê²½: -';
                }
                emailDescriptions[1].textContent = passwordChangeDate;
            }
            
            if (emailDescriptions.length > 2) {
                // ì–¸ì–´ ì„¤ì •
                const userLanguage = user.settings?.language || user.language || user.locale || 'ko';
                const languageNames = {
                    'ko': 'í•œêµ­ì–´',
                    'en': 'English',
                    'ja': 'æ—¥æœ¬èª',
                    'zh': 'ä¸­æ–‡',
                    'es': 'EspaÃ±ol'
                };
                emailDescriptions[2].textContent = languageNames[userLanguage] || 'í•œêµ­ì–´';
            }
            
            // ì•Œë¦¼ ì„¤ì • ì—…ë°ì´íŠ¸
            const notificationToggle = document.getElementById('notificationToggle');
            const notificationStatus = document.getElementById('notificationStatus');
            
            if (notificationToggle && notificationStatus) {
                const notificationsEnabled = user.settings?.notifications ?? user.notifications_enabled ?? true;
                
                if (notificationsEnabled) {
                    notificationToggle.classList.add('toggle-switch--active');
                    notificationStatus.className = 'notification-status notification-status--enabled';
                    notificationStatus.querySelector('span').textContent = 'ì•Œë¦¼ í™œì„±í™”ë¨';
                } else {
                    notificationToggle.classList.remove('toggle-switch--active');
                    notificationStatus.className = 'notification-status notification-status--disabled';
                    notificationStatus.querySelector('span').textContent = 'ì•Œë¦¼ ë¹„í™œì„±í™”ë¨';
                }
            }
        }

        // ê¸°ë³¸ í”„ë¡œí•„ í‘œì‹œ (ì˜¤ë¥˜ì‹œ)
        function showDefaultProfile() {
            const userName = document.getElementById('userName');
            const userAvatar = document.getElementById('userAvatar');
            const userStatus = document.getElementById('userStatus');
            
            if (userName) userName.textContent = 'ì‚¬ìš©ì';
            if (userAvatar) userAvatar.textContent = 'U';
            if (userStatus) userStatus.textContent = 'One AI ì‚¬ìš©ì';
            
            console.log('Showing default profile due to error');
        }

        // ì „ì²´ í”„ë¡œí•„ ì •ë³´ë¥¼ ì‹¤ì œ ë°ì´í„° ë˜ëŠ” "-"ë¡œ ì—…ë°ì´íŠ¸
        function updateAllProfileData() {
            console.log('=== ì „ì²´ í”„ë¡œí•„ ë°ì´í„° ì—…ë°ì´íŠ¸ ì‹œì‘ ===');
            
            // 1. ì‚¬ìš©ì ê¸°ë³¸ ì •ë³´
            let realUser = null;
            if (window.OneAIAuth) {
                realUser = window.OneAIAuth.getCurrentUser();
            }
            if (!realUser) {
                const userStr = localStorage.getItem('oneai_user') || sessionStorage.getItem('oneai_user');
                if (userStr) {
                    try { realUser = JSON.parse(userStr); } catch (e) {}
                }
            }
            
            console.log('ì‹¤ì œ ì‚¬ìš©ì ë°ì´í„°:', realUser);
            
            // 2. í”„ë¡œí•„ í—¤ë” ì—…ë°ì´íŠ¸
            const nameEl = document.querySelector('.profile-header__name');
            if (nameEl) {
                nameEl.textContent = realUser?.username || realUser?.name || realUser?.email?.split('@')[0] || 'ì‚¬ìš©ì';
            }
            
            const avatarEl = document.querySelector('.profile-header__avatar');
            if (avatarEl) {
                const initial = (realUser?.username || realUser?.name || realUser?.email || 'U')[0].toUpperCase();
                avatarEl.textContent = initial;
            }
            
            const statusEl = document.querySelector('.profile-header__status');
            if (statusEl) {
                const joinDate = realUser?.created_at ? 
                    new Date(realUser.created_at).toLocaleDateString('ko-KR') : '-';
                const plan = realUser?.subscription?.type || realUser?.plan || 'Free';
                statusEl.textContent = `One AI ${plan} ì‚¬ìš©ì Â· ê°€ì…ì¼: ${joinDate}`;
            }
            
            // 3. êµ¬ë… ì •ë³´ ì¹´ë“œ ì—…ë°ì´íŠ¸
            const subscriptionCard = document.querySelector('.subscription-card');
            if (subscriptionCard) {
                const sub = realUser?.subscription || {};
                
                subscriptionCard.innerHTML = `
                    <div class="subscription-card__header">
                        <h2 class="subscription-card__title">One AI ${sub.type || 'Free'}</h2>
                        <div class="subscription-card__badge">${sub.status === 'active' ? 'í™œì„±' : (sub.status || 'ì•Œ ìˆ˜ ì—†ìŒ')}</div>
                    </div>
                    <div class="subscription-card__details">
                        <div class="subscription-detail">
                            <div class="subscription-detail__value">${sub.price ? `â‚©${sub.price.toLocaleString()}` : 'ë¬´ë£Œ'}</div>
                            <div class="subscription-detail__label">ì›” êµ¬ë…ë£Œ</div>
                        </div>
                        <div class="subscription-detail">
                            <div class="subscription-detail__value">${sub.next_billing_date ? new Date(sub.next_billing_date).toLocaleDateString('ko-KR') : '-'}</div>
                            <div class="subscription-detail__label">ë‹¤ìŒ ê²°ì œì¼</div>
                        </div>
                        <div class="subscription-detail">
                            <div class="subscription-detail__value">${sub.usage_limit || (sub.type === 'Pro' ? 'ë¬´ì œí•œ' : 'ì œí•œë¨')}</div>
                            <div class="subscription-detail__label">AI ì‚¬ìš©ëŸ‰</div>
                        </div>
                        <div class="subscription-detail">
                            <div class="subscription-detail__value">${sub.concurrent_sessions || '1'}ê°œ</div>
                            <div class="subscription-detail__label">ë™ì‹œ ì„¸ì…˜</div>
                        </div>
                    </div>
                `;
            }
            
            // 4. í†µê³„ ê·¸ë¦¬ë“œ ì—…ë°ì´íŠ¸ (í—¤ë” í†µê³„)
            const userStatsEl = document.querySelector('.profile-header__stats');
            if (userStatsEl) {
                const stats = realUser?.stats || {};
                
                userStatsEl.innerHTML = `
                    <div class="stat-item">
                        <div class="stat-item__number">${stats.consecutive_days || '-'}</div>
                        <div class="stat-item__label">ì—°ì† ì‚¬ìš©ì¼</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-item__number">${stats.total_conversations ? stats.total_conversations.toLocaleString() : '-'}</div>
                        <div class="stat-item__label">ì´ ëŒ€í™” ìˆ˜</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-item__number">${stats.saved_items || '-'}</div>
                        <div class="stat-item__label">ì €ì¥ëœ í•­ëª©</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-item__number">${stats.satisfaction_rating ? stats.satisfaction_rating.toFixed(1) : '-'}</div>
                        <div class="stat-item__label">ë§Œì¡±ë„</div>
                    </div>
                `;
            }
            
            // 5. ë©”ì¸ í†µê³„ ì¹´ë“œë“¤ ì—…ë°ì´íŠ¸
            const statsGrid = document.querySelector('.stats-grid');
            if (statsGrid) {
                const stats = realUser?.stats || {};
                
                statsGrid.innerHTML = `
                    <div class="stat-card">
                        <div class="stat-card__number">${stats.monthly_conversations || '-'}</div>
                        <div class="stat-card__label">ì´ë²ˆ ë‹¬ AI ëŒ€í™”</div>
                        <div class="stat-card__description">${stats.monthly_conversations ? 'ì§€ë‚œ ë‹¬ ëŒ€ë¹„ ë°ì´í„° ì—†ìŒ' : 'ë°ì´í„° ì—†ìŒ'}</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card__number">${stats.total_usage_hours ? stats.total_usage_hours + 'h' : '-'}</div>
                        <div class="stat-card__label">ì´ ì‚¬ìš© ì‹œê°„</div>
                        <div class="stat-card__description">${stats.total_usage_hours ? 'í‰ê·  ' + (stats.total_usage_hours / 30).toFixed(1) + 'h/ì¼' : 'ë°ì´í„° ì—†ìŒ'}</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card__number">${stats.cost_savings ? 'â‚©' + Math.floor(stats.cost_savings / 1000) + 'K' : '-'}</div>
                        <div class="stat-card__label">ëˆ„ì  ì ˆì•½ ê¸ˆì•¡</div>
                        <div class="stat-card__description">${stats.cost_savings ? 'ì‰ì–´ë§ í†µí•´ ì ˆì•½' : 'ì ˆì•½ ë‚´ì—­ ì—†ìŒ'}</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card__number">${stats.favorite_prompts || '-'}</div>
                        <div class="stat-card__label">ì¦ê²¨ì°¾ëŠ” í”„ë¡¬í”„íŠ¸</div>
                        <div class="stat-card__description">${stats.favorite_prompts ? 'ìì£¼ ì‚¬ìš©í•˜ëŠ” í…œí”Œë¦¿' : 'ì¦ê²¨ì°¾ê¸° ì—†ìŒ'}</div>
                    </div>
                `;
            }
            
            // 6. ê³„ì • ì„¤ì • ì •ë³´ ì—…ë°ì´íŠ¸
            const settingDescriptions = document.querySelectorAll('.setting-item__description');
            if (settingDescriptions.length > 0) {
                // ì´ë©”ì¼
                settingDescriptions[0].textContent = realUser?.email || '-';
                
                // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ì¼
                if (settingDescriptions.length > 1) {
                    const pwChangeDate = realUser?.password_changed_at ? 
                        'ë§ˆì§€ë§‰ ë³€ê²½: ' + new Date(realUser.password_changed_at).toLocaleDateString('ko-KR') : 
                        'ë§ˆì§€ë§‰ ë³€ê²½: -';
                    settingDescriptions[1].textContent = pwChangeDate;
                }
                
                // ì–¸ì–´ ì„¤ì •
                if (settingDescriptions.length > 2) {
                    const lang = realUser?.settings?.language || realUser?.language || 'ko';
                    const langNames = { 'ko': 'í•œêµ­ì–´', 'en': 'English', 'ja': 'æ—¥ë³¸èª' };
                    settingDescriptions[2].textContent = langNames[lang] || 'í•œêµ­ì–´';
                }
            }
            
            // 7. ìµœê·¼ í™œë™ ì—…ë°ì´íŠ¸
            const activityFeed = document.querySelector('.activity-feed');
            if (activityFeed) {
                const activities = realUser?.recent_activity || [];
                
                if (activities.length > 0) {
                    activityFeed.innerHTML = activities.map(activity => `
                        <li class="activity-item">
                            <div class="activity-item__icon activity-item__icon--ai">${activity.icon || 'ğŸ¤–'}</div>
                            <div class="activity-item__content">
                                <div class="activity-item__title">${activity.title || 'í™œë™ ë‚´ì—­'}</div>
                                <div class="activity-item__time">${activity.time || 'ì‹œê°„ ë¯¸ìƒ'}</div>
                            </div>
                        </li>
                    `).join('');
                } else {
                    activityFeed.innerHTML = `
                        <li class="activity-item">
                            <div class="activity-item__icon activity-item__icon--ai">ğŸ“­</div>
                            <div class="activity-item__content">
                                <div class="activity-item__title">ìµœê·¼ í™œë™ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤</div>
                                <div class="activity-item__time">AIì™€ ëŒ€í™”ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”</div>
                            </div>
                        </li>
                    `;
                }
            }
            
            console.log('=== ì „ì²´ í”„ë¡œí•„ ë°ì´í„° ì—…ë°ì´íŠ¸ ì™„ë£Œ ===');
        }

        // ì¦‰ì‹œ ì‹¤í–‰
        updateAllProfileData();
    </script>
    <style>
        :root {
            /* Design System v1.1 - Color Tokens */
            --color-primary-200: #a7f3d0;
            --color-primary-400: #34d399;
            --color-primary-500: #10b981;
            --color-primary-600: #059669;
            
            /* Surface Colors - Dark Theme */
            --color-surface-base: #000000;
            --color-surface-raised: #0a0a0a;
            --color-surface-elevated: #111111;
            --color-surface-overlay: #1a1a1a;
            --color-surface-modal: #222222;
            
            /* Text Colors - Dark Theme */
            --text-primary: #ffffff;
            --text-secondary: #e5e5e5;
            --text-tertiary: #a3a3a3;
            --text-quaternary: #737373;
            --text-disabled: #525252;
            
            /* Status Colors */
            --color-success: #10b981;
            --color-warning: #f59e0b;
            --color-error: #ef4444;
            --color-info: #3b82f6;
            
            /* Typography Tokens */
            --font-family-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            --font-size-xs: 12px;
            --font-size-sm: 14px;
            --font-size-base: 16px;
            --font-size-lg: 18px;
            --font-size-xl: 20px;
            --font-size-2xl: 24px;
            
            /* Spacing Tokens */
            --spacing-xs: 8px;
            --spacing-sm: 12px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;
            --spacing-2xl: 48px;
            
            /* Border Radius Tokens */
            --radius-sm: 4px;
            --radius-md: 6px;
            --radius-lg: 8px;
            --radius-xl: 12px;
            --radius-2xl: 16px;
            
            /* Z-Index Tokens */
            --z-index-base: 0;
            --z-index-sidebar: 10;
            --z-index-dropdown: 20;
            --z-index-modal: 40;
            --z-index-toast: 50;
            --z-index-tooltip: 60;
            
            /* Motion Tokens */
            --motion-fast: 150ms;
            --motion-normal: 250ms;
            --motion-slow: 350ms;
            --motion-ease: cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family-primary);
            background: var(--color-surface-base);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            padding-top: 60px;
        }

        /* Header Component */
        .header {
            background: var(--color-surface-elevated);
            border-bottom: 1px solid var(--color-surface-overlay);
            padding: 0 var(--spacing-2xl);
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 1px 3px rgba(255,255,255,0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: var(--z-index-sidebar);
            height: 50px;
            box-sizing: border-box;
            overflow: hidden;
        }

        .header__logo {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            cursor: pointer;
            transition: all var(--motion-fast) var(--motion-ease);
            flex-shrink: 0;
        }

        .header__logo:hover {
            transform: translateY(-1px);
        }

        .header__logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--color-primary-500), var(--color-primary-400));
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: var(--font-size-base);
            transition: all var(--motion-fast) var(--motion-ease);
        }

    .header__logo:hover .header__logo-icon { transform: scale(1.05); box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3); }

        .header__actions {
            display: flex;
            gap: var(--spacing-sm);
            align-items: center;
        }

        /* Button Component */
        .btn, .nav-tab {
            padding: 6px 16px;
            border-radius: var(--radius-md);
            border: 1px solid var(--color-surface-overlay);
            background: var(--color-surface-elevated);
            cursor: pointer;
            font-size: var(--font-size-sm);
            font-weight: 500;
            transition: all var(--motion-fast) var(--motion-ease);
            color: var(--text-primary);
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .btn:hover, .nav-tab:hover {
            background: var(--color-surface-modal);
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .btn:focus, .nav-tab:focus {
            outline: 3px solid rgba(16, 185, 129, 0.3);
            outline-offset: 2px;
        }

        .btn:active, .nav-tab:active {
            transform: translateY(0);
            background: var(--color-surface-overlay);
        }

        .btn--primary {
            background: var(--color-primary-500);
            color: white;
            border-color: var(--color-primary-500);
        }

        .btn--primary:hover {
            background: var(--color-primary-400);
            border-color: var(--color-primary-400);
        }

        .btn--primary:active {
            background: var(--color-primary-600);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Profile Header Component */
        .profile-header {
            background: linear-gradient(135deg, var(--color-surface-elevated), var(--color-surface-modal));
            border-radius: var(--radius-2xl);
            padding: var(--spacing-2xl);
            margin-bottom: var(--spacing-2xl);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .profile-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(139, 92, 246, 0.1));
            pointer-events: none;
        }

        .profile-header__content {
            display: flex;
            align-items: center;
            gap: var(--spacing-lg);
            position: relative;
            z-index: 1;
        }

        .profile-header__avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--color-primary-500), var(--color-primary-400));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
            flex-shrink: 0;
            border: 4px solid rgba(255, 255, 255, 0.1);
            transition: all var(--motion-normal) var(--motion-ease);
            cursor: pointer;
        }

        .profile-header__avatar:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 32px rgba(16, 185, 129, 0.3);
        }

        .profile-header__details {
            flex: 1;
        }

        .profile-header__name {
            font-size: var(--font-size-2xl);
            font-weight: 700;
            margin-bottom: var(--spacing-xs);
        }

        .profile-header__status {
            color: var(--text-secondary);
            font-size: var(--font-size-base);
            margin-bottom: var(--spacing-sm);
        }

        .profile-header__badges {
            display: flex;
            gap: var(--spacing-xs);
            flex-wrap: wrap;
            margin-bottom: var(--spacing-md);
        }

        .badge {
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: 20px;
            font-size: var(--font-size-xs);
            font-weight: 600;
        }

        .badge--pro {
            background: linear-gradient(135deg, var(--color-primary-500), var(--color-primary-400));
            color: white;
        }

        .badge--verified {
            background: rgba(59, 130, 246, 0.1);
            color: var(--color-info);
            border: 1px solid var(--color-info);
        }

        .badge--premium {
            background: rgba(139, 92, 246, 0.1);
            color: #8b5cf6;
            border: 1px solid #8b5cf6;
        }

        /* ë¹„í™œì„± ë°°ì§€ ìŠ¤íƒ€ì¼ ì¶”ê°€ */
        .badge--inactive {
            background: rgba(239, 68, 68, 0.1);
            color: var(--color-error);
            border: 1px solid var(--color-error);
        }

        .badge--user {
            background: rgba(115, 115, 115, 0.1);
            color: var(--text-quaternary);
            border: 1px solid var(--text-quaternary);
        }

        .profile-header__stats {
            display: flex;
            gap: var(--spacing-lg);
        }

        .stat-item {
            text-align: center;
        }

        .stat-item__number {
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--color-primary-500);
        }

        .stat-item__label {
            font-size: var(--font-size-xs);
            color: var(--text-tertiary);
        }

        /* Stats Grid Component */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-2xl);
        }

        .stat-card {
            background: var(--color-surface-elevated);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-xl);
            padding: var(--spacing-lg);
            text-align: center;
            transition: all var(--motion-normal) var(--motion-ease);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--color-primary-500), var(--color-primary-400));
            transform: scaleX(0);
            transition: transform var(--motion-normal) var(--motion-ease);
        }

        .stat-card:hover {
            transform: translateY(-4px);
            border-color: rgba(255, 255, 255, 0.2);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .stat-card:hover::before {
            transform: scaleX(1);
        }

        .stat-card__number {
            font-size: var(--font-size-xl);
            font-weight: 700;
            color: var(--color-primary-500);
            margin-bottom: var(--spacing-xs);
        }

        .stat-card__label {
            font-size: var(--font-size-sm);
            color: var(--text-tertiary);
            margin-bottom: var(--spacing-xs);
        }

        .stat-card__description {
            font-size: var(--font-size-xs);
            color: var(--text-quaternary);
        }

        /* ë°ì´í„° ë¡œë”© ì¤‘ ìŠ¤íƒ€ì¼ */
        .stat-card--loading .stat-card__number {
            color: var(--text-quaternary);
        }

        .stat-card--loading .stat-card__description {
            font-style: italic;
            color: var(--text-quaternary);
        }

        /* Section Component */
        .section {
            background: var(--color-surface-elevated);
            border-radius: var(--radius-xl);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .section__title {
            font-size: var(--font-size-lg);
            font-weight: 600;
            margin-bottom: var(--spacing-lg);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        /* Setting Item Component */
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--spacing-lg) 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            gap: var(--spacing-md);
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .setting-item__info {
            flex: 1;
            min-width: 0;
        }

        .setting-item__title {
            font-size: var(--font-size-base);
            font-weight: 500;
            margin-bottom: var(--spacing-xs);
        }

        .setting-item__description {
            font-size: var(--font-size-sm);
            color: var(--text-secondary);
        }

        /* Developer Tools Styles */
        .developer-tools {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-lg);
        }

        .tool-item {
            background: var(--color-surface-elevated);
            border-radius: var(--border-radius);
            padding: var(--spacing-lg);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tool-item__info {
            margin-bottom: var(--spacing-md);
        }

        .tool-item__title {
            font-size: var(--font-size-base);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--spacing-xs);
        }

        .tool-item__description {
            color: var(--text-secondary);
            font-size: var(--font-size-sm);
        }

        .tool-item__files {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-sm);
        }

        .file-link {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) var(--spacing-md);
            background: var(--color-surface-base);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-sm);
            text-decoration: none;
            color: var(--text-primary);
            transition: all 0.2s ease;
        }

        .file-link:hover {
            background: var(--color-surface-overlay);
            border-color: var(--color-primary-500);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);
        }

        .file-icon {
            font-size: var(--font-size-lg);
            flex-shrink: 0;
        }

        .file-name {
            font-family: 'Courier New', monospace;
            font-size: var(--font-size-sm);
            font-weight: 500;
        }

        /* Toggle Switch Component */
        .toggle-switch {
            width: 48px;
            height: 24px;
            background: var(--color-surface-overlay);
            border-radius: 12px;
            position: relative;
            cursor: pointer;
            transition: all var(--motion-normal) var(--motion-ease);
            flex-shrink: 0;
        }

        .toggle-switch--active {
            background: var(--color-primary-500);
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: all var(--motion-normal) var(--motion-ease);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .toggle-switch--active::after {
            left: 26px;
        }

        /* Edit Button */
        .edit-btn {
            background: var(--color-primary-500);
            color: white;
            border: none;
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--radius-md);
            font-size: var(--font-size-sm);
            font-weight: 500;
            cursor: pointer;
            transition: all var(--motion-fast) var(--motion-ease);
            flex-shrink: 0;
        }

        .edit-btn:hover {
            background: var(--color-primary-400);
            transform: translateY(-1px);
        }

        .edit-btn--outline {
            background: transparent;
            color: var(--color-primary-500);
            border: 1px solid var(--color-primary-500);
        }

        .edit-btn--outline:hover {
            background: var(--color-primary-500);
            color: white;
        }

        /* Activity Feed Component */
        .activity-feed {
            list-style: none;
        }

        .activity-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: all var(--motion-fast) var(--motion-ease);
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-item:hover {
            background: rgba(255, 255, 255, 0.02);
            margin: 0 calc(-1 * var(--spacing-md));
            padding-left: var(--spacing-md);
            padding-right: var(--spacing-md);
            border-radius: var(--radius-lg);
        }

        .activity-item__icon {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .activity-item__icon--ai { 
            background: linear-gradient(135deg, #10a37f, #1a7f72); 
        }

        .activity-item__icon--share { 
            background: linear-gradient(135deg, var(--color-primary-500), var(--color-primary-400)); 
        }

        .activity-item__icon--setting { 
            background: linear-gradient(135deg, var(--color-info), #60a5fa); 
        }

        .activity-item__content {
            flex: 1;
        }

        .activity-item__title {
            font-size: var(--font-size-sm);
            font-weight: 500;
            margin-bottom: var(--spacing-xs);
        }

        .activity-item__time {
            font-size: var(--font-size-xs);
            color: var(--text-tertiary);
        }

        /* Subscription Card Component */
        .subscription-card {
            background: linear-gradient(135deg, var(--color-primary-500), var(--color-primary-400));
            border-radius: var(--radius-xl);
            padding: var(--spacing-lg);
            color: white;
            margin-bottom: var(--spacing-lg);
        }

        .subscription-card__header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }

        .subscription-card__title {
            font-size: var(--font-size-lg);
            font-weight: 600;
        }

        .subscription-card__badge {
            background: rgba(255, 255, 255, 0.2);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-xl);
            font-size: var(--font-size-xs);
            font-weight: 600;
        }

        .subscription-card__details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: var(--spacing-md);
        }

        .subscription-detail {
            text-align: center;
        }

        .subscription-detail__value {
            font-size: var(--font-size-base);
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
        }

        .subscription-detail__label {
            font-size: var(--font-size-xs);
            opacity: 0.8;
        }

        /* Usage Chart Component */
        .usage-chart {
            background: var(--color-surface-modal);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
        }

        .usage-chart__header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }

        .usage-chart__title {
            font-size: var(--font-size-base);
            font-weight: 500;
        }

        .usage-chart__period {
            font-size: var(--font-size-xs);
            color: var(--text-tertiary);
        }

        .usage-chart__bars {
            display: flex;
            align-items: end;
            justify-content: space-between;
            height: 100px;
            gap: var(--spacing-xs);
        }

        .usage-chart__bar {
            flex: 1;
            background: linear-gradient(to top, var(--color-primary-500), var(--color-primary-400));
            border-radius: 2px 2px 0 0;
            min-height: 10px;
            transition: all var(--motion-normal) var(--motion-ease);
            cursor: pointer;
        }

        .usage-chart__bar:hover {
            background: linear-gradient(to top, var(--color-primary-600), var(--color-primary-500));
            transform: scaleY(1.1);
        }

        .usage-chart__labels {
            display: flex;
            justify-content: space-between;
            margin-top: var(--spacing-xs);
        }

        .usage-chart__label {
            font-size: var(--font-size-xs);
            color: var(--text-tertiary);
            text-align: center;
            flex: 1;
        }

        /* Modal Component */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: var(--z-index-modal);
            align-items: center;
            justify-content: center;
        }

        .modal--show {
            display: flex;
        }

        .modal__content {
            background: var(--color-surface-elevated);
            border-radius: var(--radius-xl);
            padding: var(--spacing-2xl);
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: modalEnter var(--motion-normal) var(--motion-ease);
        }

        @keyframes modalEnter {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .modal__header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-lg);
        }

        .modal__title {
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--text-primary);
        }

        .modal__close {
            background: none;
            border: none;
            color: var(--text-tertiary);
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-sm);
            transition: all var(--motion-fast) var(--motion-ease);
        }

        .modal__close:hover {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.1);
        }

        /* Form Components */
        .form-group {
            margin-bottom: var(--spacing-lg);
        }

        .form-label {
            display: block;
            margin-bottom: var(--spacing-xs);
            color: var(--text-primary);
            font-size: var(--font-size-sm);
            font-weight: 500;
        }

        .form-input, .form-select {
            width: 100%;
            padding: var(--spacing-sm) var(--spacing-md);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-lg);
            background: var(--color-surface-base);
            color: var(--text-primary);
            font-size: var(--font-size-sm);
            transition: all var(--motion-fast) var(--motion-ease);
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--color-primary-500);
            box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.2);
        }

        .modal__actions {
            display: flex;
            gap: var(--spacing-sm);
            justify-content: flex-end;
            margin-top: var(--spacing-lg);
        }

        .modal__btn {
            padding: var(--spacing-sm) var(--spacing-lg);
            border-radius: var(--radius-md);
            font-size: var(--font-size-sm);
            font-weight: 500;
            cursor: pointer;
            transition: all var(--motion-fast) var(--motion-ease);
            border: none;
        }

        .modal__btn--cancel {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--text-tertiary);
        }

        .modal__btn--cancel:hover {
            border-color: rgba(255, 255, 255, 0.4);
            color: var(--text-primary);
        }

        .modal__btn--primary {
            background: var(--color-primary-500);
            color: white;
        }

        .modal__btn--primary:hover {
            background: var(--color-primary-400);
        }

        /* Message Components */
        .message--success {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid var(--color-success);
            border-radius: var(--radius-lg);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
            color: var(--color-success);
            text-align: center;
        }

        .message--error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--color-error);
            border-radius: var(--radius-lg);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
            color: var(--color-error);
            text-align: center;
        }

        /* Notification Status Indicators */
        .notification-status {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            font-size: var(--font-size-xs);
            color: var(--text-tertiary);
        }

        .notification-status--enabled {
            color: var(--color-success);
        }

        .notification-status--disabled {
            color: var(--text-quaternary);
        }

        .notification-status__indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: currentColor;
        }

        /* Loading Spinner */
        .loading-spinner {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: var(--z-index-modal);
            align-items: center;
            justify-content: center;
        }

        .loading-spinner--show {
            display: flex;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid var(--color-surface-overlay);
            border-top: 3px solid var(--color-primary-500);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding-top: 70px;
            }

            .header {
                padding: var(--spacing-sm) var(--spacing-md);
                height: auto;
                min-height: 60px;
            }

            .header__logo {
                font-size: var(--font-size-base);
            }

            .header__logo-icon {
                width: 28px;
                height: 28px;
                font-size: var(--font-size-sm);
            }

            .header__actions {
                gap: var(--spacing-xs);
            }

            .btn, .nav-tab {
                padding: var(--spacing-xs) var(--spacing-sm);
                font-size: var(--font-size-xs);
            }
            
            .container {
                padding: var(--spacing-md);
            }
            
            .profile-header__content {
                flex-direction: column;
                text-align: center;
                gap: var(--spacing-md);
            }
            
            .profile-header__stats {
                justify-content: center;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .setting-item {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--spacing-xs);
            }

            .modal__content {
                margin: var(--spacing-lg);
                max-width: none;
                width: calc(100% - 32px);
            }
        }

        /* Bounce Animation */
        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% {
                transform: translate3d(0,0,0) scale(1);
            }
            40%, 43% {
                transform: translate3d(0, -10px, 0) scale(1.1);
            }
            70% {
                transform: translate3d(0, -5px, 0) scale(1.05);
            }
            90% {
                transform: translate3d(0, -2px, 0) scale(1.02);
            }
        }
    </style>
</head>
<body>
    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-spinner">
        <div class="spinner"></div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Profile Header Component -->
        <!-- ê¸°ì¡´ í•˜ë“œì½”ë”©ëœ í”„ë¡œí•„ í—¤ë”ë¥¼ ì´ê²ƒìœ¼ë¡œ êµì²´ -->
        <header class="profile-header">
            <div class="profile-header__content">
                <div class="profile-header__avatar" onclick="changeAvatar()" id="userAvatar">U</div>
                <div class="profile-header__details">
                    <h1 class="profile-header__name" id="userName">ì‚¬ìš©ì</h1>
                    <p class="profile-header__status" id="userStatus">One AI ì‚¬ìš©ì</p>
                    <div class="profile-header__badges" id="userBadges">
                        <!-- ë™ì ìœ¼ë¡œ ìƒì„± -->
                    </div>
                    <div class="profile-header__stats" id="userStats">
                        <!-- ë™ì ìœ¼ë¡œ ìƒì„± -->
                    </div>
                </div>
            </div>
        </header>

        <!-- Subscription Card Component -->
        <!-- ê¸°ì¡´ í•˜ë“œì½”ë”©ëœ êµ¬ë… ì¹´ë“œë¥¼ ì´ê²ƒìœ¼ë¡œ êµì²´ -->
        <div class="subscription-card" id="subscriptionCard">
            <!-- ë™ì ìœ¼ë¡œ ìƒì„± -->
        </div>

        <!-- Stats Grid Component -->
        <!-- ê¸°ì¡´ í•˜ë“œì½”ë”©ëœ í†µê³„ë¥¼ ì´ê²ƒìœ¼ë¡œ êµì²´ -->
        <section class="stats-grid" id="statsGrid">
            <!-- ë™ì ìœ¼ë¡œ ìƒì„± -->
        </section>

        <!-- Usage Chart Section -->
        <section class="section">
            <h2 class="section__title">ğŸ“Š AI ì‚¬ìš©ëŸ‰ ë¶„ì„</h2>
            <div class="usage-chart">
                <div class="usage-chart__header">
                    <div class="usage-chart__title">ì£¼ê°„ ì‚¬ìš©ëŸ‰</div>
                    <div class="usage-chart__period">ìµœê·¼ 7ì¼</div>
                </div>
                <div class="usage-chart__bars">
                    <div class="usage-chart__bar" style="height: 60%" title="ì›”ìš”ì¼: 42íšŒ"></div>
                    <div class="usage-chart__bar" style="height: 80%" title="í™”ìš”ì¼: 56íšŒ"></div>
                    <div class="usage-chart__bar" style="height: 45%" title="ìˆ˜ìš”ì¼: 32íšŒ"></div>
                    <div class="usage-chart__bar" style="height: 90%" title="ëª©ìš”ì¼: 63íšŒ"></div>
                    <div class="usage-chart__bar" style="height: 70%" title="ê¸ˆìš”ì¼: 49íšŒ"></div>
                    <div class="usage-chart__bar" style="height: 30%" title="í† ìš”ì¼: 21íšŒ"></div>
                    <div class="usage-chart__bar" style="height: 40%" title="ì¼ìš”ì¼: 28íšŒ"></div>
                </div>
                <div class="usage-chart__labels">
                    <div class="usage-chart__label">ì›”</div>
                    <div class="usage-chart__label">í™”</div>
                    <div class="usage-chart__label">ìˆ˜</div>
                    <div class="usage-chart__label">ëª©</div>
                    <div class="usage-chart__label">ê¸ˆ</div>
                    <div class="usage-chart__label">í† </div>
                    <div class="usage-chart__label">ì¼</div>
                </div>
            </div>
        </section>

        <!-- Developer Tools Section -->
        <section class="section">
            <h2 class="section__title">ğŸ› ï¸ ê°œë°œì ë„êµ¬</h2>
            <div class="developer-tools">
                <div class="tool-item">
                    <div class="tool-item__info">
                        <div class="tool-item__title">í”„ë¡œì íŠ¸ íŒŒì¼</div>
                        <div class="tool-item__description">ê°œë°œ ì¤‘ì¸ íŒŒì¼ë“¤ì— ë°”ë¡œ ì ‘ê·¼</div>
                    </div>
                    <div class="tool-item__files">
                        <a href="index.html" class="file-link" target="_blank">
                            <span class="file-icon">ğŸ </span>
                            <span class="file-name">index.html</span>
                        </a>
                        <a href="profile.html" class="file-link" target="_blank">
                            <span class="file-icon">ğŸ‘¤</span>
                            <span class="file-name">profile.html</span>
                        </a>
                        <a href="community.html" class="file-link" target="_blank">
                            <span class="file-icon">ğŸ’¬</span>
                            <span class="file-name">community.html</span>
                        </a>
                        <a href="sharing.html" class="file-link" target="_blank">
                            <span class="file-icon">ğŸ¤</span>
                            <span class="file-name">sharing.html</span>
                        </a>
                        <a href="healthcare.html" class="file-link" target="_blank">
                            <span class="file-icon">ğŸ¥</span>
                            <span class="file-name">healthcare.html</span>
                        </a>
                        <a href="business.html" class="file-link" target="_blank">
                            <span class="file-icon">ğŸ’¼</span>
                            <span class="file-name">business.html</span>
                        </a>
                        <a href="login.html" class="file-link" target="_blank">
                            <span class="file-icon">ğŸ”</span>
                            <span class="file-name">login.html</span>
                        </a>
                        <a href="debug.html" class="file-link" target="_blank">
                            <span class="file-icon">ğŸ›</span>
                            <span class="file-name">debug.html</span>
                        </a>
                    </div>
                </div>
                <div class="tool-item">
                    <div class="tool-item__info">
                        <div class="tool-item__title">ê°œë°œ ë¦¬ì†ŒìŠ¤</div>
                        <div class="tool-item__description">ìŠ¤íƒ€ì¼ì‹œíŠ¸ ë° ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼</div>
                    </div>
                    <div class="tool-item__files">
                        <a href="styles.css" class="file-link" target="_blank">
                            <span class="file-icon">ğŸ¨</span>
                            <span class="file-name">styles.css</span>
                        </a>
                        <a href="script.js" class="file-link" target="_blank">
                            <span class="file-icon">âš¡</span>
                            <span class="file-name">script.js</span>
                        </a>
                        <a href="api.js" class="file-link" target="_blank">
                            <span class="file-icon">ğŸ”—</span>
                            <span class="file-name">api.js</span>
                        </a>
                        <a href="assets/lang.js" class="file-link" target="_blank">
                            <span class="file-icon">ğŸŒ</span>
                            <span class="file-name">lang.js</span>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Account Settings Section -->
        <section class="section">
            <h2 class="section__title">ğŸ‘¤ ê³„ì • ì •ë³´</h2>
            <div class="setting-item">
                <div class="setting-item__info">
                    <div class="setting-item__title">ì´ë©”ì¼ ì£¼ì†Œ</div>
                    <div class="setting-item__description">user@example.com</div>
                </div>
                <button class="edit-btn edit-btn--outline" onclick="showModal('emailModal')">ë³€ê²½</button>
            </div>
            <div class="setting-item">
                <div class="setting-item__info">
                    <div class="setting-item__title">ë¹„ë°€ë²ˆí˜¸</div>
                    <div class="setting-item__description">ë§ˆì§€ë§‰ ë³€ê²½: 2024ë…„ 1ì›”</div>
                </div>
                <button class="edit-btn edit-btn--outline" onclick="showModal('passwordModal')">ë³€ê²½</button>
            </div>
            <div class="setting-item">
                <div class="setting-item__info">
                    <div class="setting-item__title">ì–¸ì–´ ì„¤ì •</div>
                    <div class="setting-item__description">í•œêµ­ì–´</div>
                </div>
                <button class="edit-btn edit-btn--outline" onclick="showModal('languageModal')">ë³€ê²½</button>
            </div>
        </section>

        <!-- Environment Settings Section -->
        <section class="section">
            <h2 class="section__title">âš™ï¸ í™˜ê²½ ì„¤ì •</h2>
            <div class="setting-item">
                <div class="setting-item__info">
                    <div class="setting-item__title">ì•Œë¦¼ ì„¤ì •</div>
                    <div class="setting-item__description">ìƒˆë¡œìš´ ê¸°ëŠ¥ê³¼ ì—…ë°ì´íŠ¸ ì•Œë¦¼ ë°›ê¸°</div>
                    <div class="notification-status" id="notificationStatus">
                        <div class="notification-status__indicator"></div>
                        <span>ì•Œë¦¼ í™œì„±í™”ë¨</span>
                    </div>
                </div>
                <div class="toggle-switch toggle-switch--active" onclick="toggleNotifications(this)" id="notificationToggle"></div>
            </div>
        </section>

        <!-- Recent Activity Section -->
        <section class="section">
            <h2 class="section__title">ğŸ•’ ìµœê·¼ í™œë™</h2>
            <ul class="activity-feed">
                <li class="activity-item">
                    <div class="activity-item__icon activity-item__icon--ai">G</div>
                    <div class="activity-item__content">
                        <div class="activity-item__title">ChatGPTë¡œ ì½”ë”© ë¬¸ì œ í•´ê²°</div>
                        <div class="activity-item__time">2ë¶„ ì „</div>
                    </div>
                </li>
                <li class="activity-item">
                    <div class="activity-item__icon activity-item__icon--ai" style="background: linear-gradient(135deg, #000, #333);">M</div>
                    <div class="activity-item__content">
                        <div class="activity-item__title">Midjourneyë¡œ ë¡œê³  ë””ìì¸ ìƒì„±</div>
                        <div class="activity-item__time">15ë¶„ ì „</div>
                    </div>
                </li>
                <li class="activity-item">
                    <div class="activity-item__icon activity-item__icon--share">ğŸ¤</div>
                    <div class="activity-item__content">
                        <div class="activity-item__title">ChatGPT Plus ì‰ì–´ë§ ì°¸ì—¬</div>
                        <div class="activity-item__time">1ì‹œê°„ ì „</div>
                    </div>
                </li>
                <li class="activity-item">
                    <div class="activity-item__icon activity-item__icon--ai" style="background: linear-gradient(135deg, #ff6b35, #f7931e);">C</div>
                    <div class="activity-item__content">
                        <div class="activity-item__title">Claudeë¡œ ë¬¸ì„œ ìš”ì•½ ì‘ì—…</div>
                        <div class="activity-item__time">2ì‹œê°„ ì „</div>
                    </div>
                </li>
                <li class="activity-item">
                    <div class="activity-item__icon activity-item__icon--setting">âš™ï¸</div>
                    <div class="activity-item__content">
                        <div class="activity-item__title">í”„ë¡œí•„ ì„¤ì • ì—…ë°ì´íŠ¸</div>
                        <div class="activity-item__time">ì–´ì œ</div>
                    </div>
                </li>
                <li class="activity-item">
                    <div class="activity-item__icon activity-item__icon--ai" style="background: linear-gradient(135deg, #20c997, #17a2b8);">âŸ</div>
                    <div class="activity-item__content">
                        <div class="activity-item__title">Perplexityë¡œ ìµœì‹  ë‰´ìŠ¤ ê²€ìƒ‰</div>
                        <div class="activity-item__time">2ì¼ ì „</div>
                    </div>
                </li>
            </ul>
        </section>
    </div>

    <!-- Email Change Modal -->
    <div id="emailModal" class="modal">
        <div class="modal__content">
            <div class="modal__header">
                <h2 class="modal__title">ì´ë©”ì¼ ì£¼ì†Œ ë³€ê²½</h2>
                <button class="modal__close" onclick="hideModal('emailModal')">&times;</button>
            </div>
            <form id="emailForm">
                <div class="form-group">
                    <label class="form-label">í˜„ì¬ ì´ë©”ì¼</label>
                    <input type="email" class="form-input" value="user@example.com" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">ìƒˆ ì´ë©”ì¼</label>
                    <input type="email" class="form-input" placeholder="ìƒˆ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
                </div>
                <div class="form-group">
                    <label class="form-label">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
                    <input type="password" class="form-input" placeholder="í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
                </div>
            </form>
            <div class="modal__actions">
                <button class="modal__btn modal__btn--cancel" onclick="hideModal('emailModal')">ì·¨ì†Œ</button>
                <button class="modal__btn modal__btn--primary" onclick="changeEmail()">ë³€ê²½</button>
            </div>
        </div>
    </div>

    <!-- Password Change Modal -->
    <div id="passwordModal" class="modal">
        <div class="modal__content">
            <div class="modal__header">
                <h2 class="modal__title">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</h2>
                <button class="modal__close" onclick="hideModal('passwordModal')">&times;</button>
            </div>
            <form id="passwordForm">
                <div class="form-group">
                    <label class="form-label">í˜„ì¬ ë¹„ë°€ë²ˆí˜¸</label>
                    <input type="password" class="form-input" placeholder="í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
                </div>
                <div class="form-group">
                    <label class="form-label">ìƒˆ ë¹„ë°€ë²ˆí˜¸</label>
                    <input type="password" class="form-input" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
                </div>
                <div class="form-group">
                    <label class="form-label">ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
                    <input type="password" class="form-input" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”" required>
                </div>
            </form>
            <div class="modal__actions">
                <button class="modal__btn modal__btn--cancel" onclick="hideModal('passwordModal')">ì·¨ì†Œ</button>
                <button class="modal__btn modal__btn--primary" onclick="changePassword()">ë³€ê²½</button>
            </div>
        </div>
    </div>

    <!-- Language Setting Modal -->
    <div id="languageModal" class="modal">
        <div class="modal__content">
            <div class="modal__header">
                <h2 class="modal__title">ì–¸ì–´ ì„¤ì •</h2>
                <button class="modal__close" onclick="hideModal('languageModal')">&times;</button>
            </div>
            <form id="languageForm">
                <div class="form-group">
                    <label class="form-label">ì–¸ì–´ ì„ íƒ</label>
                    <select class="form-select" required>
                        <option value="ko" selected>í•œêµ­ì–´</option>
                        <option value="en">English</option>
                        <option value="ja">æ—¥æœ¬èª</option>
                        <option value="zh">ä¸­æ–‡</option>
                        <option value="es">EspaÃ±ol</option>
                    </select>
                </div>
            </form>
            <div class="modal__actions">
                <button class="modal__btn modal__btn--cancel" onclick="hideModal('languageModal')">ì·¨ì†Œ</button>
                <button class="modal__btn modal__btn--primary" onclick="changeLanguage()">ì ìš©</button>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal">
        <div class="modal__content">
            <div class="modal__header">
                <h2 class="modal__title">ì™„ë£Œ</h2>
                <button class="modal__close" onclick="hideModal('successModal')">&times;</button>
            </div>
            <div class="message--success">
                <h3 style="margin-bottom: 8px;">âœ… ì„±ê³µ</h3>
                <p id="successMessage">ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.</p>
            </div>
            <div class="modal__actions">
                <button class="modal__btn modal__btn--primary" onclick="hideModal('successModal')">í™•ì¸</button>
            </div>
        </div>
    </div>

    <!-- Error Modal -->
    <div id="errorModal" class="modal">
        <div class="modal__content">
            <div class="modal__header">
                <h2 class="modal__title">ì˜¤ë¥˜</h2>
                <button class="modal__close" onclick="hideModal('errorModal')">&times;</button>
            </div>
            <div class="message--error">
                <h3 style="margin-bottom: 8px;">âŒ ì˜¤ë¥˜ ë°œìƒ</h3>
                <p id="errorMessage">ì‘ì—…ì„ ì™„ë£Œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
            </div>
            <div class="modal__actions">
                <button class="modal__btn modal__btn--primary" onclick="hideModal('errorModal')">í™•ì¸</button>
            </div>
        </div>
    </div>

    <script>
        // Global state management
        let userSettings = {
            notifications: true,
            language: 'ko'
        };

        let currentLanguage = 'ko';
        // ê¸°ì¡´ì˜ isLoggedIn ì„ ì–¸ ì œê±°í•˜ê³  ì´ê²ƒìœ¼ë¡œ êµì²´
        let isLoggedIn = false;

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë¡œê·¸ì¸ ìƒíƒœ ì´ˆê¸°í™”
        function initializeLoginStatus() {
            if (window.OneAIAuth && window.OneAIAuth.isAuthenticated()) {
                isLoggedIn = true;
            } else {
                const token = localStorage.getItem('oneai_token') || sessionStorage.getItem('oneai_token');
                const status = localStorage.getItem('isLoggedIn') === 'true';
                isLoggedIn = !!(token && status);
            }
            console.log('Login status initialized:', isLoggedIn);
        }

        // ì¦‰ì‹œ ì´ˆê¸°í™”
        initializeLoginStatus();

        // 5. ì•ˆì „í•œ í•¨ìˆ˜ í˜¸ì¶œì„ ìœ„í•œ í—¬í¼ í•¨ìˆ˜
        function safeCallFunction(funcName, ...args) {
            if (typeof window[funcName] === 'function') {
                return window[funcName](...args);
            } else {
                console.warn(`Function ${funcName} is not defined`);
                return null;
            }
        }

        // 6. OneAI ëª¨ë“ˆ í™•ì¸ í•¨ìˆ˜
        function checkOneAIAvailability() {
            return {
                oneAI: !!(window.OneAI && typeof window.OneAI.initModule === 'function'),
                oneAIAuth: !!(window.OneAIAuth && typeof window.OneAIAuth.requireAuth === 'function'),
                initialized: !!(window.OneAIAuth && window.OneAIAuth.initialized)
            };
        }

        // ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ í•¨ìˆ˜
        function checkLoginStatus() {
            // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì„¸ì…˜, í† í°, ì¿ í‚¤ ë“±ì„ í™•ì¸
            const token = localStorage.getItem('authToken') || sessionStorage.getItem('authToken');
            const isAuthenticated = localStorage.getItem('isLoggedIn') === 'true';
            
            // í† í°ì´ë‚˜ ì¸ì¦ ìƒíƒœê°€ ì—†ìœ¼ë©´ false ë°˜í™˜
            return token && isAuthenticated;
        }

        // ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¥¸ í˜ì´ì§€ ì ‘ê·¼ ì œì–´
        function checkAuthAndRedirect() {
            if (!isLoggedIn) {
                // í˜„ì¬ URLì„ ì €ì¥í•´ì„œ ë¡œê·¸ì¸ í›„ ëŒì•„ì˜¬ ìˆ˜ ìˆë„ë¡ í•¨
                localStorage.setItem('returnUrl', window.location.href);
                
                // ë¡œë”© ìŠ¤í”¼ë„ˆ í‘œì‹œ
                showLoading();
                
                // ì ì‹œ í›„ ë¦¬ë‹¤ì´ë ‰íŠ¸ (UX ê°œì„ )
                setTimeout(() => {
                    window.location.href = 'login.html';
                }, 1000);
                
                return false;
            }
            return true;
        }

        // ë¡œë”© ìƒíƒœ ê´€ë¦¬ ê°œì„ 
        let loadingCount = 0;

        function showLoading() {
            loadingCount++;
            const spinner = document.getElementById('loadingSpinner');
            if (spinner) {
                spinner.classList.add('loading-spinner--show');
            }
            console.log('Loading shown, count:', loadingCount);
        }

        function hideLoading() {
            loadingCount = Math.max(0, loadingCount - 1);
            
            // ëª¨ë“  ë¡œë”©ì´ ì™„ë£Œë˜ì—ˆì„ ë•Œë§Œ ìˆ¨ê¸°ê¸°
            if (loadingCount === 0) {
                const spinner = document.getElementById('loadingSpinner');
                if (spinner) {
                    spinner.classList.remove('loading-spinner--show');
                }
                console.log('Loading hidden');
            } else {
                console.log('Loading still active, count:', loadingCount);
            }
        }

        // ê°•ì œë¡œ ë¡œë”© ìˆ¨ê¸°ê¸° (ê¸´ê¸‰ì‹œ ì‚¬ìš©)
        function forceHideLoading() {
            loadingCount = 0;
            const spinner = document.getElementById('loadingSpinner');
            if (spinner) {
                spinner.classList.remove('loading-spinner--show');
            }
            console.log('Loading force hidden');
        }

        // Auth functions
        function logout() {
            if (confirm('ì •ë§ ë¡œê·¸ì•„ì›ƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                // ë¡œë”© ìŠ¤í”¼ë„ˆ í‘œì‹œ
                showLoading();
                
                // OneAIAuth ì‚¬ìš© ê°€ëŠ¥í•˜ë©´ OneAI ë°©ì‹ìœ¼ë¡œ, ì•„ë‹ˆë©´ ì¼ë°˜ ë°©ì‹ìœ¼ë¡œ
                if (window.OneAIAuth && typeof window.OneAIAuth.logout === 'function') {
                    window.OneAIAuth.logout();
                } else {
                    // ì¼ë°˜ ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
                    localStorage.removeItem('authToken');
                    sessionStorage.removeItem('authToken');
                    localStorage.removeItem('isLoggedIn');
                    localStorage.removeItem('userInfo');
                    localStorage.removeItem('returnUrl');
                    
                    setTimeout(() => {
                        window.location.href = 'login.html';
                    }, 1000);
                }
            }
        }

        // UI ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤
        function updateAuthUI() {
            const authButton = document.getElementById('authButton');
            if (isLoggedIn) {
                authButton.textContent = 'ë¡œê·¸ì•„ì›ƒ';
                authButton.classList.add('btn--primary');
            } else {
                // ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ê²½ìš° ì´ë¯¸ ë¦¬ë‹¤ì´ë ‰íŠ¸ë˜ë¯€ë¡œ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
                window.location.href = 'login.html';
            }
        }

        function showLoggedInContent() {
            // ë§ˆì´í˜ì´ì§€ ì½˜í…ì¸ ëŠ” ì´ë¯¸ HTMLì— ìˆìœ¼ë¯€ë¡œ ë³„ë„ ì²˜ë¦¬ ë¶ˆí•„ìš”
            console.log('ë§ˆì´í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
            hideLoading();
        }

        // Language selector functions (ê³„ì • ì •ë³´ ì„¹ì…˜ì—ì„œë§Œ ì‚¬ìš©)
        function selectLanguageFromModal(langCode, langName) {
            // Update global state
            currentLanguage = langCode;
            userSettings.language = langCode;
            
            // Show success message
            showSuccess(`ì–¸ì–´ê°€ ${langName}ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`);
            
            console.log('Language changed to:', langCode, langName);
        }

        // Modal management
        function showModal(modalId) {
            document.getElementById(modalId).classList.add('modal--show');
        }

        function hideModal(modalId) {
            document.getElementById(modalId).classList.remove('modal--show');
        }

        function showSuccess(message) {
            document.getElementById('successMessage').textContent = message;
            showModal('successModal');
        }

        function showError(message) {
            document.getElementById('errorMessage').textContent = message;
            showModal('errorModal');
        }

        // Settings change functions
        function changeEmail() {
            const newEmail = document.querySelector('#emailForm input[type="email"]:not([readonly])').value;
            const password = document.querySelector('#emailForm input[type="password"]').value;
            
            if (!newEmail || !password) {
                showError('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (!newEmail.includes('@')) {
                showError('ì˜¬ë°”ë¥¸ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì—¬ê¸°ì„œ ì„œë²„ì— API í˜¸ì¶œ
            showLoading();
            
            setTimeout(() => {
                hideLoading();
                hideModal('emailModal');
                showSuccess('ì´ë©”ì¼ ì£¼ì†Œê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.');
                document.getElementById('emailForm').reset();
                
                // UI ì—…ë°ì´íŠ¸
                document.querySelector('.setting-item__description').textContent = newEmail;
            }, 1500);
        }

        function changePassword() {
            const currentPassword = document.querySelector('#passwordForm input:nth-of-type(1)').value;
            const newPassword = document.querySelector('#passwordForm input:nth-of-type(2)').value;
            const confirmPassword = document.querySelector('#passwordForm input:nth-of-type(3)').value;
            
            if (!currentPassword || !newPassword || !confirmPassword) {
                showError('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (newPassword.length < 8) {
                showError('ìƒˆ ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                showError('ìƒˆ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return;
            }
            
            // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì—¬ê¸°ì„œ ì„œë²„ì— API í˜¸ì¶œ
            showLoading();
            
            setTimeout(() => {
                hideLoading();
                hideModal('passwordModal');
                showSuccess('ë¹„ë°€ë²ˆí˜¸ê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.');
                document.getElementById('passwordForm').reset();
                
                // UI ì—…ë°ì´íŠ¸
                const now = new Date();
                const formattedDate = `${now.getFullYear()}ë…„ ${now.getMonth() + 1}ì›”`;
                document.querySelector('.setting-item:nth-of-type(2) .setting-item__description').textContent = `ë§ˆì§€ë§‰ ë³€ê²½: ${formattedDate}`;
            }, 1500);
        }

        function changeLanguage() {
            const selectedLanguage = document.querySelector('#languageForm select').value;
            const languageNames = {
                'ko': 'í•œêµ­ì–´',
                'en': 'English', 
                'ja': 'æ—¥æœ¬èª',
                'zh': 'ä¸­æ–‡',
                'es': 'EspaÃ±ol'
            };
            
            // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì—¬ê¸°ì„œ ì„œë²„ì— API í˜¸ì¶œ
            showLoading();
            
            setTimeout(() => {
                hideLoading();
                hideModal('languageModal');
                showSuccess(`ì–¸ì–´ê°€ ${languageNames[selectedLanguage]}ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`);
                
                // UI ì—…ë°ì´íŠ¸
                document.querySelector('.setting-item:nth-of-type(3) .setting-item__description').textContent = languageNames[selectedLanguage];
                
                // ê¸€ë¡œë²Œ ìƒíƒœ ì—…ë°ì´íŠ¸
                currentLanguage = selectedLanguage;
                userSettings.language = selectedLanguage;
            }, 1500);
        }

        // Notification toggle function with actual functionality
        function toggleNotifications(element) {
            const isCurrentlyActive = element.classList.contains('toggle-switch--active');
            
            if (isCurrentlyActive) {
                // Disable notifications
                element.classList.remove('toggle-switch--active');
                userSettings.notifications = false;
                updateNotificationStatus(false);
                
                // Show browser notification permission request simulation
                if ('Notification' in window) {
                    showSuccess('ì•Œë¦¼ì´ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
                }
            } else {
                // Enable notifications
                element.classList.add('toggle-switch--active');
                userSettings.notifications = true;
                updateNotificationStatus(true);
                
                // Request notification permission if supported
                if ('Notification' in window) {
                    if (Notification.permission === 'default') {
                        Notification.requestPermission().then(function(permission) {
                            if (permission === 'granted') {
                                showSuccess('ì•Œë¦¼ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
                                new Notification('One AI', {
                                    body: 'ì•Œë¦¼ì´ ì„±ê³µì ìœ¼ë¡œ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤!',
                                    icon: '/favicon.ico'
                                });
                            } else {
                                showError('ë¸Œë¼ìš°ì €ì—ì„œ ì•Œë¦¼ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”.');
                                element.classList.remove('toggle-switch--active');
                                userSettings.notifications = false;
                                updateNotificationStatus(false);
                            }
                        });
                    } else if (Notification.permission === 'granted') {
                        showSuccess('ì•Œë¦¼ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
                        new Notification('One AI', {
                            body: 'ì•Œë¦¼ì´ ì„±ê³µì ìœ¼ë¡œ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤!',
                            icon: '/favicon.ico'
                        });
                    } else {
                        showError('ë¸Œë¼ìš°ì €ì—ì„œ ì•Œë¦¼ì´ ì°¨ë‹¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì„¤ì •ì—ì„œ í—ˆìš©í•´ì£¼ì„¸ìš”.');
                        element.classList.remove('toggle-switch--active');
                        userSettings.notifications = false;
                        updateNotificationStatus(false);
                    }
                } else {
                    showSuccess('ì•Œë¦¼ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
                }
            }
            
            console.log('Notifications:', userSettings.notifications ? 'Enabled' : 'Disabled');
        }

        function updateNotificationStatus(enabled) {
            const statusElement = document.getElementById('notificationStatus');
            const indicator = statusElement.querySelector('.notification-status__indicator');
            const text = statusElement.querySelector('span');
            
            if (enabled) {
                statusElement.className = 'notification-status notification-status--enabled';
                text.textContent = 'ì•Œë¦¼ í™œì„±í™”ë¨';
            } else {
                statusElement.className = 'notification-status notification-status--disabled';
                text.textContent = 'ì•Œë¦¼ ë¹„í™œì„±í™”ë¨';
            }
        }

        function changeAvatar() {
            const avatars = ['ê¹€', 'ğŸ¤–', 'ğŸ‘¨â€ğŸ’»', 'ğŸ§ ', 'âœ¨', 'ğŸš€', 'ğŸ’¡', 'ğŸ¯'];
            const currentAvatar = document.querySelector('.profile-header__avatar');
            const randomAvatar = avatars[Math.floor(Math.random() * avatars.length)];
            
            currentAvatar.textContent = randomAvatar;
            currentAvatar.style.animation = 'bounce 0.6s ease';
            
            setTimeout(() => {
                currentAvatar.style.animation = '';
            }, 600);
        }

        // Close modal when clicking outside
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('modal--show');
            }
        });

        // ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const activeModal = document.querySelector('.modal--show');
                if (activeModal) {
                    activeModal.classList.remove('modal--show');
                }
            }
        });

        // Animation effects
        function initializeAnimations() {
            // Card animations
            const cards = document.querySelectorAll('.stat-card, .section, .subscription-card');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            entry.target.style.opacity = '1';
                            entry.target.style.transform = 'translateY(0)';
                        }, index * 100);
                    }
                });
            });
            
            cards.forEach(card => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                card.style.transition = 'all 0.6s ease';
                observer.observe(card);
            });

            // Number animation
            const statNumbers = document.querySelectorAll('.stat-card__number, .stat-item__number');
            statNumbers.forEach(stat => {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            animateNumber(entry.target);
                        }
                    });
                });
                observer.observe(stat);
            });

            // Chart bar animation
            const chartBars = document.querySelectorAll('.usage-chart__bar');
            chartBars.forEach((bar, index) => {
                setTimeout(() => {
                    bar.style.transform = 'scaleY(1)';
                }, index * 100);
                bar.style.transform = 'scaleY(0)';
                bar.style.transformOrigin = 'bottom';
                bar.style.transition = 'transform 0.6s ease';
            });
        }

        function animateNumber(element) {
            const finalValue = element.textContent;
            let numericValue = parseFloat(finalValue.replace(/[^\d.]/g, ''));
            
            if (finalValue.includes('K')) {
                numericValue = numericValue * 1000;
            }
            
            let currentValue = 0;
            const increment = numericValue / 30;
            const duration = 1500;
            const stepTime = duration / 30;
            
            const timer = setInterval(() => {
                currentValue += increment;
                if (currentValue >= numericValue) {
                    currentValue = numericValue;
                    clearInterval(timer);
                }
                
                let displayValue = Math.floor(currentValue);
                
                if (finalValue.includes('â‚©') && finalValue.includes('K')) {
                    element.textContent = `â‚©${Math.floor(displayValue / 1000)}K`;
                } else if (finalValue.includes('â‚©')) {
                    element.textContent = `â‚©${displayValue.toLocaleString()}`;
                } else if (finalValue.includes('h')) {
                    element.textContent = `${displayValue}h`;
                } else if (finalValue.includes('.')) {
                    element.textContent = (displayValue / 1000).toFixed(1);
                } else {
                    element.textContent = displayValue.toLocaleString();
                }
            }, stepTime);
        }

        // í˜ì´ì§€ ê°€ì‹œì„± ë³€ê²½ ê°ì§€ (íƒ­ ì „í™˜ ë“±)
        document.addEventListener('visibilitychange', function() {
            if (document.visibilityState === 'visible') {

        // 10. ì¡°ê±´ë¶€ window í•¨ìˆ˜ ë“±ë¡ (OneAI ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ í›„)
        window.addEventListener('load', function() {
            const availability = checkOneAIAvailability();
            console.log('OneAI Availability:', availability);
            
            if (availability.oneAI) {
                console.log('OneAI module available');
                // OneAI ëª¨ë“ˆì´ ìˆìœ¼ë©´ ì´ˆê¸°í™”
                if (typeof window.OneAI.initModule === 'function') {
                    window.OneAI.initModule();
                }
            } else {
                console.log('OneAI module not available, using standard functionality');
            }
        });
                // í˜ì´ì§€ê°€ ë‹¤ì‹œ ë³´ì¼ ë•Œ ë¡œê·¸ì¸ ìƒíƒœ ì¬í™•ì¸
                const currentLoginStatus = checkLoginStatus();
                if (!currentLoginStatus && isLoggedIn) {
                    // ë¡œê·¸ì¸ ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆìœ¼ë©´ ë¦¬ë‹¤ì´ë ‰íŠ¸
                    logout();
                }
            }
        });

        // ì„¸ì…˜ ë§Œë£Œ ì²´í¬ (ì˜µì…˜)
        function checkSessionExpiry() {
            try {
                const token = localStorage.getItem('oneai_token') || sessionStorage.getItem('oneai_token');
                const loginTime = localStorage.getItem('loginTime') || sessionStorage.getItem('loginTime');
                
                if (token && loginTime) {
                    const currentTime = Date.now();
                    const sessionDuration = 24 * 60 * 60 * 1000; // 24ì‹œê°„
                    
                    if (currentTime - parseInt(loginTime) > sessionDuration) {
                        console.log('Session expired, logging out');
                        showError('ì„¸ì…˜ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ ì£¼ì„¸ìš”.');
                        setTimeout(() => {
                            if (window.OneAIAuth) {
                                window.OneAIAuth.logout();
                            } else {
                                // ìˆ˜ë™ ë¡œê·¸ì•„ì›ƒ
                                localStorage.clear();
                                sessionStorage.clear();
                            }
                            window.location.href = 'login.html';
                        }, 2000);
                    }
                }
            } catch (error) {
                console.error('Session check error:', error);
            }
        }

        // ì£¼ê¸°ì ìœ¼ë¡œ ì„¸ì…˜ ì²´í¬ (5ë¶„ë§ˆë‹¤)
        setInterval(checkSessionExpiry, 5 * 60 * 1000);

        // ë¸Œë¼ìš°ì € ë’¤ë¡œê°€ê¸°/ì•ìœ¼ë¡œê°€ê¸° ê°ì§€
        window.addEventListener('popstate', function(event) {
            // ë¡œê·¸ì¸ ìƒíƒœ ì¬í™•ì¸
            if (!checkLoginStatus()) {
                window.location.href = 'login.html';
            }
        });

        // ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ë³€ê²½ ê°ì§€
        window.addEventListener('online', function() {
            console.log('ë„¤íŠ¸ì›Œí¬ê°€ ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.');
            // í•„ìš”ì‹œ ë°ì´í„° ë™ê¸°í™”
        });

        window.addEventListener('offline', function() {
            console.log('ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤.');
            showError('ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•´ ì£¼ì„¸ìš”.');
        });

        // 7. ì‚¬ìš©ì ë°ì´í„° ë¡œë“œ í•¨ìˆ˜ (OneAI ì—†ì´ë„ ë™ì‘)
        function loadUserData() {
            const userInfo = localStorage.getItem('userInfo');
            if (userInfo) {
                try {
                    const userData = JSON.parse(userInfo);
                    updateProfileWithUserData(userData);
                    
                    // ëª¨ë“ˆ ë¡œë“œ ì™„ë£Œ ë©”ì‹œì§€ ìˆ¨ê¸°ê¸°
                    const loadingMessage = document.querySelector('.module-loading');
                    if (loadingMessage) {
                        loadingMessage.style.display = 'none';
                    }
                    
                    // ì‹¤ì œ í”„ë¡œí•„ ì½˜í…ì¸  í‘œì‹œ
                    const profileContent = document.querySelector('.profile-content');
                    if (profileContent) {
                        profileContent.style.display = 'block';
                    }
                    
                } catch (e) {
                    console.error('ì‚¬ìš©ì ì •ë³´ íŒŒì‹± ì˜¤ë¥˜:', e);
                    showError('ì‚¬ìš©ì ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } else {
                console.log('No user info found in localStorage');
                // ê¸°ë³¸ê°’ìœ¼ë¡œ UI ì—…ë°ì´íŠ¸
                updateProfileWithUserData({
                    username: 'ì‚¬ìš©ì',
                    email: 'user@example.com'
                });
            }
        }

        // ì‹¤ì œ êµ¬í˜„ì‹œ ì‚¬ìš©í•  API í˜¸ì¶œ í•¨ìˆ˜ë“¤
        async function apiCall(endpoint, method = 'GET', data = null) {
            const token = localStorage.getItem('authToken');
            
            const options = {
                method: method,
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                }
            };
            
            if (data) {
                options.body = JSON.stringify(data);
            }
            
            try {
                const response = await fetch(endpoint, options);
                
                if (response.status === 401) {
                    // ì¸ì¦ ì˜¤ë¥˜ì‹œ ë¡œê·¸ì•„ì›ƒ
                    logout();
                    return null;
                }
                
                if (!response.ok) {
                    throw new Error(`API ì˜¤ë¥˜: ${response.status}`);
                }
                
                return await response.json();
            } catch (error) {
                console.error('API í˜¸ì¶œ ì˜¤ë¥˜:', error);
                showError('ì„œë²„ì™€ì˜ í†µì‹ ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                return null;
            }
        }

        // ì‹¤ì œ êµ¬í˜„ì‹œ ì‚¬ìš©í•  ë°ì´í„° ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤
        async function updateEmailAPI(newEmail, password) {
            return await apiCall('/api/user/email', 'PUT', { 
                email: newEmail, 
                password: password 
            });
        }

        async function updatePasswordAPI(currentPassword, newPassword) {
            return await apiCall('/api/user/password', 'PUT', { 
                currentPassword: currentPassword, 
                newPassword: newPassword 
            });
        }

        async function updateLanguageAPI(language) {
            return await apiCall('/api/user/language', 'PUT', { 
                language: language 
            });
        }

        async function updateNotificationAPI(enabled) {
            return await apiCall('/api/user/notifications', 'PUT', { 
                enabled: enabled 
            });
        }

        // ===== í”„ë¡œí•„ ë°ì´í„° ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤ =====
        
        // 1. ì‚¬ìš©ì í”„ë¡œí•„ ì˜ì—­ ì—…ë°ì´íŠ¸ (ì œëª©: "ì‚¬ìš©ì ì •ë³´" í•˜ë“œì½”ë”©)
        function updateUserProfile(userData) {
            // ì‚¬ìš©ìëª… ì—…ë°ì´íŠ¸
            const userName = document.querySelector('.profile-header__name');
            if (userName) {
                userName.textContent = userData.username || 'ì‚¬ìš©ì';
            }
            
            // ì•„ë°”íƒ€ ì´ˆê¸°ê°’ ì—…ë°ì´íŠ¸
            const userAvatar = document.querySelector('.profile-header__avatar');
            if (userAvatar) {
                const initial = (userData.username || userData.email || 'U')[0].toUpperCase();
                userAvatar.textContent = initial;
            }
            
            // ìƒíƒœ ì—…ë°ì´íŠ¸ (ê°€ì…ì¼ í¬í•¨)
            const userStatus = document.querySelector('.profile-header__status');
            if (userStatus) {
                const joinDate = userData.created_at ? 
                    new Date(userData.created_at).toLocaleDateString('ko-KR') : '-';
                const plan = userData.subscription?.type || userData.plan || 'Free';
                userStatus.textContent = `One AI ${plan} ì‚¬ìš©ì Â· ê°€ì…ì¼: ${joinDate}`;
            }
            
            // ë°°ì§€ ì—…ë°ì´íŠ¸
            updateUserBadges(userData);
            
            // í—¤ë” í†µê³„ ì—…ë°ì´íŠ¸
            updateHeaderStats(userData.stats || {});
        }

        // 2. ì‚¬ìš©ì ë°°ì§€ ì—…ë°ì´íŠ¸
        function updateUserBadges(userData) {
            const badgesContainer = document.querySelector('.profile-header__badges');
            if (!badgesContainer) return;
            
            badgesContainer.innerHTML = '';
            
            // êµ¬ë… ë°°ì§€
            const subscriptionType = userData.subscription?.type || userData.plan;
            if (subscriptionType && subscriptionType !== 'Free') {
                if (subscriptionType === 'Pro') {
                    badgesContainer.innerHTML += '<span class="badge badge--pro">Pro ë©¤ë²„</span>';
                } else if (subscriptionType === 'Premium') {
                    badgesContainer.innerHTML += '<span class="badge badge--premium">í”„ë¦¬ë¯¸ì—„</span>';
                }
            }
            
            // ì¸ì¦ ë°°ì§€
            if (userData.verified || userData.email_verified) {
                badgesContainer.innerHTML += '<span class="badge badge--verified">ì¸ì¦ë¨</span>';
            }
            
            // ê°œë°œì ë°°ì§€
            if (userData.role === 'developer') {
                badgesContainer.innerHTML += '<span class="badge badge--developer">ê°œë°œì</span>';
            }
            
            // ê¸°ë³¸ ë°°ì§€ (ë°°ì§€ê°€ ì—†ëŠ” ê²½ìš°)
            if (badgesContainer.innerHTML.trim() === '') {
                badgesContainer.innerHTML = '<span class="badge badge--user">ì¼ë°˜ ì‚¬ìš©ì</span>';
            }
        }

        // 3. í—¤ë” í†µê³„ ì—…ë°ì´íŠ¸ (ë¼ë²¨ í•˜ë“œì½”ë”©)
        function updateHeaderStats(statsData) {
            const userStats = document.querySelector('.profile-header__stats');
            if (!userStats) return;
            
            userStats.innerHTML = `
                <div class="stat-item">
                    <div class="stat-item__number">${statsData.consecutive_days || '-'}</div>
                    <div class="stat-item__label">ì—°ì† ì‚¬ìš©ì¼</div>
                </div>
                <div class="stat-item">
                    <div class="stat-item__number">${statsData.total_conversations ? statsData.total_conversations.toLocaleString() : '-'}</div>
                    <div class="stat-item__label">ì´ ëŒ€í™” ìˆ˜</div>
                </div>
                <div class="stat-item">
                    <div class="stat-item__number">${statsData.saved_items || '-'}</div>
                    <div class="stat-item__label">ì €ì¥ëœ í•­ëª©</div>
                </div>
                <div class="stat-item">
                    <div class="stat-item__number">${statsData.satisfaction_rating ? statsData.satisfaction_rating.toFixed(1) : '-'}</div>
                    <div class="stat-item__label">ë§Œì¡±ë„</div>
                </div>
            `;
        }

        // 4. êµ¬ë… ì •ë³´ ì—…ë°ì´íŠ¸ (ë¼ë²¨ í•˜ë“œì½”ë”©)
        function updateSubscriptionInfo(subscriptionData) {
            const subscriptionCard = document.querySelector('.subscription-card');
            if (!subscriptionCard) return;
            
            const planType = subscriptionData.type || 'Free';
            const status = subscriptionData.status || 'active';
            const price = subscriptionData.price || 0;
            const nextBilling = subscriptionData.next_billing_date;
            const usageLimit = subscriptionData.usage_limit;
            const sessions = subscriptionData.concurrent_sessions || 1;
            
            // ê°€ê²© í‘œì‹œ
            const priceDisplay = price > 0 ? `â‚©${price.toLocaleString()}` : 'ë¬´ë£Œ';
            
            // ë‹¤ìŒ ê²°ì œì¼ í‘œì‹œ
            const nextBillingDisplay = nextBilling ? 
                new Date(nextBilling).toLocaleDateString('ko-KR') : 
                (price === 0 ? 'í•´ë‹¹ì—†ìŒ' : '-');
            
            // ì‚¬ìš©ëŸ‰ í‘œì‹œ
            const usageDisplay = usageLimit === 'unlimited' ? 'ë¬´ì œí•œ' : (usageLimit || '-');
            
            // ìƒíƒœ í‘œì‹œ
            const statusDisplay = {
                'active': 'í™œì„±',
                'inactive': 'ë¹„í™œì„±', 
                'cancelled': 'ì·¨ì†Œë¨',
                'expired': 'ë§Œë£Œë¨'
            }[status] || '-';
            
            subscriptionCard.innerHTML = `
                <div class="subscription-card__header">
                    <h2 class="subscription-card__title">One AI ${planType}</h2>
                    <div class="subscription-card__badge ${status === 'active' ? '' : 'badge--inactive'}">${statusDisplay}</div>
                </div>
                <div class="subscription-card__details">
                    <div class="subscription-detail">
                        <div class="subscription-detail__value">${priceDisplay}</div>
                        <div class="subscription-detail__label">ì›” êµ¬ë…ë£Œ</div>
                    </div>
                    <div class="subscription-detail">
                        <div class="subscription-detail__value">${nextBillingDisplay}</div>
                        <div class="subscription-detail__label">ë‹¤ìŒ ê²°ì œì¼</div>
                    </div>
                    <div class="subscription-detail">
                        <div class="subscription-detail__value">${usageDisplay}</div>
                        <div class="subscription-detail__label">AI ì‚¬ìš©ëŸ‰</div>
                    </div>
                    <div class="subscription-detail">
                        <div class="subscription-detail__value">${sessions}ê°œ</div>
                        <div class="subscription-detail__label">ë™ì‹œ ì„¸ì…˜</div>
                    </div>
                </div>
            `;
        }

        // 5. ì‚¬ìš© í†µê³„ ê·¸ë¦¬ë“œ ì—…ë°ì´íŠ¸ (ì œëª©ê³¼ ë¼ë²¨ í•˜ë“œì½”ë”©)
        function updateStatsGrid(statsData) {
            const statsGrid = document.querySelector('.stats-grid');
            if (!statsGrid) return;
            
            const monthlyConversations = statsData.monthly_conversations || 0;
            const totalHours = statsData.total_usage_hours || 0;
            const costSavings = statsData.cost_savings || 0;
            const favoritePrompts = statsData.favorite_prompts || 0;
            
            // ê³„ì‚°ëœ ê°’ë“¤
            const monthlyGrowth = monthlyConversations > 0 ? Math.floor(Math.random() * 30) + 10 : 0;
            const dailyAverage = totalHours > 0 ? (totalHours / 30).toFixed(1) : 0;
            const savingsDisplay = costSavings > 0 ? `â‚©${Math.floor(costSavings / 1000)}K` : '-';
            
            statsGrid.innerHTML = `
                <div class="stat-card">
                    <div class="stat-card__number">${monthlyConversations || '-'}</div>
                    <div class="stat-card__label">ì´ë²ˆ ë‹¬ AI ëŒ€í™”</div>
                    <div class="stat-card__description">${monthlyGrowth ? `ì§€ë‚œ ë‹¬ ëŒ€ë¹„ +${monthlyGrowth}%` : 'ë°ì´í„° ì—†ìŒ'}</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card__number">${totalHours ? totalHours + 'h' : '-'}</div>
                    <div class="stat-card__label">ì´ ì‚¬ìš© ì‹œê°„</div>
                    <div class="stat-card__description">${dailyAverage ? `í‰ê·  ${dailyAverage}h/ì¼` : 'ë°ì´í„° ì—†ìŒ'}</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card__number">${savingsDisplay}</div>
                    <div class="stat-card__label">ëˆ„ì  ì ˆì•½ ê¸ˆì•¡</div>
                    <div class="stat-card__description">${costSavings > 0 ? 'ì‰ì–´ë§ í†µí•´ ì ˆì•½' : 'ë°ì´í„° ì—†ìŒ'}</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card__number">${favoritePrompts || '-'}</div>
                    <div class="stat-card__label">ì¦ê²¨ì°¾ëŠ” í”„ë¡¬í”„íŠ¸</div>
                    <div class="stat-card__description">${favoritePrompts > 0 ? 'ìì£¼ ì‚¬ìš©í•˜ëŠ” í…œí”Œë¦¿' : 'ë°ì´í„° ì—†ìŒ'}</div>
                </div>
            `;
        }

        // 6. ì£¼ê°„ ì‚¬ìš©ëŸ‰ ì°¨íŠ¸ ì—…ë°ì´íŠ¸ (ì œëª©ê³¼ ìš”ì¼ í•˜ë“œì½”ë”©)
        function updateWeeklyUsageChart(weeklyData) {
            const chartBars = document.querySelectorAll('.usage-chart__bar');
            const days = ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'];
            
            if (weeklyData && weeklyData.length === 7) {
                chartBars.forEach((bar, index) => {
                    const usage = weeklyData[index] || 0;
                    const maxUsage = Math.max(...weeklyData);
                    const height = maxUsage > 0 ? (usage / maxUsage) * 100 : 10;
                    
                    bar.style.height = `${height}%`;
                    bar.title = `${days[index]}ìš”ì¼: ${usage}íšŒ`;
                });
            }
        }

        // 7. ê³„ì • ì„¤ì • ì •ë³´ ì—…ë°ì´íŠ¸ (ë¼ë²¨ í•˜ë“œì½”ë”©)
        function updateAccountSettings(userData) {
            const settingDescriptions = document.querySelectorAll('.setting-item__description');
            
            if (settingDescriptions.length >= 3) {
                // ì´ë©”ì¼ ì£¼ì†Œ
                settingDescriptions[0].textContent = userData.email || '-';
                
                // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ì¼
                const passwordChangeDate = userData.password_changed_at ? 
                    'ë§ˆì§€ë§‰ ë³€ê²½: ' + new Date(userData.password_changed_at).toLocaleDateString('ko-KR') : 
                    'ë§ˆì§€ë§‰ ë³€ê²½: -';
                settingDescriptions[1].textContent = passwordChangeDate;
                
                // ì–¸ì–´ ì„¤ì •
                const languageNames = {
                    'ko': 'í•œêµ­ì–´',
                    'en': 'English',
                    'ja': 'æ—¥æœ¬èª',
                    'zh': 'ä¸­æ–‡',
                    'es': 'EspaÃ±ol'
                };
                const userLanguage = userData.settings?.language || userData.language || 'ko';
                settingDescriptions[2].textContent = languageNames[userLanguage] || 'í•œêµ­ì–´';
            }
        }

        // 8. ì•Œë¦¼ ì„¤ì • ìƒíƒœ ì—…ë°ì´íŠ¸ (ë¼ë²¨ í•˜ë“œì½”ë”©)
        function updateNotificationSettings(userData) {
            const notificationToggle = document.getElementById('notificationToggle');
            const notificationStatus = document.getElementById('notificationStatus');
            
            if (notificationToggle && notificationStatus) {
                const notificationsEnabled = userData.settings?.notifications ?? userData.notifications_enabled ?? true;
                
                if (notificationsEnabled) {
                    notificationToggle.classList.add('toggle-switch--active');
                    notificationStatus.className = 'notification-status notification-status--enabled';
                    notificationStatus.querySelector('span').textContent = 'ì•Œë¦¼ í™œì„±í™”ë¨';
                } else {
                    notificationToggle.classList.remove('toggle-switch--active');
                    notificationStatus.className = 'notification-status notification-status--disabled';
                    notificationStatus.querySelector('span').textContent = 'ì•Œë¦¼ ë¹„í™œì„±í™”ë¨';
                }
            }
        }

        // 9. ìµœê·¼ í™œë™ ì—…ë°ì´íŠ¸ (ì œëª© í•˜ë“œì½”ë”©)
        function updateRecentActivity(activityData) {
            const activityFeed = document.querySelector('.activity-feed');
            if (!activityFeed) return;
            
            // ê¸°ë³¸ í™œë™ ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ìƒ˜í”Œ ë°ì´í„° ì‚¬ìš©
            const activities = activityData || [
                {
                    type: 'ai_conversation',
                    title: 'AIì™€ ëŒ€í™” ì§„í–‰',
                    time: '2ë¶„ ì „',
                    icon: 'ğŸ¤–'
                },
                {
                    type: 'sharing_join', 
                    title: 'GPT Plus ì‰ì–´ë§ ì°¸ì—¬',
                    time: '1ì‹œê°„ ì „',
                    icon: 'ğŸ¤'
                },
                {
                    type: 'profile_update',
                    title: 'í”„ë¡œí•„ ì„¤ì • ì—…ë°ì´íŠ¸', 
                    time: 'ì–´ì œ',
                    icon: 'âš™ï¸'
                }
            ];
            
            activityFeed.innerHTML = activities.map(activity => `
                <li class="activity-item">
                    <div class="activity-item__icon activity-item__icon--${activity.type}">
                        ${activity.icon}
                    </div>
                    <div class="activity-item__content">
                        <div class="activity-item__title">${activity.title}</div>
                        <div class="activity-item__time">${activity.time}</div>
                    </div>
                </li>
            `).join('');
        }

        // 10. ì „ì²´ í”„ë¡œí•„ ë°ì´í„° ì—…ë°ì´íŠ¸ ë©”ì¸ í•¨ìˆ˜
        function updateAllProfileData(userData) {
            console.log('í”„ë¡œí•„ ë°ì´í„° ì—…ë°ì´íŠ¸ ì‹œì‘:', userData);
            
            // ê° ì„¹ì…˜ë³„ ì—…ë°ì´íŠ¸
            updateUserProfile(userData);
            updateSubscriptionInfo(userData.subscription || {});
            updateStatsGrid(userData.stats || {});
            updateWeeklyUsageChart(userData.weekly_usage);
            updateAccountSettings(userData);
            updateNotificationSettings(userData);
            updateRecentActivity(userData.recent_activity);
            
            console.log('í”„ë¡œí•„ ë°ì´í„° ì—…ë°ì´íŠ¸ ì™„ë£Œ');
        }

        // 11. ìƒ˜í”Œ ë°ì´í„°ë¡œ í…ŒìŠ¤íŠ¸í•˜ëŠ” í•¨ìˆ˜
        function loadSampleData() {
            const sampleData = {
                username: 'ê¹€ê°œë°œì',
                email: 'developer@oneai.com',
                created_at: '2024-01-15',
                verified: true,
                role: 'developer',
                subscription: {
                    type: 'Pro',
                    status: 'active',
                    price: 29000,
                    next_billing_date: '2024-12-15',
                    usage_limit: 'unlimited',
                    concurrent_sessions: 3
                },
                stats: {
                    consecutive_days: 15,
                    total_conversations: 1250,
                    saved_items: 42,
                    satisfaction_rating: 4.8,
                    monthly_conversations: 156,
                    total_usage_hours: 67,
                    cost_savings: 125000,
                    favorite_prompts: 8
                },
                settings: {
                    language: 'ko',
                    notifications: true
                },
                password_changed_at: '2024-10-01',
                weekly_usage: [42, 56, 32, 63, 49, 21, 28],
                recent_activity: [
                    {
                        type: 'ai_conversation',
                        title: 'ChatGPTë¡œ ì½”ë”© ë¬¸ì œ í•´ê²°',
                        time: '2ë¶„ ì „',
                        icon: 'ğŸ¤–'
                    },
                    {
                        type: 'sharing_join',
                        title: 'Claude Pro ì‰ì–´ë§ ì°¸ì—¬', 
                        time: '30ë¶„ ì „',
                        icon: 'ğŸ¤'
                    }
                ]
            };
            
            updateAllProfileData(sampleData);
        }

        // ì‚¬ìš© ì˜ˆì‹œ:
        // loadSampleData(); // ìƒ˜í”Œ ë°ì´í„°ë¡œ í…ŒìŠ¤íŠ¸
        // updateAllProfileData(realUserData); // ì‹¤ì œ ë°ì´í„°ë¡œ ì—…ë°ì´íŠ¸

        // ========================================
        // 1ë‹¨ê³„: ìŠ¤ì¼ˆë ˆí†¤ UI ìƒì„± í•¨ìˆ˜ë“¤ (ë¬´ì¡°ê±´ DOM ìƒì„±, ê¸°ë³¸ê°’ '-')
        // ========================================

        // 1. ì‚¬ìš©ì í”„ë¡œí•„ ìŠ¤ì¼ˆë ˆí†¤ ìƒì„±
        function createUserProfileSkeleton() {
            let profileHeader = document.querySelector('.profile-header');
            if (!profileHeader) {
                profileHeader = document.createElement('header');
                profileHeader.className = 'profile-header';
                document.querySelector('.container')?.appendChild(profileHeader) || document.body.appendChild(profileHeader);
            }
            
            profileHeader.innerHTML = `
                <div class="profile-header__content">
                    <div class="profile-header__avatar" onclick="changeAvatar()" id="userAvatar">-</div>
                    <div class="profile-header__details">
                        <h1 class="profile-header__name" id="userName">-</h1>
                        <p class="profile-header__status" id="userStatus">One AI ì‚¬ìš©ì Â· ê°€ì…ì¼: -</p>
                        <div class="profile-header__badges" id="userBadges">
                            <span class="badge badge--user">-</span>
                        </div>
                        <div class="profile-header__stats" id="userStats">
                            <div class="stat-item">
                                <div class="stat-item__number">-</div>
                                <div class="stat-item__label">ì—°ì† ì‚¬ìš©ì¼</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-item__number">-</div>
                                <div class="stat-item__label">ì´ ëŒ€í™” ìˆ˜</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-item__number">-</div>
                                <div class="stat-item__label">ì €ì¥ëœ í•­ëª©</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-item__number">-</div>
                                <div class="stat-item__label">ë§Œì¡±ë„</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // 2. êµ¬ë… ì •ë³´ ìŠ¤ì¼ˆë ˆí†¤ ìƒì„±
        function createSubscriptionSkeleton() {
            let container = document.querySelector('.container') || document.body;
            
            let subscriptionCard = document.querySelector('.subscription-card');
            if (!subscriptionCard) {
                subscriptionCard = document.createElement('div');
                subscriptionCard.className = 'subscription-card';
                subscriptionCard.id = 'subscriptionCard';
                container.appendChild(subscriptionCard);
            }
            
            subscriptionCard.innerHTML = `
                <div class="subscription-card__header">
                    <h2 class="subscription-card__title">One AI Free</h2>
                    <div class="subscription-card__badge">-</div>
                </div>
                <div class="subscription-card__details">
                    <div class="subscription-detail">
                        <div class="subscription-detail__value">-</div>
                        <div class="subscription-detail__label">ì›” êµ¬ë…ë£Œ</div>
                    </div>
                    <div class="subscription-detail">
                        <div class="subscription-detail__value">-</div>
                        <div class="subscription-detail__label">ë‹¤ìŒ ê²°ì œì¼</div>
                    </div>
                    <div class="subscription-detail">
                        <div class="subscription-detail__value">-</div>
                        <div class="subscription-detail__label">AI ì‚¬ìš©ëŸ‰</div>
                    </div>
                    <div class="subscription-detail">
                        <div class="subscription-detail__value">-</div>
                        <div class="subscription-detail__label">ë™ì‹œ ì„¸ì…˜</div>
                    </div>
                </div>
            `;
        }

        // 3. ì‚¬ìš© í†µê³„ ê·¸ë¦¬ë“œ ìŠ¤ì¼ˆë ˆí†¤ ìƒì„±
        function createStatsGridSkeleton() {
            let container = document.querySelector('.container') || document.body;
            
            let statsGrid = document.querySelector('.stats-grid');
            if (!statsGrid) {
                statsGrid = document.createElement('section');
                statsGrid.className = 'stats-grid';
                statsGrid.id = 'statsGrid';
                container.appendChild(statsGrid);
            }
            
            statsGrid.innerHTML = `
                <div class="stat-card">
                    <div class="stat-card__number">-</div>
                    <div class="stat-card__label">ì´ë²ˆ ë‹¬ AI ëŒ€í™”</div>
                    <div class="stat-card__description">ë°ì´í„° ì—†ìŒ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card__number">-</div>
                    <div class="stat-card__label">ì´ ì‚¬ìš© ì‹œê°„</div>
                    <div class="stat-card__description">ë°ì´í„° ì—†ìŒ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card__number">-</div>
                    <div class="stat-card__label">ëˆ„ì  ì ˆì•½ ê¸ˆì•¡</div>
                    <div class="stat-card__description">ë°ì´í„° ì—†ìŒ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card__number">-</div>
                    <div class="stat-card__label">ì¦ê²¨ì°¾ëŠ” í”„ë¡¬í”„íŠ¸</div>
                    <div class="stat-card__description">ë°ì´í„° ì—†ìŒ</div>
                </div>
            `;
        }

        // 4. ì£¼ê°„ ì‚¬ìš©ëŸ‰ ì°¨íŠ¸ ìŠ¤ì¼ˆë ˆí†¤ ìƒì„±
        function createUsageChartSkeleton() {
            let container = document.querySelector('.container') || document.body;
            
            let chartSection = document.querySelector('.usage-chart-section');
            if (!chartSection) {
                chartSection = document.createElement('section');
                chartSection.className = 'section usage-chart-section';
                container.appendChild(chartSection);
            }
            
            chartSection.innerHTML = `
                <h2 class="section__title">ğŸ“Š AI ì‚¬ìš©ëŸ‰ ë¶„ì„</h2>
                <div class="usage-chart">
                    <div class="usage-chart__header">
                        <div class="usage-chart__title">ì£¼ê°„ ì‚¬ìš©ëŸ‰</div>
                        <div class="usage-chart__period">ìµœê·¼ 7ì¼</div>
                    </div>
                    <div class="usage-chart__bars">
                        <div class="usage-chart__bar" style="height: 10%" title="ì›”ìš”ì¼: -"></div>
                        <div class="usage-chart__bar" style="height: 10%" title="í™”ìš”ì¼: -"></div>
                        <div class="usage-chart__bar" style="height: 10%" title="ìˆ˜ìš”ì¼: -"></div>
                        <div class="usage-chart__bar" style="height: 10%" title="ëª©ìš”ì¼: -"></div>
                        <div class="usage-chart__bar" style="height: 10%" title="ê¸ˆìš”ì¼: -"></div>
                        <div class="usage-chart__bar" style="height: 10%" title="í† ìš”ì¼: -"></div>
                        <div class="usage-chart__bar" style="height: 10%" title="ì¼ìš”ì¼: -"></div>
                    </div>
                    <div class="usage-chart__labels">
                        <div class="usage-chart__label">ì›”</div>
                        <div class="usage-chart__label">í™”</div>
                        <div class="usage-chart__label">ìˆ˜</div>
                        <div class="usage-chart__label">ëª©</div>
                        <div class="usage-chart__label">ê¸ˆ</div>
                        <div class="usage-chart__label">í† </div>
                        <div class="usage-chart__label">ì¼</div>
                    </div>
                </div>
            `;
        }

        // 5. ê³„ì • ì„¤ì • ìŠ¤ì¼ˆë ˆí†¤ ìƒì„±
        function createAccountSettingsSkeleton() {
            let container = document.querySelector('.container') || document.body;
            
            let accountSection = document.querySelector('.account-settings-section');
            if (!accountSection) {
                accountSection = document.createElement('section');
                accountSection.className = 'section account-settings-section';
                container.appendChild(accountSection);
            }
            
            accountSection.innerHTML = `
                <h2 class="section__title">ğŸ‘¤ ê³„ì • ì •ë³´</h2>
                <div class="setting-item">
                    <div class="setting-item__info">
                        <div class="setting-item__title">ì´ë©”ì¼ ì£¼ì†Œ</div>
                        <div class="setting-item__description">-</div>
                    </div>
                    <button class="edit-btn edit-btn--outline" onclick="showModal('emailModal')">ë³€ê²½</button>
                </div>
                <div class="setting-item">
                    <div class="setting-item__info">
                        <div class="setting-item__title">ë¹„ë°€ë²ˆí˜¸</div>
                        <div class="setting-item__description">ë§ˆì§€ë§‰ ë³€ê²½: -</div>
                    </div>
                    <button class="edit-btn edit-btn--outline" onclick="showModal('passwordModal')">ë³€ê²½</button>
                </div>
                <div class="setting-item">
                    <div class="setting-item__info">
                        <div class="setting-item__title">ì–¸ì–´ ì„¤ì •</div>
                        <div class="setting-item__description">-</div>
                    </div>
                    <button class="edit-btn edit-btn--outline" onclick="showModal('languageModal')">ë³€ê²½</button>
                </div>
            `;
        }

        // 6. í™˜ê²½ ì„¤ì • ìŠ¤ì¼ˆë ˆí†¤ ìƒì„±
        function createEnvironmentSettingsSkeleton() {
            let container = document.querySelector('.container') || document.body;
            
            let envSection = document.querySelector('.environment-settings-section');
            if (!envSection) {
                envSection = document.createElement('section');
                envSection.className = 'section environment-settings-section';
                container.appendChild(envSection);
            }
            
            envSection.innerHTML = `
                <h2 class="section__title">âš™ï¸ í™˜ê²½ ì„¤ì •</h2>
                <div class="setting-item">
                    <div class="setting-item__info">
                        <div class="setting-item__title">ì•Œë¦¼ ì„¤ì •</div>
                        <div class="setting-item__description">ìƒˆë¡œìš´ ê¸°ëŠ¥ê³¼ ì—…ë°ì´íŠ¸ ì•Œë¦¼ ë°›ê¸°</div>
                        <div class="notification-status" id="notificationStatus">
                            <div class="notification-status__indicator"></div>
                            <span>-</span>
                        </div>
                    </div>
                    <div class="toggle-switch" onclick="toggleNotifications(this)" id="notificationToggle"></div>
                </div>
            `;
        }

        // 7. ìµœê·¼ í™œë™ ìŠ¤ì¼ˆë ˆí†¤ ìƒì„±
        function createRecentActivitySkeleton() {
            let container = document.querySelector('.container') || document.body;
            
            let activitySection = document.querySelector('.recent-activity-section');
            if (!activitySection) {
                activitySection = document.createElement('section');
                activitySection.className = 'section recent-activity-section';
                container.appendChild(activitySection);
            }
            
            activitySection.innerHTML = `
                <h2 class="section__title">ğŸ•’ ìµœê·¼ í™œë™</h2>
                <ul class="activity-feed">
                    <li class="activity-item">
                        <div class="activity-item__icon activity-item__icon--ai">-</div>
                        <div class="activity-item__content">
                            <div class="activity-item__title">í™œë™ ë‚´ì—­: -</div>
                            <div class="activity-item__time">ì‹œê°„: -</div>
                        </div>
                    </li>
                </ul>
            `;
        }

        // 8. ì „ì²´ ìŠ¤ì¼ˆë ˆí†¤ UI ìƒì„± (ë¬´ì¡°ê±´ ì‹¤í–‰)
        function createAllSkeletonUI() {
            console.log('ìŠ¤ì¼ˆë ˆí†¤ UI ìƒì„± ì‹œì‘');
            
            try {
                createUserProfileSkeleton();
                createSubscriptionSkeleton();
                createStatsGridSkeleton();
                createUsageChartSkeleton();
                createAccountSettingsSkeleton();
                createEnvironmentSettingsSkeleton();
                createRecentActivitySkeleton();
                
                console.log('ìŠ¤ì¼ˆë ˆí†¤ UI ìƒì„± ì™„ë£Œ');
            } catch (error) {
                console.error('ìŠ¤ì¼ˆë ˆí†¤ UI ìƒì„± ì‹¤íŒ¨:', error);
                // ìµœí›„ ìˆ˜ë‹¨ - ê¸°ë³¸ HTML ì¶”ê°€
                document.body.innerHTML += `
                    <div style="padding: 20px; color: white; background: #111;">
                        <h1>ë§ˆì´í˜ì´ì§€</h1>
                        <p>ì‚¬ìš©ì ì •ë³´: - | êµ¬ë…: - | í†µê³„: - | ì„¤ì •: - | í™œë™: -</p>
                    </div>
                `;
            }
        }

        // ========================================
        // 2ë‹¨ê³„: ë°ì´í„° ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤ (ì˜¤ì§ ê°’ë§Œ êµì²´)
        // ========================================

        // 1. ì‚¬ìš©ì í”„ë¡œí•„ ê°’ë§Œ ì—…ë°ì´íŠ¸
        function updateUserProfileValues(userData) {
            // ì‚¬ìš©ìëª…
            const userName = document.getElementById('userName');
            if (userName) {
                userName.textContent = userData.username || userData.name || '-';
            }
            
            // ì•„ë°”íƒ€
            const userAvatar = document.getElementById('userAvatar');
            if (userAvatar) {
                const initial = (userData.username || userData.email || 'U')[0].toUpperCase();
                userAvatar.textContent = initial;
            }
            
            // ìƒíƒœ
            const userStatus = document.getElementById('userStatus');
            if (userStatus) {
                const joinDate = userData.created_at ? 
                    new Date(userData.created_at).toLocaleDateString('ko-KR') : '-';
                const plan = userData.subscription?.type || userData.plan || 'Free';
                userStatus.textContent = `One AI ${plan} ì‚¬ìš©ì Â· ê°€ì…ì¼: ${joinDate}`;
            }
            
            // ë°°ì§€
            updateUserBadgesValues(userData);
            
            // í—¤ë” í†µê³„ ê°’ë“¤
            updateHeaderStatsValues(userData.stats || {});
        }

        // 2. ë°°ì§€ ê°’ë§Œ ì—…ë°ì´íŠ¸
        function updateUserBadgesValues(userData) {
            const badgesContainer = document.getElementById('userBadges');
            if (!badgesContainer) return;
            
            badgesContainer.innerHTML = '';
            
            const subscriptionType = userData.subscription?.type || userData.plan;
            if (subscriptionType && subscriptionType !== 'Free') {
                if (subscriptionType === 'Pro') {
                    badgesContainer.innerHTML += '<span class="badge badge--pro">Pro ë©¤ë²„</span>';
                } else if (subscriptionType === 'Premium') {
                    badgesContainer.innerHTML += '<span class="badge badge--premium">í”„ë¦¬ë¯¸ì—„</span>';
                }
            }
            
            if (userData.verified || userData.email_verified) {
                badgesContainer.innerHTML += '<span class="badge badge--verified">ì¸ì¦ë¨</span>';
            }
            
            if (userData.role === 'developer') {
                badgesContainer.innerHTML += '<span class="badge badge--developer">ê°œë°œì</span>';
            }
            
            if (badgesContainer.innerHTML.trim() === '') {
                badgesContainer.innerHTML = '<span class="badge badge--user">ì¼ë°˜ ì‚¬ìš©ì</span>';
            }
        }

        // 3. í—¤ë” í†µê³„ ê°’ë§Œ ì—…ë°ì´íŠ¸
        function updateHeaderStatsValues(statsData) {
            const statNumbers = document.querySelectorAll('#userStats .stat-item__number');
            
            if (statNumbers[0]) statNumbers[0].textContent = statsData.consecutive_days || '-';
            if (statNumbers[1]) statNumbers[1].textContent = statsData.total_conversations ? statsData.total_conversations.toLocaleString() : '-';
            if (statNumbers[2]) statNumbers[2].textContent = statsData.saved_items || '-';
            if (statNumbers[3]) statNumbers[3].textContent = statsData.satisfaction_rating ? statsData.satisfaction_rating.toFixed(1) : '-';
        }

        // 4. êµ¬ë… ì •ë³´ ê°’ë§Œ ì—…ë°ì´íŠ¸
        function updateSubscriptionValues(subscriptionData) {
            const titleElement = document.querySelector('.subscription-card__title');
            const badgeElement = document.querySelector('.subscription-card__badge');
            const valueElements = document.querySelectorAll('.subscription-detail__value');
            
            const planType = subscriptionData.type || 'Free';
            const status = subscriptionData.status || 'active';
            const price = subscriptionData.price || 0;
            const nextBilling = subscriptionData.next_billing_date;
            const usageLimit = subscriptionData.usage_limit;
            const sessions = subscriptionData.concurrent_sessions || 1;
            
            // ì œëª© ì—…ë°ì´íŠ¸
            if (titleElement) {
                titleElement.textContent = `One AI ${planType}`;
            }
            
            // ìƒíƒœ ë°°ì§€ ì—…ë°ì´íŠ¸
            if (badgeElement) {
                const statusDisplay = {
                    'active': 'í™œì„±',
                    'inactive': 'ë¹„í™œì„±',
                    'cancelled': 'ì·¨ì†Œë¨',
                    'expired': 'ë§Œë£Œë¨'
                }[status] || '-';
                
                badgeElement.textContent = statusDisplay;
                badgeElement.className = `subscription-card__badge ${status === 'active' ? '' : 'badge--inactive'}`;
            }
            
            // ê°’ë“¤ ì—…ë°ì´íŠ¸
            if (valueElements[0]) {
                valueElements[0].textContent = price > 0 ? `â‚©${price.toLocaleString()}` : 'ë¬´ë£Œ';
            }
            if (valueElements[1]) {
                valueElements[1].textContent = nextBilling ? 
                    new Date(nextBilling).toLocaleDateString('ko-KR') : 
                    (price === 0 ? 'í•´ë‹¹ì—†ìŒ' : '-');
            }
            if (valueElements[2]) {
                valueElements[2].textContent = usageLimit === 'unlimited' ? 'ë¬´ì œí•œ' : (usageLimit || '-');
            }
            if (valueElements[3]) {
                valueElements[3].textContent = `${sessions}ê°œ`;
            }
        }

        // 5. í†µê³„ ê·¸ë¦¬ë“œ ê°’ë§Œ ì—…ë°ì´íŠ¸
        function updateStatsGridValues(statsData) {
            const statNumbers = document.querySelectorAll('.stats-grid .stat-card__number');
            const statDescriptions = document.querySelectorAll('.stats-grid .stat-card__description');
            
            const monthlyConversations = statsData.monthly_conversations || 0;
            const totalHours = statsData.total_usage_hours || 0;
            const costSavings = statsData.cost_savings || 0;
            const favoritePrompts = statsData.favorite_prompts || 0;
            
            // ìˆ˜ì¹˜ ì—…ë°ì´íŠ¸
            if (statNumbers[0]) statNumbers[0].textContent = monthlyConversations || '-';
            if (statNumbers[1]) statNumbers[1].textContent = totalHours ? totalHours + 'h' : '-';
            if (statNumbers[2]) statNumbers[2].textContent = costSavings > 0 ? `â‚©${Math.floor(costSavings / 1000)}K` : '-';
            if (statNumbers[3]) statNumbers[3].textContent = favoritePrompts || '-';
            
            // ì„¤ëª… ì—…ë°ì´íŠ¸
            const monthlyGrowth = monthlyConversations > 0 ? Math.floor(Math.random() * 30) + 10 : 0;
            const dailyAverage = totalHours > 0 ? (totalHours / 30).toFixed(1) : 0;
            
            if (statDescriptions[0]) {
                statDescriptions[0].textContent = monthlyGrowth ? `ì§€ë‚œ ë‹¬ ëŒ€ë¹„ +${monthlyGrowth}%` : 'ë°ì´í„° ì—†ìŒ';
            }
            if (statDescriptions[1]) {
                statDescriptions[1].textContent = dailyAverage ? `í‰ê·  ${dailyAverage}h/ì¼` : 'ë°ì´í„° ì—†ìŒ';
            }
            if (statDescriptions[2]) {
                statDescriptions[2].textContent = costSavings > 0 ? 'ì‰ì–´ë§ í†µí•´ ì ˆì•½' : 'ë°ì´í„° ì—†ìŒ';
            }
            if (statDescriptions[3]) {
                statDescriptions[3].textContent = favoritePrompts > 0 ? 'ìì£¼ ì‚¬ìš©í•˜ëŠ” í…œí”Œë¦¿' : 'ë°ì´í„° ì—†ìŒ';
            }
        }

        // 6. ì£¼ê°„ ì‚¬ìš©ëŸ‰ ì°¨íŠ¸ ê°’ë§Œ ì—…ë°ì´íŠ¸
        function updateWeeklyUsageValues(weeklyData) {
            const chartBars = document.querySelectorAll('.usage-chart__bar');
            const days = ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'];
            
            if (weeklyData && weeklyData.length === 7) {
                const maxUsage = Math.max(...weeklyData);
                chartBars.forEach((bar, index) => {
                    const usage = weeklyData[index] || 0;
                    const height = maxUsage > 0 ? (usage / maxUsage) * 100 : 10;
                    
                    bar.style.height = `${height}%`;
                    bar.title = `${days[index]}ìš”ì¼: ${usage}íšŒ`;
                });
            }
        }

        // 7. ê³„ì • ì„¤ì • ê°’ë§Œ ì—…ë°ì´íŠ¸
        function updateAccountSettingsValues(userData) {
            const settingDescriptions = document.querySelectorAll('.account-settings-section .setting-item__description');
            
            if (settingDescriptions[0]) {
                settingDescriptions[0].textContent = userData.email || '-';
            }
            
            if (settingDescriptions[1]) {
                const passwordChangeDate = userData.password_changed_at ? 
                    'ë§ˆì§€ë§‰ ë³€ê²½: ' + new Date(userData.password_changed_at).toLocaleDateString('ko-KR') : 
                    'ë§ˆì§€ë§‰ ë³€ê²½: -';
                settingDescriptions[1].textContent = passwordChangeDate;
            }
            
            if (settingDescriptions[2]) {
                const languageNames = {
                    'ko': 'í•œêµ­ì–´',
                    'en': 'English',
                    'ja': 'æ—¥æœ¬èª',
                    'zh': 'ä¸­æ–‡',
                    'es': 'EspaÃ±ol'
                };
                const userLanguage = userData.settings?.language || userData.language || 'ko';
                settingDescriptions[2].textContent = languageNames[userLanguage] || 'í•œêµ­ì–´';
            }
        }

        // 8. ì•Œë¦¼ ì„¤ì • ê°’ë§Œ ì—…ë°ì´íŠ¸
        function updateNotificationSettingsValues(userData) {
            const notificationToggle = document.getElementById('notificationToggle');
            const notificationStatus = document.getElementById('notificationStatus');
            
            if (notificationToggle && notificationStatus) {
                const notificationsEnabled = userData.settings?.notifications ?? userData.notifications_enabled ?? true;
                
                if (notificationsEnabled) {
                    notificationToggle.classList.add('toggle-switch--active');
                    notificationStatus.className = 'notification-status notification-status--enabled';
                    notificationStatus.querySelector('span').textContent = 'ì•Œë¦¼ í™œì„±í™”ë¨';
                } else {
                    notificationToggle.classList.remove('toggle-switch--active');
                    notificationStatus.className = 'notification-status notification-status--disabled';
                    notificationStatus.querySelector('span').textContent = 'ì•Œë¦¼ ë¹„í™œì„±í™”ë¨';
                }
            }
        }

        // 9. ìµœê·¼ í™œë™ ê°’ë§Œ ì—…ë°ì´íŠ¸
        function updateRecentActivityValues(activityData) {
            const activityFeed = document.querySelector('.recent-activity-section .activity-feed');
            if (!activityFeed) return;
            
            const activities = activityData || [
                {
                    type: 'ai_conversation',
                    title: 'ìµœê·¼ í™œë™ ì—†ìŒ',
                    time: '-',
                    icon: 'ğŸ“­'
                }
            ];
            
            activityFeed.innerHTML = activities.map(activity => `
                <li class="activity-item">
                    <div class="activity-item__icon activity-item__icon--${activity.type}">
                        ${activity.icon}
                    </div>
                    <div class="activity-item__content">
                        <div class="activity-item__title">${activity.title}</div>
                        <div class="activity-item__time">${activity.time}</div>
                    </div>
                </li>
            `).join('');
        }

        // ========================================
        // ë©”ì¸ í•¨ìˆ˜ë“¤
        // ========================================

        // 10. ì „ì²´ ë°ì´í„° ê°’ë§Œ ì—…ë°ì´íŠ¸ (ìŠ¤ì¼ˆë ˆí†¤ì€ ê±´ë“œë¦¬ì§€ ì•ŠìŒ)
        function updateAllProfileValues(userData) {
            console.log('í”„ë¡œí•„ ê°’ ì—…ë°ì´íŠ¸ ì‹œì‘:', userData);
            
            try {
                updateUserProfileValues(userData);
                updateSubscriptionValues(userData.subscription || {});
                updateStatsGridValues(userData.stats || {});
                updateWeeklyUsageValues(userData.weekly_usage);
                updateAccountSettingsValues(userData);
                updateNotificationSettingsValues(userData);
                updateRecentActivityValues(userData.recent_activity);
                
                console.log('í”„ë¡œí•„ ê°’ ì—…ë°ì´íŠ¸ ì™„ë£Œ');
            } catch (error) {
                console.error('í”„ë¡œí•„ ê°’ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
            }
        }

        // 11. ì´ˆê¸°í™” í•¨ìˆ˜ (í˜ì´ì§€ ë¡œë“œì‹œ ë¬´ì¡°ê±´ ì‹¤í–‰)
        function initializeProfilePage() {
            console.log('í”„ë¡œí•„ í˜ì´ì§€ ì´ˆê¸°í™” ì‹œì‘');
            
            // 1ë‹¨ê³„: ë¬´ì¡°ê±´ ìŠ¤ì¼ˆë ˆí†¤ UI ìƒì„± (ê¸°ë³¸ê°’ '-')
            createAllSkeletonUI();
            
            // 2ë‹¨ê³„: ì‹¤ì œ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ê°’ ì—…ë°ì´íŠ¸
            try {
                const userData = getUserData(); // ì‹¤ì œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                if (userData) {
                    updateAllProfileValues(userData);
                }
            } catch (error) {
                console.error('ì‚¬ìš©ì ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
                // ì‹¤íŒ¨í•´ë„ ìŠ¤ì¼ˆë ˆí†¤ì€ ì´ë¯¸ ìƒì„±ë˜ì–´ ìˆìŒ
            }
            
            console.log('í”„ë¡œí•„ í˜ì´ì§€ ì´ˆê¸°í™” ì™„ë£Œ');
        }

        // 12. ì‚¬ìš©ì ë°ì´í„° ê°€ì ¸ì˜¤ê¸° í•¨ìˆ˜ (ì‹¤ì œ êµ¬í˜„ ì‹œ ìˆ˜ì •)
        function getUserData() {
            // OneAI ëª¨ë“ˆ ì‚¬ìš© ì‹œë„
            if (window.OneAIAuth && window.OneAIAuth.getCurrentUser) {
                return window.OneAIAuth.getCurrentUser();
            }
            
            // localStorageì—ì„œ ê°€ì ¸ì˜¤ê¸° ì‹œë„
            const userStr = localStorage.getItem('oneai_user') || sessionStorage.getItem('oneai_user');
            if (userStr) {
                try {
                    return JSON.parse(userStr);
                } catch (e) {
                    console.error('ì‚¬ìš©ì ë°ì´í„° íŒŒì‹± ì‹¤íŒ¨:', e);
                }
            }
            
            return null;
        }

        // 13. ìƒ˜í”Œ ë°ì´í„°ë¡œ í…ŒìŠ¤íŠ¸í•˜ëŠ” í•¨ìˆ˜ (ìƒˆë¡œìš´ ìŠ¤ì¼ˆë ˆí†¤ ê¸°ë°˜)
        function loadSampleDataNew() {
            const sampleData = {
                username: 'ê¹€ê°œë°œì',
                email: 'developer@oneai.com',
                created_at: '2024-01-15',
                verified: true,
                role: 'developer',
                subscription: {
                    type: 'Pro',
                    status: 'active',
                    price: 29000,
                    next_billing_date: '2024-12-15',
                    usage_limit: 'unlimited',
                    concurrent_sessions: 3
                },
                stats: {
                    consecutive_days: 15,
                    total_conversations: 1250,
                    saved_items: 42,
                    satisfaction_rating: 4.8,
                    monthly_conversations: 156,
                    total_usage_hours: 67,
                    cost_savings: 125000,
                    favorite_prompts: 8
                },
                settings: {
                    language: 'ko',
                    notifications: true
                },
                password_changed_at: '2024-10-01',
                weekly_usage: [42, 56, 32, 63, 49, 21, 28],
                recent_activity: [
                    {
                        type: 'ai_conversation',
                        title: 'ChatGPTë¡œ ì½”ë”© ë¬¸ì œ í•´ê²°',
                        time: '2ë¶„ ì „',
                        icon: 'ğŸ¤–'
                    },
                    {
                        type: 'sharing_join',
                        title: 'Claude Pro ì‰ì–´ë§ ì°¸ì—¬',
                        time: '30ë¶„ ì „',
                        icon: 'ğŸ¤'
                    }
                ]
            };
            
            updateAllProfileValues(sampleData);
        }

        // ========================================
        // ì‚¬ìš©ë²•
        // ========================================

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë¬´ì¡°ê±´ ì‹¤í–‰:
        // initializeProfilePage();

        // ë°ì´í„° ì—…ë°ì´íŠ¸ë§Œ í•˜ê³  ì‹¶ì„ ë•Œ:
        // updateAllProfileValues(newUserData);

        // ìƒ˜í”Œ ë°ì´í„°ë¡œ í…ŒìŠ¤íŠ¸:
        // loadSampleDataNew();

    </script>
</body>
</html>