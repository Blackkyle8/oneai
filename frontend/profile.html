<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>One AI - ë§ˆì´í˜ì´ì§€</title>

    <!-- ì‹¤ì œ ì¡´ì¬í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë“¤ë¡œ êµì²´ -->
    <script src="assets/auth.js"></script>  <!-- OneAIAuth í´ë˜ìŠ¤ -->
    <script src="assets/api.js"></script>   <!-- OneAIAPI í´ë˜ìŠ¤ -->

    <style>
        /* One AI Design System - Essential CSS Variables & Components */
        :root {
            /* Color System - Dark Theme */
            --color-surface-base: #000000;
            --color-surface-raised: #0a0a0a;
            --color-surface-elevated: #111111;
            --color-surface-overlay: #1a1a1a;
            --color-surface-modal: #222222;
            --surface-glass: rgba(17, 17, 17, 0.8);
            --surface-glass-border: rgba(255, 255, 255, 0.1);
            
            /* Text Colors */
            --text-primary: #ffffff;
            --text-secondary: #e5e5e5;
            --text-tertiary: #a3a3a3;
            --text-quaternary: #737373;
            --text-disabled: #525252;
            
            /* Brand Colors */
            --color-primary-200: #a7f3d0;
            --color-primary-400: #34d399;
            --color-primary-500: #10b981;
            --color-primary-600: #059669;
            --color-primary-700: #047857;
            
            /* Status Colors */
            --color-success: #10b981;
            --color-warning: #f59e0b;
            --color-error: #ef4444;
            --color-info: #3b82f6;
            
            /* Typography Tokens */
            --font-family-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            --font-weight-normal: 400;
            --font-weight-medium: 500;
            --font-weight-semibold: 600;
            --font-weight-bold: 700;
            --font-weight-extrabold: 800;
            
            --font-size-xs: 12px;
            --font-size-sm: 14px;
            --font-size-base: 16px;
            --font-size-lg: 18px;
            --font-size-xl: 22px;
            --font-size-2xl: 28px;
            --font-size-3xl: 36px;
            --font-size-4xl: 48px;
            
            /* Spacing Tokens */
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;
            --spacing-2xl: 48px;
            --spacing-3xl: 64px;
            
            /* Border Radius Tokens */
            --radius-sm: 4px;
            --radius-md: 6px;
            --radius-lg: 8px;
            --radius-xl: 12px;
            --radius-2xl: 16px;
            --radius-full: 9999px;
            
            /* Z-Index Tokens */
            --z-index-base: 0;
            --z-index-sidebar: 10;
            --z-index-dropdown: 20;
            --z-index-modal: 40;
            --z-index-toast: 50;
            
            /* Shadow Tokens */
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            
            /* Motion Tokens */
            --motion-duration-fast: 150ms;
            --motion-duration-normal: 250ms;
            --motion-duration-slow: 350ms;
            --motion-ease: cubic-bezier(0.4, 0, 0.2, 1);
            
            /* Legacy Variables (í˜¸í™˜ì„±) */
            --motion-fast: var(--motion-duration-fast);
            --motion-normal: var(--motion-duration-normal);
            --motion-slow: var(--motion-duration-slow);
            --z-index-tooltip: 60;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family-primary);
            background: var(--color-surface-base);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            padding-top: var(--spacing-lg);
        }

        /* ========================================
           One AI í†µì¼ ìŠ¤í¬ë¡¤ë°” ë””ìì¸ (body ìŠ¤íƒ€ì¼ ë’¤ì— ì¶”ê°€)
           ======================================== */

        /* Webkit ê¸°ë°˜ ë¸Œë¼ìš°ì € (Chrome, Safari, Edge) */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--color-surface-base);
            border-radius: var(--radius-sm);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--color-primary-500), var(--color-primary-400));
            border-radius: var(--radius-sm);
            transition: all var(--motion-duration-fast) var(--motion-ease);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--color-primary-400), var(--color-primary-200));
            transform: scale(1.1);
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }

        ::-webkit-scrollbar-thumb:active {
            background: linear-gradient(135deg, var(--color-primary-600), var(--color-primary-500));
        }

        ::-webkit-scrollbar-corner {
            background: var(--color-surface-base);
        }

        /* Firefox ìŠ¤í¬ë¡¤ë°” */
        html {
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 255, 255, 0.2) var(--color-surface-elevated);
        }

        /* ëª¨ë°”ì¼ì—ì„œ ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° */
        @media (max-width: 768px) {
            ::-webkit-scrollbar {
                width: 0px;
                background: transparent;
            }
            
            body {
                -webkit-overflow-scrolling: touch;
            }
        }

        /* Button Component */
        .btn, .nav-tab {
            padding: 6px 16px;
            border-radius: var(--radius-md);
            border: 1px solid var(--color-surface-overlay);
            background: var(--color-surface-elevated);
            cursor: pointer;
            font-size: var(--font-size-sm);
            font-weight: 500;
            transition: all var(--motion-fast) var(--motion-ease);
            color: var(--text-primary);
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            text-decoration: none;
        }

        .btn:hover, .nav-tab:hover {
            background: var(--color-surface-modal);
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .btn--primary {
            background: var(--color-primary-500);
            color: white;
            border-color: var(--color-primary-500);
        }

        .btn--primary:hover {
            background: var(--color-primary-400);
            border-color: var(--color-primary-400);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--spacing-lg);
        }

        /* Profile Header Component */
        .profile-header {
            background: linear-gradient(135deg, var(--color-surface-elevated), var(--color-surface-modal));
            border-radius: var(--radius-2xl);
            padding: var(--spacing-2xl);
            margin-bottom: var(--spacing-2xl);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .profile-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(139, 92, 246, 0.1));
            pointer-events: none;
        }

        .profile-header__content {
            display: flex;
            align-items: center;
            gap: var(--spacing-lg);
            position: relative;
            z-index: 1;
        }

        .profile-header__avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--color-primary-500), var(--color-primary-400));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
            flex-shrink: 0;
            border: 4px solid rgba(255, 255, 255, 0.1);
            transition: all var(--motion-normal) var(--motion-ease);
            cursor: pointer;
        }

        .profile-header__avatar:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 32px rgba(16, 185, 129, 0.3);
        }

        .profile-header__details {
            flex: 1;
        }

        .profile-header__name {
            font-size: var(--font-size-2xl);
            font-weight: 700;
            margin-bottom: var(--spacing-xs);
        }

        .profile-header__status {
            color: var(--text-secondary);
            font-size: var(--font-size-base);
            margin-bottom: var(--spacing-sm);
        }

        .profile-header__badges {
            display: flex;
            gap: var(--spacing-xs);
            flex-wrap: wrap;
            margin-bottom: var(--spacing-md);
        }

        .badge {
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: 20px;
            font-size: var(--font-size-xs);
            font-weight: 600;
        }

        .badge--pro {
            background: linear-gradient(135deg, var(--color-primary-500), var(--color-primary-400));
            color: white;
        }

        .badge--verified {
            background: rgba(59, 130, 246, 0.1);
            color: var(--color-info);
            border: 1px solid var(--color-info);
        }

        .badge--premium {
            background: rgba(139, 92, 246, 0.1);
            color: #8b5cf6;
            border: 1px solid #8b5cf6;
        }

        .badge--user {
            background: rgba(115, 115, 115, 0.1);
            color: var(--text-quaternary);
            border: 1px solid var(--text-quaternary);
        }

        .profile-header__stats {
            display: flex;
            gap: var(--spacing-lg);
        }

        .stat-item {
            text-align: center;
        }

        .stat-item__number {
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--color-primary-500);
        }

        .stat-item__label {
            font-size: var(--font-size-xs);
            color: var(--text-tertiary);
        }

        /* Stats Grid Component */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-2xl);
        }

        .stat-card {
            background: var(--color-surface-elevated);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-xl);
            padding: var(--spacing-lg);
            text-align: center;
            transition: all var(--motion-normal) var(--motion-ease);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--color-primary-500), var(--color-primary-400));
            transform: scaleX(0);
            transition: transform var(--motion-normal) var(--motion-ease);
        }

        .stat-card:hover {
            transform: translateY(-4px);
            border-color: rgba(255, 255, 255, 0.2);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .stat-card:hover::before {
            transform: scaleX(1);
        }

        .stat-card__number {
            font-size: var(--font-size-xl);
            font-weight: 700;
            color: var(--color-primary-500);
            margin-bottom: var(--spacing-xs);
        }

        .stat-card__label {
            font-size: var(--font-size-sm);
            color: var(--text-tertiary);
            margin-bottom: var(--spacing-xs);
        }

        .stat-card__description {
            font-size: var(--font-size-xs);
            color: var(--text-quaternary);
        }

        /* Section Component */
        .section {
            background: var(--color-surface-elevated);
            border-radius: var(--radius-xl);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .section__title {
            font-size: var(--font-size-lg);
            font-weight: 600;
            margin-bottom: var(--spacing-lg);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        /* Setting Item Component */
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--spacing-lg) 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            gap: var(--spacing-md);
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .setting-item__info {
            flex: 1;
            min-width: 0;
        }

        .setting-item__title {
            font-size: var(--font-size-base);
            font-weight: 500;
            margin-bottom: var(--spacing-xs);
        }

        .setting-item__description {
            font-size: var(--font-size-sm);
            color: var(--text-secondary);
        }

        /* Developer Tools Styles */
        .developer-tools {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-lg);
        }

        .tool-item {
            background: var(--color-surface-elevated);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tool-item__info {
            margin-bottom: var(--spacing-md);
        }

        .tool-item__title {
            font-size: var(--font-size-base);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--spacing-xs);
        }

        .tool-item__description {
            color: var(--text-secondary);
            font-size: var(--font-size-sm);
        }

        .tool-item__files {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-sm);
        }

        .file-link {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) var(--spacing-md);
            background: var(--color-surface-base);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-sm);
            text-decoration: none;
            color: var(--text-primary);
            transition: all 0.2s ease;
        }

        .file-link:hover {
            background: var(--color-surface-overlay);
            border-color: var(--color-primary-500);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);
        }

        .file-icon {
            font-size: var(--font-size-lg);
            flex-shrink: 0;
        }

        .file-name {
            font-family: 'Courier New', monospace;
            font-size: var(--font-size-sm);
            font-weight: 500;
        }

        /* Toggle Switch Component */
        .toggle-switch {
            width: 48px;
            height: 24px;
            background: var(--color-surface-overlay);
            border-radius: 12px;
            position: relative;
            cursor: pointer;
            transition: all var(--motion-normal) var(--motion-ease);
            flex-shrink: 0;
        }

        .toggle-switch--active {
            background: var(--color-primary-500);
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: all var(--motion-normal) var(--motion-ease);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .toggle-switch--active::after {
            left: 26px;
        }

        /* Edit Button */
        .edit-btn {
            background: var(--color-primary-500);
            color: white;
            border: none;
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--radius-md);
            font-size: var(--font-size-sm);
            font-weight: 500;
            cursor: pointer;
            transition: all var(--motion-fast) var(--motion-ease);
            flex-shrink: 0;
        }

        .edit-btn:hover {
            background: var(--color-primary-400);
            transform: translateY(-1px);
        }

        .edit-btn--outline {
            background: transparent;
            color: var(--color-primary-500);
            border: 1px solid var(--color-primary-500);
        }

        .edit-btn--outline:hover {
            background: var(--color-primary-500);
            color: white;
        }

        /* Activity Feed Component */
        .activity-feed {
            list-style: none;
        }

        .activity-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: all var(--motion-fast) var(--motion-ease);
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-item:hover {
            background: rgba(255, 255, 255, 0.02);
            margin: 0 calc(-1 * var(--spacing-md));
            padding-left: var(--spacing-md);
            padding-right: var(--spacing-md);
            border-radius: var(--radius-lg);
        }

        .activity-item__icon {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .activity-item__icon--ai { 
            background: linear-gradient(135deg, #10a37f, #1a7f72); 
        }

        .activity-item__icon--share { 
            background: linear-gradient(135deg, var(--color-primary-500), var(--color-primary-400)); 
        }

        .activity-item__icon--setting { 
            background: linear-gradient(135deg, var(--color-info), #60a5fa); 
        }

        .activity-item__content {
            flex: 1;
        }

        .activity-item__title {
            font-size: var(--font-size-sm);
            font-weight: 500;
            margin-bottom: var(--spacing-xs);
        }

        .activity-item__time {
            font-size: var(--font-size-xs);
            color: var(--text-tertiary);
        }

        /* Subscription Card Component */
        .subscription-card {
            background: linear-gradient(135deg, var(--color-primary-500), var(--color-primary-400));
            border-radius: var(--radius-xl);
            padding: var(--spacing-lg);
            color: white;
            margin-bottom: var(--spacing-lg);
        }

        .subscription-card__header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }

        .subscription-card__title {
            font-size: var(--font-size-lg);
            font-weight: 600;
        }

        .subscription-card__badge {
            background: rgba(255, 255, 255, 0.2);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-xl);
            font-size: var(--font-size-xs);
            font-weight: 600;
        }

        .subscription-card__details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: var(--spacing-md);
        }

        .subscription-detail {
            text-align: center;
        }

        .subscription-detail__value {
            font-size: var(--font-size-base);
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
        }

        .subscription-detail__label {
            font-size: var(--font-size-xs);
            opacity: 0.8;
        }

        /* Usage Chart Component */
        .usage-chart {
            background: var(--color-surface-modal);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
        }

        .usage-chart__header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }

        .usage-chart__title {
            font-size: var(--font-size-base);
            font-weight: 500;
        }

        .usage-chart__period {
            font-size: var(--font-size-xs);
            color: var(--text-tertiary);
        }

        .usage-chart__bars {
            display: flex;
            align-items: end;
            justify-content: space-between;
            height: 100px;
            gap: var(--spacing-xs);
        }

        .usage-chart__bar {
            flex: 1;
            background: linear-gradient(to top, var(--color-primary-500), var(--color-primary-400));
            border-radius: 2px 2px 0 0;
            min-height: 10px;
            transition: all var(--motion-normal) var(--motion-ease);
            cursor: pointer;
        }

        .usage-chart__bar:hover {
            background: linear-gradient(to top, var(--color-primary-600), var(--color-primary-500));
            transform: scaleY(1.1);
        }

        .usage-chart__labels {
            display: flex;
            justify-content: space-between;
            margin-top: var(--spacing-xs);
        }

        .usage-chart__label {
            font-size: var(--font-size-xs);
            color: var(--text-tertiary);
            text-align: center;
            flex: 1;
        }

        /* Notification Status Indicators */
        .notification-status {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            font-size: var(--font-size-xs);
            color: var(--text-tertiary);
        }

        .notification-status--enabled {
            color: var(--color-success);
        }

        .notification-status--disabled {
            color: var(--text-quaternary);
        }

        .notification-status__indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: currentColor;
        }

        /* Loading Spinner */
        .loading-spinner {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: var(--z-index-modal);
            align-items: center;
            justify-content: center;
        }

        .loading-spinner--show {
            display: flex;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid var(--color-surface-overlay);
            border-top: 3px solid var(--color-primary-500);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: var(--spacing-md);
            }
            
            .profile-header__content {
                flex-direction: column;
                text-align: center;
                gap: var(--spacing-md);
            }
            
            .profile-header__stats {
                justify-content: center;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .setting-item {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--spacing-xs);
            }
        }

        /* Bounce Animation */
        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% {
                transform: translate3d(0,0,0) scale(1);
            }
            40%, 43% {
                transform: translate3d(0, -10px, 0) scale(1.1);
            }
            70% {
                transform: translate3d(0, -5px, 0) scale(1.05);
            }
            90% {
                transform: translate3d(0, -2px, 0) scale(1.02);
            }
        }

        /* Hero Section - ë§ˆì´í˜ì´ì§€ íƒ€ì´í‹€ìš© (ì¢Œì¸¡ì •ë ¬ ìˆ˜ì •) */
        .hero-section {
            text-align: left; /* centerì—ì„œ leftë¡œ ë³€ê²½ */
            margin-bottom: var(--spacing-2xl);
            background: linear-gradient(135deg, var(--color-surface-elevated), var(--color-surface-modal));
            border-radius: var(--radius-2xl);
            padding: var(--spacing-2xl);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: background var(--motion-duration-normal);
        }

        .hero-section__title {
            font-size: var(--font-size-3xl);
            font-weight: 700;
            margin-bottom: var(--spacing-md);
            background: linear-gradient(135deg, var(--color-primary-500), var(--color-primary-400));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: left; /* íƒ€ì´í‹€ë„ ëª…ì‹œì ìœ¼ë¡œ ì¢Œì¸¡ì •ë ¬ */
        }

        .hero-section__subtitle {
            color: var(--text-secondary);
            font-size: var(--font-size-base);
            max-width: 600px;
            margin: 0 0 var(--spacing-lg); /* margin: 0 autoì—ì„œ 0 0ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ ì¢Œì¸¡ì •ë ¬ */
            line-height: 1.6;
            text-align: left; /* ì„œë¸Œíƒ€ì´í‹€ë„ ì¢Œì¸¡ì •ë ¬ */
        }

        /* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .hero-section__title {
                font-size: var(--font-size-2xl);
                text-align: left; /* ëª¨ë°”ì¼ì—ì„œë„ ì¢Œì¸¡ì •ë ¬ ìœ ì§€ */
            }
            
            .hero-section__subtitle {
                text-align: left; /* ëª¨ë°”ì¼ì—ì„œë„ ì¢Œì¸¡ì •ë ¬ ìœ ì§€ */
            }
        }
    </style>
</head>
<body>
    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-spinner">
        <div class="spinner"></div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- ë§ˆì´í˜ì´ì§€ íƒ€ì´í‹€ ì„¹ì…˜ (ê¸°ì¡´ profile-header ëŒ€ì²´ìš©) -->
        <div class="hero-section">
            <div class="hero-section__content">
                <h1 class="hero-section__title">ğŸ‘¤ ë§ˆì´í˜ì´ì§€</h1>
                <p class="hero-section__subtitle">
                    ë‚˜ë§Œì˜ AI í™œë™ì„ í•œëˆˆì— í™•ì¸í•˜ê³  ê´€ë¦¬í•˜ì„¸ìš”!<br>
                    ì‚¬ìš©ëŸ‰ í†µê³„ë¶€í„° êµ¬ë… ê´€ë¦¬ê¹Œì§€, One AIì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </p>
            </div>
        </div>

        <!-- Profile Header -->
        <header class="profile-header">
            <div class="profile-header__content">
                <div class="profile-header__avatar" id="userAvatar">-</div>
                <div class="profile-header__details">
                    <h1 class="profile-header__name" id="userName">-</h1>
                    <p class="profile-header__status" id="userStatus">One AI - ì‚¬ìš©ì Â· ê°€ì…ì¼: -</p>
                    <div class="profile-header__badges" id="userBadges">
                        <span class="badge badge--user">-</span>
                    </div>
                    <div class="profile-header__stats" id="userStats">
                        <div class="stat-item">
                            <div class="stat-item__number">-</div>
                            <div class="stat-item__label">ì—°ì† ì‚¬ìš©ì¼</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-item__number">-</div>
                            <div class="stat-item__label">ì´ ëŒ€í™” ìˆ˜</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-item__number">-</div>
                            <div class="stat-item__label">ì €ì¥ëœ í•­ëª©</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-item__number">-</div>
                            <div class="stat-item__label">ë§Œì¡±ë„</div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Subscription Card -->
        <div class="subscription-card" id="subscriptionCard">
            <div class="subscription-card__header">
                <h2 class="subscription-card__title">One AI -</h2>
                <div class="subscription-card__badge">-</div>
            </div>
            <div class="subscription-card__details">
                <div class="subscription-detail">
                    <div class="subscription-detail__value">-</div>
                    <div class="subscription-detail__label">ì›” êµ¬ë…ë£Œ</div>
                </div>
                <div class="subscription-detail">
                    <div class="subscription-detail__value">-</div>
                    <div class="subscription-detail__label">ë‹¤ìŒ ê²°ì œì¼</div>
                </div>
                <div class="subscription-detail">
                    <div class="subscription-detail__value">-</div>
                    <div class="subscription-detail__label">AI ì‚¬ìš©ëŸ‰</div>
                </div>
                <div class="subscription-detail">
                    <div class="subscription-detail__value">-</div>
                    <div class="subscription-detail__label">ë™ì‹œ ì„¸ì…˜</div>
                </div>
            </div>
        </div>

        <!-- Stats Grid -->
        <section class="stats-grid" id="statsGrid">
            <div class="stat-card">
                <div class="stat-card__number">-</div>
                <div class="stat-card__label">ì´ë²ˆ ë‹¬ AI ëŒ€í™”</div>
                <div class="stat-card__description">ë°ì´í„° ì—†ìŒ</div>
            </div>
            <div class="stat-card">
                <div class="stat-card__number">-</div>
                <div class="stat-card__label">ì´ ì‚¬ìš© ì‹œê°„</div>
                <div class="stat-card__description">ë°ì´í„° ì—†ìŒ</div>
            </div>
            <div class="stat-card">
                <div class="stat-card__number">-</div>
                <div class="stat-card__label">ëˆ„ì  ì ˆì•½ ê¸ˆì•¡</div>
                <div class="stat-card__description">ë°ì´í„° ì—†ìŒ</div>
            </div>
            <div class="stat-card">
                <div class="stat-card__number">-</div>
                <div class="stat-card__label">ì¦ê²¨ì°¾ëŠ” í”„ë¡¬í”„íŠ¸</div>
                <div class="stat-card__description">ë°ì´í„° ì—†ìŒ</div>
            </div>
        </section>

        <!-- Usage Chart Section -->
        <section class="section">
            <h2 class="section__title">ğŸ“Š AI ì‚¬ìš©ëŸ‰ ë¶„ì„</h2>
            <div class="usage-chart">
                <div class="usage-chart__header">
                    <div class="usage-chart__title">ì£¼ê°„ ì‚¬ìš©ëŸ‰</div>
                    <div class="usage-chart__period">ìµœê·¼ 7ì¼</div>
                </div>
                <div class="usage-chart__bars" id="weeklyChart">
                    <div class="usage-chart__bar" style="height: 10%" title="ì›”ìš”ì¼: -"></div>
                    <div class="usage-chart__bar" style="height: 10%" title="í™”ìš”ì¼: -"></div>
                    <div class="usage-chart__bar" style="height: 10%" title="ìˆ˜ìš”ì¼: -"></div>
                    <div class="usage-chart__bar" style="height: 10%" title="ëª©ìš”ì¼: -"></div>
                    <div class="usage-chart__bar" style="height: 10%" title="ê¸ˆìš”ì¼: -"></div>
                    <div class="usage-chart__bar" style="height: 10%" title="í† ìš”ì¼: -"></div>
                    <div class="usage-chart__bar" style="height: 10%" title="ì¼ìš”ì¼: -"></div>
                </div>
                <div class="usage-chart__labels">
                    <div class="usage-chart__label">ì›”</div>
                    <div class="usage-chart__label">í™”</div>
                    <div class="usage-chart__label">ìˆ˜</div>
                    <div class="usage-chart__label">ëª©</div>
                    <div class="usage-chart__label">ê¸ˆ</div>
                    <div class="usage-chart__label">í† </div>
                    <div class="usage-chart__label">ì¼</div>
                </div>
            </div>
        </section>

        <!-- Developer Tools Section -->
        <section class="section">
            <h2 class="section__title">ğŸ› ï¸ ê°œë°œì ë„êµ¬</h2>
            <div class="developer-tools">
                <div class="tool-item">
                    <div class="tool-item__info">
                        <div class="tool-item__title">í”„ë¡œì íŠ¸ íŒŒì¼</div>
                        <div class="tool-item__description">ê°œë°œ ì¤‘ì¸ íŒŒì¼ë“¤ì— ë°”ë¡œ ì ‘ê·¼</div>
                    </div>
                    <div class="tool-item__files">
                        <a href="index.html" class="file-link" target="_blank">
                            <span class="file-icon">ğŸ </span>
                            <span class="file-name">index.html</span>
                        </a>
                        <a href="profile.html" class="file-link" target="_blank">
                            <span class="file-icon">ğŸ‘¤</span>
                            <span class="file-name">profile.html</span>
                        </a>
                        <a href="community.html" class="file-link" target="_blank">
                            <span class="file-icon">ğŸ’¬</span>
                            <span class="file-name">community.html</span>
                        </a>
                        <a href="sharing.html" class="file-link" target="_blank">
                            <span class="file-icon">ğŸ¤</span>
                            <span class="file-name">sharing.html</span>
                        </a>
                        <a href="healthcare.html" class="file-link" target="_blank">
                            <span class="file-icon">ğŸ¥</span>
                            <span class="file-name">healthcare.html</span>
                        </a>
                        <a href="business.html" class="file-link" target="_blank">
                            <span class="file-icon">ğŸ’¼</span>
                            <span class="file-name">business.html</span>
                        </a>
                        <a href="login.html" class="file-link" target="_blank">
                            <span class="file-icon">ğŸ”</span>
                            <span class="file-name">login.html</span>
                        </a>
                        <a href="debug.html" class="file-link" target="_blank">
                            <span class="file-icon">ğŸ›</span>
                            <span class="file-name">debug.html</span>
                        </a>
                    </div>
                </div>
                <div class="tool-item">
                    <div class="tool-item__info">
                        <div class="tool-item__title">ê°œë°œ ë¦¬ì†ŒìŠ¤</div>
                        <div class="tool-item__description">ìŠ¤íƒ€ì¼ì‹œíŠ¸ ë° ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼</div>
                    </div>
                    <div class="tool-item__files">
                        <a href="styles.css" class="file-link" target="_blank">
                            <span class="file-icon">ğŸ¨</span>
                            <span class="file-name">styles.css</span>
                        </a>
                        <a href="script.js" class="file-link" target="_blank">
                            <span class="file-icon">âš¡</span>
                            <span class="file-name">script.js</span>
                        </a>
                        <a href="api.js" class="file-link" target="_blank">
                            <span class="file-icon">ğŸ”—</span>
                            <span class="file-name">api.js</span>
                        </a>
                        <a href="frontend/assets/lang.js" class="file-link" target="_blank">
                            <span class="file-icon">ğŸŒ</span>
                            <span class="file-name">lang.js</span>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Account Settings Section -->
        <section class="section">
            <h2 class="section__title">ğŸ‘¤ ê³„ì • ì •ë³´</h2>
            <div class="setting-item">
                <div class="setting-item__info">
                    <div class="setting-item__title">ì´ë©”ì¼ ì£¼ì†Œ</div>
                    <div class="setting-item__description" id="userEmail">-</div>
                </div>
                <button class="edit-btn edit-btn--outline">ë³€ê²½</button>
            </div>
            <div class="setting-item">
                <div class="setting-item__info">
                    <div class="setting-item__title">ë¹„ë°€ë²ˆí˜¸</div>
                    <div class="setting-item__description" id="passwordChanged">ë§ˆì§€ë§‰ ë³€ê²½: -</div>
                </div>
                <button class="edit-btn edit-btn--outline">ë³€ê²½</button>
            </div>
            <div class="setting-item">
                <div class="setting-item__info">
                    <div class="setting-item__title">ì–¸ì–´ ì„¤ì •</div>
                    <div class="setting-item__description" id="userLanguage">-</div>
                </div>
                <button class="edit-btn edit-btn--outline">ë³€ê²½</button>
            </div>
        </section>

        <!-- Environment Settings Section -->
        <section class="section">
            <h2 class="section__title">âš™ï¸ í™˜ê²½ ì„¤ì •</h2>
            <div class="setting-item">
                <div class="setting-item__info">
                    <div class="setting-item__title">ì•Œë¦¼ ì„¤ì •</div>
                    <div class="setting-item__description">ìƒˆë¡œìš´ ê¸°ëŠ¥ê³¼ ì—…ë°ì´íŠ¸ ì•Œë¦¼ ë°›ê¸°</div>
                    <div class="notification-status notification-status--disabled" id="notificationStatus">
                        <div class="notification-status__indicator"></div>
                        <span>-</span>
                    </div>
                </div>
                <div class="toggle-switch" onclick="toggleNotifications(this)" id="notificationToggle"></div>
            </div>
        </section>

        <!-- Recent Activity Section -->
        <section class="section">
            <h2 class="section__title">ğŸ•’ ìµœê·¼ í™œë™</h2>
            <ul class="activity-feed" id="activityFeed">
                <li class="activity-item">
                    <div class="activity-item__icon activity-item__icon--ai">-</div>
                    <div class="activity-item__content">
                        <div class="activity-item__title">í™œë™ ë‚´ì—­: -</div>
                        <div class="activity-item__time">ì‹œê°„: -</div>
                    </div>
                </li>
            </ul>
        </section>
    </div>

    <script>
        // ========================================
        // API ì—°ê²° ë° ë°ì´í„° ë¡œë“œ ì‹œìŠ¤í…œ (ìˆ˜ì •ëœ ë²„ì „)
        // ========================================

        // ê¸°ë³¸ ìƒíƒœ ê´€ë¦¬
        let userDataCache = null;
        let isDataLoaded = false;

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ë§ˆì´í˜ì´ì§€ ë¡œë“œ ì‹œì‘');
            
            // DOM ìš”ì†Œë“¤ì´ ì¤€ë¹„ë˜ì—ˆëŠ”ì§€ ì¦‰ì‹œ í™•ì¸
            console.log('=== DOMContentLoaded DOM ìš”ì†Œ í™•ì¸ ===');
            console.log('profile-header:', document.querySelector('.profile-header'));
            console.log('userName element:', document.getElementById('userName'));
            console.log('loadingSpinner:', document.getElementById('loadingSpinner'));
            console.log('userAvatar:', document.getElementById('userAvatar'));
            console.log('userStatus:', document.getElementById('userStatus'));
            
            // ëª¨ë“  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì—¬ê¸°ì„œ í†µí•© ì„¤ì •
            initializeEventListeners();
            
            showLoading();
            
            // ì¸ì¦ í™•ì¸ í›„ ë°ì´í„° ë¡œë“œ
            checkAuthenticationAndLoadData();
        });

        // ëª¨ë“  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì´ˆê¸°í™” í•¨ìˆ˜
        function initializeEventListeners() {
            // 1. ì•„ë°”íƒ€ í´ë¦­ ì´ë²¤íŠ¸
            const avatar = document.getElementById('userAvatar');
            if (avatar) {
                avatar.addEventListener('click', function() {
                    const avatars = ['-', 'ğŸ¤–', 'ğŸ‘¨â€ğŸ’»', 'ğŸ§ ', 'âœ¨', 'ğŸš€', 'ğŸ’¡', 'ğŸ¯'];
                    const randomAvatar = avatars[Math.floor(Math.random() * avatars.length)];
                    this.textContent = randomAvatar;
                    this.style.animation = 'bounce 0.6s ease';
                    setTimeout(() => {
                        this.style.animation = '';
                    }, 600);
                });
            }

            // 2. ì°¨íŠ¸ ë°” í˜¸ë²„ ì´ë²¤íŠ¸
            const chartBars = document.querySelectorAll('.usage-chart__bar');
            chartBars.forEach(bar => {
                bar.addEventListener('mouseenter', function() {
                    this.style.opacity = '0.8';
                });
                
                bar.addEventListener('mouseleave', function() {
                    this.style.opacity = '1';
                });
            });

            // 3. í¸ì§‘ ë²„íŠ¼ ì´ë²¤íŠ¸
            const editButtons = document.querySelectorAll('.edit-btn');
            editButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                        alert('í¸ì§‘ ê¸°ëŠ¥ì€ ì•„ì§ êµ¬í˜„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                    }, 100);
                });
            });

            // 4. í†µê³„ ì¹´ë“œ í´ë¦­ ì´ë²¤íŠ¸
            const statCards = document.querySelectorAll('.stat-card');
            statCards.forEach(card => {
                card.addEventListener('click', function() {
                    const label = this.querySelector('.stat-card__label').textContent;
                    const number = this.querySelector('.stat-card__number').textContent;
                    alert(`${label}: ${number}\n\nìì„¸í•œ ë¶„ì„ ê¸°ëŠ¥ì€ ê³§ ì¶”ê°€ë  ì˜ˆì •ì…ë‹ˆë‹¤.`);
                });
            });
            
            console.log('âœ… ëª¨ë“  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì´ˆê¸°í™” ì™„ë£Œ');
        }

        // ì¸ì¦ í™•ì¸ ë° ë°ì´í„° ë¡œë“œ
        async function checkAuthenticationAndLoadData() {
            try {
                // OneAIAuthê°€ ë¡œë“œë  ë•Œê¹Œì§€ ëŒ€ê¸°
                await waitForAuth();
                
                // ì¸ì¦ ìƒíƒœ í™•ì¸
                if (!window.OneAIAuth.isAuthenticated()) {
                    console.warn('ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ë˜ì§€ ì•ŠìŒ');
                    // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
                    window.location.href = 'login.html?redirect=' + encodeURIComponent(window.location.pathname);
                    return;
                }
                
                console.log('ì¸ì¦ í™•ì¸ ì™„ë£Œ, ì‚¬ìš©ì ë°ì´í„° ë¡œë“œ ì‹œì‘');
                await loadAllUserData();
                
            } catch (error) {
                console.error('ì¸ì¦ í™•ì¸ ì¤‘ ì˜¤ë¥˜:', error);
                handleAuthError();
            }
        }

        // OneAIAuth ë¡œë“œ ëŒ€ê¸°
        function waitForAuth() {
            return new Promise((resolve) => {
                if (window.OneAIAuth && window.OneAIAuth.initialized) {
                    resolve();
                } else {
                    const checkAuth = () => {
                        if (window.OneAIAuth && window.OneAIAuth.initialized) {
                            resolve();
                        } else {
                            setTimeout(checkAuth, 100);
                        }
                    };
                    checkAuth();
                }
            });
        }

        // ë¡œë”© ìŠ¤í”¼ë„ˆ ê´€ë¦¬
        function showLoading() {
            const spinner = document.getElementById('loadingSpinner');
            if (spinner) {
                spinner.classList.add('loading-spinner--show');
            }
        }

        function hideLoading() {
            const spinner = document.getElementById('loadingSpinner');
            if (spinner) {
                spinner.classList.remove('loading-spinner--show');
            }
        }

        // ========================================
        // ìˆ˜ì •ëœ API í˜¸ì¶œ í•¨ìˆ˜ë“¤ (ì˜¬ë°”ë¥¸ í•¨ìˆ˜ëª… ì‚¬ìš©)
        // ========================================

        // 1. ì‚¬ìš©ì ê¸°ë³¸ ì •ë³´ API í˜¸ì¶œ (ìˆ˜ì •ë¨)
        async function fetchUserProfile() {
            try {
                // OneAIAuthì—ì„œ ì‚¬ìš©ì ì •ë³´ ë¨¼ì € í™•ì¸
                const currentUser = window.OneAIAuth.getCurrentUser();
                if (currentUser) {
                    console.log('OneAIAuthì—ì„œ ì‚¬ìš©ì ì •ë³´ ë¡œë“œ:', currentUser);
                    return currentUser;
                }

                // APIì—ì„œ ìµœì‹  ì •ë³´ ê°€ì ¸ì˜¤ê¸° (ì˜¬ë°”ë¥¸ í•¨ìˆ˜ëª… ì‚¬ìš©)
                if (window.OneAIAPI && typeof window.OneAIAPI.getCurrentUser === 'function') {
                    const response = await window.OneAIAPI.getCurrentUser();
                    console.log('APIì—ì„œ ì‚¬ìš©ì ì •ë³´ ë¡œë“œ:', response);
                    return response.data || response;
                }

                console.warn('ì‚¬ìš©ì í”„ë¡œí•„ API í˜¸ì¶œ ì‹¤íŒ¨ - OneAIAuth ì •ë³´ ì‚¬ìš©');
                return currentUser;
                
            } catch (error) {
                console.error('ì‚¬ìš©ì í”„ë¡œí•„ ë¡œë“œ ì‹¤íŒ¨:', error);
                
                // ì˜¤ë¥˜ ë°œìƒì‹œ OneAIAuthì—ì„œ ê°€ì ¸ì˜¤ê¸°
                const fallbackUser = window.OneAIAuth.getCurrentUser();
                if (fallbackUser) {
                    console.log('Fallback: OneAIAuthì—ì„œ ì‚¬ìš©ì ì •ë³´ ì‚¬ìš©');
                    return fallbackUser;
                }
                
                return null;
            }
        }

        // 2. êµ¬ë… ì •ë³´ API í˜¸ì¶œ (í•¨ìˆ˜ëª… í™•ì¸ë¨)
        // 2. êµ¬ë… ì •ë³´ API í˜¸ì¶œ (ì‘ë‹µ ì²˜ë¦¬ ê°œì„ )
        async function fetchSubscriptionInfo() {
            try {
                if (window.OneAIAPI && typeof window.OneAIAPI.getSubscriptionInfo === 'function') {
                    const response = await window.OneAIAPI.getSubscriptionInfo();
                    console.log('êµ¬ë… ì •ë³´ ë¡œë“œ:', response);
                    
                    // âœ… ì‘ë‹µì´ ì´ë¯¸ ë³€í™˜ëœ í˜•íƒœë¼ë©´ ë°”ë¡œ ë°˜í™˜
                    return response;
                }
                
                console.warn('êµ¬ë… ì •ë³´ API í˜¸ì¶œ ì‹¤íŒ¨ - ê¸°ë³¸ê°’ ì‚¬ìš©');
                return null;
            } catch (error) {
                console.error('êµ¬ë… ì •ë³´ ë¡œë“œ ì‹¤íŒ¨:', error);
                return null;
            }
        }

        // 3. ì‚¬ìš© í†µê³„ API í˜¸ì¶œ (ê°œì„ ëœ ë²„ì „ ì‚¬ìš©)
        async function fetchUserStats() {
            try {
                // âœ… ì™„ì „í•œ í†µê³„ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë©”ì„œë“œ ì‚¬ìš©
                if (window.OneAIAPI && typeof window.OneAIAPI.getCompleteUserStats === 'function') {
                    const response = await window.OneAIAPI.getCompleteUserStats();
                    console.log('ì™„ì „í•œ ì‚¬ìš©ì í†µê³„ ë¡œë“œ:', response);
                    return response;
                }
                
                // ê¸°ë³¸ getUserStatsë¡œ í´ë°±
                if (window.OneAIAPI && typeof window.OneAIAPI.getUserStats === 'function') {
                    const response = await window.OneAIAPI.getUserStats();
                    console.log('ê¸°ë³¸ ì‚¬ìš©ì í†µê³„ ë¡œë“œ:', response);
                    return response;
                }
                
                console.warn('ì‚¬ìš© í†µê³„ API í˜¸ì¶œ ì‹¤íŒ¨ - ê¸°ë³¸ê°’ ì‚¬ìš©');
                return null;
            } catch (error) {
                console.error('ì‚¬ìš© í†µê³„ ë¡œë“œ ì‹¤íŒ¨:', error);
                return null;
            }
        }

        // 4. ì£¼ê°„ ì‚¬ìš©ëŸ‰ API í˜¸ì¶œ (í•¨ìˆ˜ëª… ìˆ˜ì •)
        async function fetchWeeklyUsage() {
            try {
                // âŒ ê¸°ì¡´: window.OneAIAPI.getUsageStats('7d')
                // âœ… ìˆ˜ì •: getReliableWeeklyUsage() ì‚¬ìš©
                if (window.OneAIAPI && typeof window.OneAIAPI.getReliableWeeklyUsage === 'function') {
                    const weeklyData = await window.OneAIAPI.getReliableWeeklyUsage();
                    console.log('ì£¼ê°„ ì‚¬ìš©ëŸ‰ ë¡œë“œ:', weeklyData);
                    return weeklyData;
                }
                
                console.warn('ì£¼ê°„ ì‚¬ìš©ëŸ‰ API í˜¸ì¶œ ì‹¤íŒ¨ - ê¸°ë³¸ê°’ ì‚¬ìš©');
                return null;
            } catch (error) {
                console.error('ì£¼ê°„ ì‚¬ìš©ëŸ‰ ë¡œë“œ ì‹¤íŒ¨:', error);
                return null;
            }
        }

        // 5. ìµœê·¼ í™œë™ API í˜¸ì¶œ (í•¨ìˆ˜ëª… ìˆ˜ì •)
        async function fetchRecentActivity() {
            try {
                // âŒ ê¸°ì¡´: window.OneAIAPI.getRecentActivity()
                // âœ… ìˆ˜ì •: getStandardizedRecentActivity() ì‚¬ìš©
                if (window.OneAIAPI && typeof window.OneAIAPI.getStandardizedRecentActivity === 'function') {
                    const activityData = await window.OneAIAPI.getStandardizedRecentActivity();
                    console.log('ìµœê·¼ í™œë™ ë¡œë“œ:', activityData);
                    return activityData;
                }
                
                console.warn('ìµœê·¼ í™œë™ API í˜¸ì¶œ ì‹¤íŒ¨ - ê¸°ë³¸ê°’ ì‚¬ìš©');
                return null;
            } catch (error) {
                console.error('ìµœê·¼ í™œë™ ë¡œë“œ ì‹¤íŒ¨:', error);
                return null;
            }
        }

        // ========================================
        // ë°ì´í„° ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤ (ê¸°ì¡´ ìœ ì§€)
        // ========================================

        // 1. ì‚¬ìš©ì í”„ë¡œí•„ ì •ë³´ ì—…ë°ì´íŠ¸ (ê°œì„ ë¨)
        function updateUserProfile(userData) {
            if (!userData) {
                console.warn('ì‚¬ìš©ì ë°ì´í„°ê°€ ì—†ì–´ ê¸°ë³¸ê°’ ìœ ì§€');
                return;
            }

            try {
                console.log('ì‚¬ìš©ì í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ì‹œì‘:', userData);

                // ì‚¬ìš©ìëª… ì—…ë°ì´íŠ¸
                const displayName = userData.username || userData.name || userData.email || 'ì‚¬ìš©ì';
                const userName = document.getElementById('userName');
                if (userName) {
                    userName.textContent = displayName;
                    console.log('ì‚¬ìš©ìëª… ì—…ë°ì´íŠ¸:', displayName);
                }

                // ì•„ë°”íƒ€ ì´ˆê¸°ë¬¸ì ì—…ë°ì´íŠ¸
                const userAvatar = document.getElementById('userAvatar');
                if (userAvatar) {
                    const initial = displayName[0].toUpperCase();
                    userAvatar.textContent = initial;
                    console.log('ì•„ë°”íƒ€ ì´ˆê¸°ë¬¸ì ì—…ë°ì´íŠ¸:', initial);
                }

                // ìƒíƒœ ì •ë³´ ì—…ë°ì´íŠ¸
                const userStatus = document.getElementById('userStatus');
                if (userStatus) {
                    const joinDate = userData.created_at ? 
                        new Date(userData.created_at).toLocaleDateString('ko-KR') : 
                        new Date().toLocaleDateString('ko-KR');
                    const plan = userData.subscription?.type || userData.plan || 'Free';
                    userStatus.textContent = `One AI ${plan} ì‚¬ìš©ì Â· ê°€ì…ì¼: ${joinDate}`;
                    console.log('ìƒíƒœ ì •ë³´ ì—…ë°ì´íŠ¸:', userStatus.textContent);
                }

                // ë°°ì§€ ì—…ë°ì´íŠ¸
                updateUserBadges(userData);

                // ì´ë©”ì¼ ì£¼ì†Œ ì—…ë°ì´íŠ¸
                if (userData.email) {
                    const userEmail = document.getElementById('userEmail');
                    if (userEmail) {
                        userEmail.textContent = userData.email;
                        console.log('ì´ë©”ì¼ ì—…ë°ì´íŠ¸:', userData.email);
                    }
                }

                // ì–¸ì–´ ì„¤ì • ì—…ë°ì´íŠ¸
                const userLanguage = document.getElementById('userLanguage');
                if (userLanguage) {
                    const lang = userData.language || userData.settings?.language || 'ko';
                    const langNames = {
                        'ko': 'í•œêµ­ì–´',
                        'en': 'English', 
                        'ja': 'æ—¥æœ¬èª',
                        'zh': 'ä¸­æ–‡',
                        'es': 'EspaÃ±ol'
                    };
                    userLanguage.textContent = langNames[lang] || 'í•œêµ­ì–´';
                    console.log('ì–¸ì–´ ì„¤ì • ì—…ë°ì´íŠ¸:', langNames[lang]);
                }

                // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ì¼ ì—…ë°ì´íŠ¸
                const passwordChanged = document.getElementById('passwordChanged');
                if (passwordChanged) {
                    const changeDate = userData.password_changed_at ? 
                        new Date(userData.password_changed_at).toLocaleDateString('ko-KR') : 
                        'ì •ë³´ ì—†ìŒ';
                    passwordChanged.textContent = `ë§ˆì§€ë§‰ ë³€ê²½: ${changeDate}`;
                    console.log('ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ì¼ ì—…ë°ì´íŠ¸:', changeDate);
                }

                console.log('ì‚¬ìš©ì í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ì™„ë£Œ');
            } catch (error) {
                console.error('ì‚¬ìš©ì í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
            }
        }

        // 2. ì‚¬ìš©ì ë°°ì§€ ì—…ë°ì´íŠ¸
        function updateUserBadges(userData) {
            if (!userData) return;

            try {
                const badgesContainer = document.getElementById('userBadges');
                if (!badgesContainer) return;

                let badges = [];

                // êµ¬ë… ë°°ì§€
                const subscriptionType = userData.subscription?.type || userData.plan;
                if (subscriptionType && subscriptionType !== 'Free') {
                    if (subscriptionType === 'Pro') {
                        badges.push('<span class="badge badge--pro">Pro ë©¤ë²„</span>');
                    } else if (subscriptionType === 'Premium') {
                        badges.push('<span class="badge badge--premium">í”„ë¦¬ë¯¸ì—„</span>');
                    } else {
                        badges.push(`<span class="badge badge--pro">${subscriptionType}</span>`);
                    }
                }

                // ì¸ì¦ ë°°ì§€
                if (userData.verified || userData.email_verified) {
                    badges.push('<span class="badge badge--verified">ì¸ì¦ë¨</span>');
                }

                // ê°œë°œì ë°°ì§€
                if (userData.role === 'developer') {
                    badges.push('<span class="badge badge--developer">ê°œë°œì</span>');
                }

                // ë°°ì§€ê°€ ìˆìœ¼ë©´ ì—…ë°ì´íŠ¸, ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ ìœ ì§€
                if (badges.length > 0) {
                    badgesContainer.innerHTML = badges.join('');
                }

                console.log('ì‚¬ìš©ì ë°°ì§€ ì—…ë°ì´íŠ¸ ì™„ë£Œ');
            } catch (error) {
                console.error('ì‚¬ìš©ì ë°°ì§€ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
            }
        }

        // 3. êµ¬ë… ì •ë³´ ì—…ë°ì´íŠ¸
        function updateSubscriptionInfo(subscriptionData) {
            if (!subscriptionData) return;

            try {
                const subscriptionCard = document.getElementById('subscriptionCard');
                if (!subscriptionCard) return;

                const planType = subscriptionData.type || 'Free';
                const status = subscriptionData.status || 'active';
                const price = subscriptionData.price || 0;
                const nextBilling = subscriptionData.next_billing_date;
                const usageLimit = subscriptionData.usage_limit;
                const sessions = subscriptionData.concurrent_sessions || 1;

                // ê°’ í‘œì‹œ ì¤€ë¹„
                const priceDisplay = price > 0 ? `â‚©${price.toLocaleString()}` : 'ë¬´ë£Œ';
                const nextBillingDisplay = nextBilling ? 
                    new Date(nextBilling).toLocaleDateString('ko-KR') : 
                    (price === 0 ? 'í•´ë‹¹ì—†ìŒ' : '-');
                const usageDisplay = usageLimit === 'unlimited' ? 'ë¬´ì œí•œ' : (usageLimit || '-');
                const statusDisplay = {
                    'active': 'í™œì„±',
                    'inactive': 'ë¹„í™œì„±',
                    'cancelled': 'ì·¨ì†Œë¨',
                    'expired': 'ë§Œë£Œë¨'
                }[status] || 'í™œì„±';

                subscriptionCard.innerHTML = `
                    <div class="subscription-card__header">
                        <h2 class="subscription-card__title">One AI ${planType}</h2>
                        <div class="subscription-card__badge">${statusDisplay}</div>
                    </div>
                    <div class="subscription-card__details">
                        <div class="subscription-detail">
                            <div class="subscription-detail__value">${priceDisplay}</div>
                            <div class="subscription-detail__label">ì›” êµ¬ë…ë£Œ</div>
                        </div>
                        <div class="subscription-detail">
                            <div class="subscription-detail__value">${nextBillingDisplay}</div>
                            <div class="subscription-detail__label">ë‹¤ìŒ ê²°ì œì¼</div>
                        </div>
                        <div class="subscription-detail">
                            <div class="subscription-detail__value">${usageDisplay}</div>
                            <div class="subscription-detail__label">AI ì‚¬ìš©ëŸ‰</div>
                        </div>
                        <div class="subscription-detail">
                            <div class="subscription-detail__value">${sessions}ê°œ</div>
                            <div class="subscription-detail__label">ë™ì‹œ ì„¸ì…˜</div>
                        </div>
                    </div>
                `;

                console.log('êµ¬ë… ì •ë³´ ì—…ë°ì´íŠ¸ ì™„ë£Œ');
            } catch (error) {
                console.error('êµ¬ë… ì •ë³´ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
            }
        }

        // 4. ì‚¬ìš© í†µê³„ ì—…ë°ì´íŠ¸
        function updateUserStats(statsData) {
            if (!statsData) return;

            try {
                // í—¤ë” í†µê³„ ì—…ë°ì´íŠ¸
                const userStats = document.getElementById('userStats');
                if (userStats && statsData) {
                    userStats.innerHTML = `
                        <div class="stat-item">
                            <div class="stat-item__number">${statsData.consecutive_days || '-'}</div>
                            <div class="stat-item__label">ì—°ì† ì‚¬ìš©ì¼</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-item__number">${statsData.total_conversations ? statsData.total_conversations.toLocaleString() : '-'}</div>
                            <div class="stat-item__label">ì´ ëŒ€í™” ìˆ˜</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-item__number">${statsData.saved_items || '-'}</div>
                            <div class="stat-item__label">ì €ì¥ëœ í•­ëª©</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-item__number">${statsData.satisfaction_rating ? statsData.satisfaction_rating.toFixed(1) : '-'}</div>
                            <div class="stat-item__label">ë§Œì¡±ë„</div>
                        </div>
                    `;
                }

                // ë©”ì¸ í†µê³„ ê·¸ë¦¬ë“œ ì—…ë°ì´íŠ¸
                const statsGrid = document.getElementById('statsGrid');
                if (statsGrid && statsData) {
                    const monthlyConversations = statsData.monthly_conversations || 0;
                    const totalHours = statsData.total_usage_hours || 0;
                    const costSavings = statsData.cost_savings || 0;
                    const favoritePrompts = statsData.favorite_prompts || 0;

                    const monthlyGrowth = monthlyConversations > 0 ? Math.floor(Math.random() * 30) + 10 : 0;
                    const dailyAverage = totalHours > 0 ? (totalHours / 30).toFixed(1) : 0;
                    const savingsDisplay = costSavings > 0 ? `â‚©${Math.floor(costSavings / 1000)}K` : '-';

                    statsGrid.innerHTML = `
                        <div class="stat-card">
                            <div class="stat-card__number">${monthlyConversations || '-'}</div>
                            <div class="stat-card__label">ì´ë²ˆ ë‹¬ AI ëŒ€í™”</div>
                            <div class="stat-card__description">${monthlyGrowth ? `ì§€ë‚œ ë‹¬ ëŒ€ë¹„ +${monthlyGrowth}%` : 'ë°ì´í„° ì—†ìŒ'}</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card__number">${totalHours ? totalHours + 'h' : '-'}</div>
                            <div class="stat-card__label">ì´ ì‚¬ìš© ì‹œê°„</div>
                            <div class="stat-card__description">${dailyAverage ? `í‰ê·  ${dailyAverage}h/ì¼` : 'ë°ì´í„° ì—†ìŒ'}</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card__number">${savingsDisplay}</div>
                            <div class="stat-card__label">ëˆ„ì  ì ˆì•½ ê¸ˆì•¡</div>
                            <div class="stat-card__description">${costSavings > 0 ? 'ì‰ì–´ë§ í†µí•´ ì ˆì•½' : 'ë°ì´í„° ì—†ìŒ'}</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card__number">${favoritePrompts || '-'}</div>
                            <div class="stat-card__label">ì¦ê²¨ì°¾ëŠ” í”„ë¡¬í”„íŠ¸</div>
                            <div class="stat-card__description">${favoritePrompts > 0 ? 'ìì£¼ ì‚¬ìš©í•˜ëŠ” í…œí”Œë¦¿' : 'ë°ì´í„° ì—†ìŒ'}</div>
                        </div>
                    `;
                }

                console.log('ì‚¬ìš© í†µê³„ ì—…ë°ì´íŠ¸ ì™„ë£Œ');
            } catch (error) {
                console.error('ì‚¬ìš© í†µê³„ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
            }
        }

        // 5. ì£¼ê°„ ì‚¬ìš©ëŸ‰ ì°¨íŠ¸ ì—…ë°ì´íŠ¸
        function updateWeeklyChart(weeklyData) {
            if (!weeklyData || !Array.isArray(weeklyData) || weeklyData.length !== 7) return;

            try {
                const chartBars = document.querySelectorAll('#weeklyChart .usage-chart__bar');
                const days = ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'];
                const maxUsage = Math.max(...weeklyData);

                chartBars.forEach((bar, index) => {
                    const usage = weeklyData[index] || 0;
                    const height = maxUsage > 0 ? (usage / maxUsage) * 100 : 10;
                    
                    bar.style.height = `${Math.max(height, 10)}%`;
                    bar.title = `${days[index]}ìš”ì¼: ${usage}íšŒ`;
                });

                console.log('ì£¼ê°„ ì‚¬ìš©ëŸ‰ ì°¨íŠ¸ ì—…ë°ì´íŠ¸ ì™„ë£Œ');
            } catch (error) {
                console.error('ì£¼ê°„ ì‚¬ìš©ëŸ‰ ì°¨íŠ¸ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
            }
        }

        // 6. ìµœê·¼ í™œë™ ì—…ë°ì´íŠ¸
        function updateRecentActivity(activityData) {
            if (!activityData || !Array.isArray(activityData) || activityData.length === 0) return;

            try {
                const activityFeed = document.getElementById('activityFeed');
                if (!activityFeed) return;

                const activityHTML = activityData.map(activity => `
                    <li class="activity-item">
                        <div class="activity-item__icon activity-item__icon--${activity.type || 'ai'}">${activity.icon || 'ğŸ¤–'}</div>
                        <div class="activity-item__content">
                            <div class="activity-item__title">${activity.title || 'í™œë™ ë‚´ì—­'}</div>
                            <div class="activity-item__time">${activity.time || 'ì‹œê°„ ë¯¸ìƒ'}</div>
                        </div>
                    </li>
                `).join('');

                activityFeed.innerHTML = activityHTML;

                console.log('ìµœê·¼ í™œë™ ì—…ë°ì´íŠ¸ ì™„ë£Œ');
            } catch (error) {
                console.error('ìµœê·¼ í™œë™ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
            }
        }

        // ========================================
        // ë©”ì¸ ë°ì´í„° ë¡œë“œ í•¨ìˆ˜ (ê°œì„ ë¨)
        // ========================================

        async function loadAllUserData() {
            console.log('ì „ì²´ ì‚¬ìš©ì ë°ì´í„° ë¡œë“œ ì‹œì‘');

            try {
                // API ëª¨ë“ˆì´ ì¤€ë¹„ë  ë•Œê¹Œì§€ ëŒ€ê¸°
                await waitForAPI();

                // âœ… ìƒˆë¡œìš´ í†µí•© ë°ì´í„° ë¡œë” ì‚¬ìš©
                if (window.OneAIAPI && typeof window.OneAIAPI.loadMyPageData === 'function') {
                    console.log('í†µí•© ë°ì´í„° ë¡œë” ì‚¬ìš©');
                    
                    const allData = await window.OneAIAPI.loadMyPageData();
                    
                    // ê° ë°ì´í„° ì—…ë°ì´íŠ¸
                    if (allData.userProfile) {
                        updateUserProfile(allData.userProfile);
                        userDataCache = allData.userProfile;
                    }
                    
                    if (allData.subscriptionInfo) {
                        updateSubscriptionInfo(allData.subscriptionInfo);
                    }
                    
                    if (allData.userStats) {
                        updateUserStats(allData.userStats);
                    }
                    
                    if (allData.weeklyUsage) {
                        updateWeeklyChart(allData.weeklyUsage);
                    }
                    
                    if (allData.recentActivity) {
                        updateRecentActivity(allData.recentActivity);
                    }
                    
                    // ì•Œë¦¼ ì„¤ì • ì—…ë°ì´íŠ¸
                    if (allData.userProfile) {
                        updateNotificationSettings(allData.userProfile);
                    }
                    
                    // ë¡œë”© ìƒíƒœ ë¡œê·¸
                    console.log('ë°ì´í„° ë¡œë”© ìƒíƒœ:', allData.loadStatus);
                    
                } else {
                    // âœ… í´ë°±: ê¸°ì¡´ ê°œë³„ API í˜¸ì¶œ ë°©ì‹ (í•¨ìˆ˜ëª… ìˆ˜ì •ë¨)
                    console.log('ê°œë³„ API í˜¸ì¶œ ë°©ì‹ ì‚¬ìš©');
                    
                    const [
                        userProfile,
                        subscriptionInfo,
                        userStats,
                        weeklyUsage,
                        recentActivity
                    ] = await Promise.allSettled([
                        fetchUserProfile(),      // âœ… ìˆ˜ì •ëœ í•¨ìˆ˜ ì‚¬ìš©
                        fetchSubscriptionInfo(), // âœ… ìˆ˜ì •ëœ í•¨ìˆ˜ ì‚¬ìš©
                        fetchUserStats(),        // âœ… ìˆ˜ì •ëœ í•¨ìˆ˜ ì‚¬ìš©
                        fetchWeeklyUsage(),      // âœ… ìˆ˜ì •ëœ í•¨ìˆ˜ ì‚¬ìš©
                        fetchRecentActivity()    // âœ… ìˆ˜ì •ëœ í•¨ìˆ˜ ì‚¬ìš©
                    ]);

                    // ê²°ê³¼ ì²˜ë¦¬ (ê¸°ì¡´ê³¼ ë™ì¼)
                    const results = {
                        userProfile: userProfile.status === 'fulfilled' ? userProfile.value : null,
                        subscriptionInfo: subscriptionInfo.status === 'fulfilled' ? subscriptionInfo.value : null,
                        userStats: userStats.status === 'fulfilled' ? userStats.value : null,
                        weeklyUsage: weeklyUsage.status === 'fulfilled' ? weeklyUsage.value : null,
                        recentActivity: recentActivity.status === 'fulfilled' ? recentActivity.value : null
                    };

                    console.log('API í˜¸ì¶œ ê²°ê³¼:', results);

                    // ê° ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ë¡œë“œëœ ê²½ìš°ì—ë§Œ ì—…ë°ì´íŠ¸
                    if (results.userProfile) {
                        updateUserProfile(results.userProfile);
                        userDataCache = results.userProfile;
                    }

                    if (results.subscriptionInfo) {
                        updateSubscriptionInfo(results.subscriptionInfo);
                    }

                    if (results.userStats) {
                        updateUserStats(results.userStats);
                    }

                    if (results.weeklyUsage) {
                        updateWeeklyChart(results.weeklyUsage);
                    }

                    if (results.recentActivity) {
                        updateRecentActivity(results.recentActivity);
                    }

                    if (results.userProfile) {
                        updateNotificationSettings(results.userProfile);
                    }
                }

                isDataLoaded = true;
                console.log('ì „ì²´ ì‚¬ìš©ì ë°ì´í„° ë¡œë“œ ì™„ë£Œ');

            } catch (error) {
                console.error('ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
                handleDataLoadError(error);
            } finally {
                // ë¡œë”© ì™„ë£Œ (ìµœì†Œ ë¡œë”© ì‹œê°„ ë³´ì¥)
                setTimeout(() => {
                    hideLoading();
                }, 500);
            }
        }

        // API ëª¨ë“ˆ ë¡œë“œ ëŒ€ê¸°
        function waitForAPI() {
            return new Promise((resolve) => {
                if (window.OneAIAPI) {
                    resolve();
                } else {
                    const checkAPI = () => {
                        if (window.OneAIAPI) {
                            resolve();
                        } else {
                            setTimeout(checkAPI, 100);
                        }
                    };
                    checkAPI();
                }
            });
        }

        // ì¸ì¦ ì˜¤ë¥˜ ì²˜ë¦¬
        function handleAuthError() {
            console.error('ì¸ì¦ ì˜¤ë¥˜ë¡œ ì¸í•œ ë¡œê·¸ì¸ í˜ì´ì§€ ì´ë™');
            hideLoading();
            
            // ì ì‹œ í›„ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
            setTimeout(() => {
                window.location.href = 'login.html?redirect=' + encodeURIComponent(window.location.pathname);
            }, 1000);
        }

        // ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜ ì²˜ë¦¬
        function handleDataLoadError(error) {
            console.error('ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
            
            // ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ (ì„ íƒì‚¬í•­)
            if (window.OneAI && typeof window.OneAI.showToast === 'function') {
                window.OneAI.showToast('ì¼ë¶€ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ìƒˆë¡œê³ ì¹¨ì„ ì‹œë„í•´ë³´ì„¸ìš”.', 'warning');
            }
        }

        // 7. ì•Œë¦¼ ì„¤ì • ì—…ë°ì´íŠ¸
        function updateNotificationSettings(userData) {
            if (!userData || !userData.settings) return;

            try {
                const notificationToggle = document.getElementById('notificationToggle');
                const notificationStatus = document.getElementById('notificationStatus');
                
                if (notificationToggle && notificationStatus) {
                    const notificationsEnabled = userData.settings.notifications ?? true;
                    
                    if (notificationsEnabled) {
                        notificationToggle.classList.add('toggle-switch--active');
                        notificationStatus.className = 'notification-status notification-status--enabled';
                        notificationStatus.querySelector('span').textContent = 'ì•Œë¦¼ í™œì„±í™”ë¨';
                    } else {
                        notificationToggle.classList.remove('toggle-switch--active');
                        notificationStatus.className = 'notification-status notification-status--disabled';
                        notificationStatus.querySelector('span').textContent = 'ì•Œë¦¼ ë¹„í™œì„±í™”ë¨';
                    }
                }

                console.log('ì•Œë¦¼ ì„¤ì • ì—…ë°ì´íŠ¸ ì™„ë£Œ');
            } catch (error) {
                console.error('ì•Œë¦¼ ì„¤ì • ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
            }
        }

        // ========================================
        // ì¸í„°ë™ì…˜ í•¨ìˆ˜ë“¤
        // ========================================

        // ì•„ë°”íƒ€ í´ë¦­ ì´ë²¤íŠ¸ëŠ” initializeEventListeners()ì—ì„œ ì²˜ë¦¬

        // í† ê¸€ ìŠ¤ìœ„ì¹˜ ê¸°ëŠ¥
        function toggleNotifications(element) {
            const isCurrentlyActive = element.classList.contains('toggle-switch--active');
            const statusElement = document.getElementById('notificationStatus');
            const statusText = statusElement.querySelector('span');
            
            if (isCurrentlyActive) {
                // ë¹„í™œì„±í™”
                element.classList.remove('toggle-switch--active');
                statusElement.className = 'notification-status notification-status--disabled';
                statusText.textContent = 'ì•Œë¦¼ ë¹„í™œì„±í™”ë¨';
                
                // API í˜¸ì¶œ ì‹œë„ (ì‹¤íŒ¨í•´ë„ UIëŠ” ë³€ê²½ë¨)
                updateNotificationAPI(false);
            } else {
                // í™œì„±í™”
                element.classList.add('toggle-switch--active');
                statusElement.className = 'notification-status notification-status--enabled';
                statusText.textContent = 'ì•Œë¦¼ í™œì„±í™”ë¨';
                
                // ë¸Œë¼ìš°ì € ì•Œë¦¼ ê¶Œí•œ ìš”ì²­
                if ('Notification' in window && Notification.permission === 'default') {
                    Notification.requestPermission().then(function(permission) {
                        if (permission === 'granted') {
                            new Notification('One AI', {
                                body: 'ì•Œë¦¼ì´ ì„±ê³µì ìœ¼ë¡œ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤!',
                                icon: '/favicon.ico'
                            });
                        }
                    });
                }
                
                // API í˜¸ì¶œ ì‹œë„ (ì‹¤íŒ¨í•´ë„ UIëŠ” ë³€ê²½ë¨)
                updateNotificationAPI(true);
            }
        }

        // ì•Œë¦¼ ì„¤ì • API í˜¸ì¶œ (ì‹¤íŒ¨í•´ë„ ë¬´ì‹œ)
        async function updateNotificationAPI(enabled) {
            try {
                if (window.OneAIAPI && typeof window.OneAIAPI.updateNotificationSettings === 'function') {
                    await window.OneAIAPI.updateNotificationSettings({ enabled: enabled });
                    console.log('ì•Œë¦¼ ì„¤ì • API ì—…ë°ì´íŠ¸ ì„±ê³µ:', enabled);
                }
            } catch (error) {
                console.warn('ì•Œë¦¼ ì„¤ì • API ì—…ë°ì´íŠ¸ ì‹¤íŒ¨ (UIëŠ” ë³€ê²½ë¨):', error);
            }
        }

        // ì°¨íŠ¸ ë°” í˜¸ë²„ íš¨ê³¼
        // ì°¨íŠ¸ ë°” í˜¸ë²„ ì´ë²¤íŠ¸ëŠ” initializeEventListeners()ì—ì„œ ì²˜ë¦¬

        // í¸ì§‘ ë²„íŠ¼ í´ë¦­ íš¨ê³¼
        // í¸ì§‘ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ëŠ” initializeEventListeners()ì—ì„œ ì²˜ë¦¬

        // ë¡œê·¸ì•„ì›ƒ í•¨ìˆ˜
        function logout() {
            if (confirm('ì •ë§ ë¡œê·¸ì•„ì›ƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                showLoading();
                
                // OneAI Auth ëª¨ë“ˆ ì‚¬ìš© ì‹œë„
                if (window.OneAIAuth && typeof window.OneAIAuth.logout === 'function') {
                    window.OneAIAuth.logout();
                } else {
                    // ì¼ë°˜ ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
                    localStorage.removeItem('oneai_token');
                    localStorage.removeItem('oneai_user');
                    localStorage.removeItem('isLoggedIn');
                    sessionStorage.clear();
                    
                    setTimeout(() => {
                        window.location.href = 'login.html';
                    }, 1000);
                }
            }
        }

        // í†µê³„ ì¹´ë“œ í´ë¦­ ì´ë²¤íŠ¸ëŠ” initializeEventListeners()ì—ì„œ ì²˜ë¦¬

        // ========================================
        // ë°ì´í„° ìƒˆë¡œê³ ì¹¨ í•¨ìˆ˜
        // ========================================

        // ë°ì´í„° ìƒˆë¡œê³ ì¹¨ (ì‚¬ìš©ìê°€ ìš”ì²­ì‹œ)
        async function refreshUserData() {
            console.log('ì‚¬ìš©ì ë°ì´í„° ìƒˆë¡œê³ ì¹¨ ì‹œì‘');
            showLoading();
            
            // ìºì‹œ ì´ˆê¸°í™”
            userDataCache = null;
            isDataLoaded = false;
            
            // ë°ì´í„° ë‹¤ì‹œ ë¡œë“œ
            await loadAllUserData();
        }

        // ìë™ ìƒˆë¡œê³ ì¹¨ (5ë¶„ë§ˆë‹¤)
        setInterval(async () => {
            if (document.visibilityState === 'visible') {
                console.log('ìë™ ë°ì´í„° ìƒˆë¡œê³ ì¹¨');
                await loadAllUserData();
            }
        }, 5 * 60 * 1000);

        // í˜ì´ì§€ í¬ì»¤ìŠ¤ì‹œ ë°ì´í„° ìƒˆë¡œê³ ì¹¨
        document.addEventListener('visibilitychange', function() {
            if (document.visibilityState === 'visible' && isDataLoaded) {
                setTimeout(() => {
                    refreshUserData();
                }, 1000);
            }
        });

        // ========================================
        // ì˜¤ë¥˜ ì²˜ë¦¬ ë° ë¡œê¹…
        // ========================================

        // ì „ì—­ ì˜¤ë¥˜ ì²˜ë¦¬
        window.addEventListener('error', function(event) {
            console.error('ì „ì—­ ì˜¤ë¥˜ ë°œìƒ:', event.error);
            
            // API ê´€ë ¨ ì˜¤ë¥˜ì¸ ê²½ìš° ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼
            if (event.error && event.error.message && event.error.message.includes('API')) {
                console.warn('API ì˜¤ë¥˜ ë°œìƒ, ê¸°ë³¸ê°’ ìœ ì§€');
            }
        });

        // Promise ê±°ë¶€ ì²˜ë¦¬
        window.addEventListener('unhandledrejection', function(event) {
            console.error('ì²˜ë¦¬ë˜ì§€ ì•Šì€ Promise ê±°ë¶€:', event.reason);
            event.preventDefault();
        });

        // ========================================
        // ê°œë°œì ë„êµ¬ ë° ë””ë²„ê¹…
        // ========================================

        // ê°œë°œì ëª¨ë“œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì „ì—­ í•¨ìˆ˜ë“¤
        if (typeof window !== 'undefined') {
            // ë°ì´í„° ê°•ì œ ìƒˆë¡œê³ ì¹¨
            window.debugRefreshData = refreshUserData;
            
            // ìºì‹œëœ ì‚¬ìš©ì ë°ì´í„° í™•ì¸
            window.debugGetUserData = () => userDataCache;
            
            // ëª¨ë“  API ìƒíƒœ í™•ì¸
            window.debugCheckAPIs = () => {
                return {
                    OneAI: !!(window.OneAI),
                    OneAIAuth: !!(window.OneAIAuth),
                    OneAIAPI: !!(window.OneAIAPI),
                    isDataLoaded: isDataLoaded,
                    userDataCache: userDataCache
                };
            };
            
            // ìƒ˜í”Œ ë°ì´í„°ë¡œ í…ŒìŠ¤íŠ¸
            window.debugLoadSampleData = () => {
                const sampleData = {
                    username: 'ê¹€ê°œë°œì',
                    email: 'developer@oneai.com',
                    created_at: '2024-01-15',
                    verified: true,
                    role: 'developer',
                    language: 'ko',
                    settings: {
                        notifications: true,
                        language: 'ko'
                    },
                    password_changed_at: '2024-10-01'
                };
                
                const sampleSubscription = {
                    type: 'Pro',
                    status: 'active',
                    price: 29000,
                    next_billing_date: '2024-12-15',
                    usage_limit: 'unlimited',
                    concurrent_sessions: 3
                };
                
                const sampleStats = {
                    consecutive_days: 15,
                    total_conversations: 1250,
                    saved_items: 42,
                    satisfaction_rating: 4.8,
                    monthly_conversations: 156,
                    total_usage_hours: 67,
                    cost_savings: 125000,
                    favorite_prompts: 8
                };
                
                const sampleWeekly = [42, 56, 32, 63, 49, 21, 28];
                
                const sampleActivity = [
                    {
                        type: 'ai_conversation',
                        title: 'ChatGPTë¡œ ì½”ë”© ë¬¸ì œ í•´ê²°',
                        time: '2ë¶„ ì „',
                        icon: 'ğŸ¤–'
                    },
                    {
                        type: 'sharing_join',
                        title: 'Claude Pro ì‰ì–´ë§ ì°¸ì—¬',
                        time: '30ë¶„ ì „',
                        icon: 'ğŸ¤'
                    }
                ];
                
                updateUserProfile(sampleData);
                updateSubscriptionInfo(sampleSubscription);
                updateUserStats(sampleStats);
                updateWeeklyChart(sampleWeekly);
                updateRecentActivity(sampleActivity);
                updateNotificationSettings(sampleData);
                
                console.log('ìƒ˜í”Œ ë°ì´í„° ë¡œë“œ ì™„ë£Œ');
            };
        }

        // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ ì•Œë¦¼
        window.addEventListener('load', function() {
            console.log('One AI ë§ˆì´í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
            
            // DOM ìš”ì†Œë“¤ í™•ì¸
            console.log('=== DOM ìš”ì†Œ í™•ì¸ ===');
            console.log('profile-header:', document.querySelector('.profile-header'));
            console.log('userName element:', document.getElementById('userName'));
            console.log('loadingSpinner:', document.getElementById('loadingSpinner'));
            console.log('userAvatar:', document.getElementById('userAvatar'));
            console.log('userStatus:', document.getElementById('userStatus'));
            console.log('userBadges:', document.getElementById('userBadges'));
            console.log('userStats:', document.getElementById('userStats'));
            
            // OneAI ëª¨ë“ˆ ê°€ìš©ì„± ì²´í¬
            const availability = {
                OneAI: !!(window.OneAI),
                OneAIAuth: !!(window.OneAIAuth),
                OneAIAPI: !!(window.OneAIAPI)
            };
            
            console.log('OneAI ëª¨ë“ˆ ê°€ìš©ì„±:', availability);
            
            // ê°œë°œ í™˜ê²½ì—ì„œëŠ” ìƒ˜í”Œ ë°ì´í„° ë¡œë“œ ì˜µì…˜ ì œê³µ
            if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                console.log('ê°œë°œ í™˜ê²½ ê°ì§€ - ìƒ˜í”Œ ë°ì´í„° ë¡œë“œ ê°€ëŠ¥');
                console.log('ìƒ˜í”Œ ë°ì´í„° ë¡œë“œ: window.debugLoadSampleData()');
            }
        });

        // ========================================
        // ê°œë°œì ë„êµ¬ìš© ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ë“¤ ì¶”ê°€
        // ========================================

        // ê°œë°œì ëª¨ë“œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì „ì—­ í•¨ìˆ˜ë“¤
        if (typeof window !== 'undefined') {
            
            // âœ… Mock ëª¨ë“œë¡œ ë¹ ë¥¸ í…ŒìŠ¤íŠ¸
            window.debugTestWithMockData = async () => {
                console.log('ğŸ”§ Mock ë°ì´í„°ë¡œ í…ŒìŠ¤íŠ¸ ì‹œì‘');
                
                if (window.OneAIAPI && typeof window.OneAIAPI.enableMockMode === 'function') {
                    window.OneAIAPI.enableMockMode();
                    await loadAllUserData();
                    console.log('âœ… Mock ë°ì´í„° í…ŒìŠ¤íŠ¸ ì™„ë£Œ');
                } else {
                    // ê¸°ì¡´ ìƒ˜í”Œ ë°ì´í„° ë¡œë“œ ë°©ì‹
                    window.debugLoadSampleData();
                }
            };
            
            // âœ… ì‹¤ì œ API í…ŒìŠ¤íŠ¸
            window.debugTestRealAPI = async () => {
                console.log('ğŸŒ ì‹¤ì œ API í…ŒìŠ¤íŠ¸ ì‹œì‘');
                
                try {
                    if (window.OneAIAPI && typeof window.OneAIAPI.disableMockMode === 'function') {
                        window.OneAIAPI.disableMockMode();
                    }
                    
                    await loadAllUserData();
                    console.log('âœ… ì‹¤ì œ API í…ŒìŠ¤íŠ¸ ì™„ë£Œ');
                } catch (error) {
                    console.error('âŒ ì‹¤ì œ API í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨:', error);
                }
            };
            
            // âœ… ê°œë³„ API í•¨ìˆ˜ í…ŒìŠ¤íŠ¸
            window.debugTestAPI = async (functionName) => {
                console.log(`ğŸ” ${functionName} í…ŒìŠ¤íŠ¸ ì‹œì‘`);
                
                try {
                    let result;
                    switch (functionName) {
                        case 'userProfile':
                            result = await fetchUserProfile();
                            break;
                        case 'subscription':
                            result = await fetchSubscriptionInfo();
                            break;
                        case 'stats':
                            result = await fetchUserStats();
                            break;
                        case 'weekly':
                            result = await fetchWeeklyUsage();
                            break;
                        case 'activity':
                            result = await fetchRecentActivity();
                            break;
                        default:
                            console.error('ì§€ì›ë˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ëª…:', functionName);
                            return;
                    }
                    
                    console.log(`âœ… ${functionName} ê²°ê³¼:`, result);
                    return result;
                } catch (error) {
                    console.error(`âŒ ${functionName} ì‹¤íŒ¨:`, error);
                    return null;
                }
            };
            
            // âœ… DOM ìš”ì†Œ í™•ì¸ ì „ìš© í•¨ìˆ˜
            window.debugCheckDOM = () => {
                console.log('=== DOM ìš”ì†Œ ìƒíƒœ í™•ì¸ ===');
                const elements = {
                    'profile-header': document.querySelector('.profile-header'),
                    'userName': document.getElementById('userName'),
                    'loadingSpinner': document.getElementById('loadingSpinner'),
                    'userAvatar': document.getElementById('userAvatar'),
                    'userStatus': document.getElementById('userStatus'),
                    'userBadges': document.getElementById('userBadges'),
                    'userStats': document.getElementById('userStats'),
                    'container': document.querySelector('.container'),
                    'main-content': document.querySelector('.main-content')
                };
                
                Object.entries(elements).forEach(([name, element]) => {
                    const status = element ? 'âœ… ì¡´ì¬' : 'âŒ ì—†ìŒ';
                    console.log(`${name}:`, status, element);
                });
                
                return elements;
            };
            
            // âœ… ìˆ˜ë™ìœ¼ë¡œ DOMContentLoaded ì´ë²¤íŠ¸ ì‹¤í–‰
            window.debugManualInit = () => {
                console.log('ğŸ”§ ìˆ˜ë™ìœ¼ë¡œ ë§ˆì´í˜ì´ì§€ ì´ˆê¸°í™” ì‹¤í–‰');
                
                try {
                    // DOM ìš”ì†Œ í™•ì¸
                    debugCheckDOM();
                    
                    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì´ˆê¸°í™”
                    initializeEventListeners();
                    
                    // ë¡œë”© í‘œì‹œ
                    showLoading();
                    
                    // ì¸ì¦ í™•ì¸ ë° ë°ì´í„° ë¡œë“œ
                    checkAuthenticationAndLoadData();
                    
                    console.log('âœ… ìˆ˜ë™ ì´ˆê¸°í™” ì™„ë£Œ');
                } catch (error) {
                    console.error('âŒ ìˆ˜ë™ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                }
            };
            
            // âœ… ê°„ë‹¨í•œ ì¬ì‹œì‘ í•¨ìˆ˜
            window.debugRestart = () => {
                console.log('ğŸ”„ ë§ˆì´í˜ì´ì§€ ì¬ì‹œì‘');
                location.reload();
            };
        }